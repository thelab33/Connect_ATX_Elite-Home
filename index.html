<!-- index.html — Prestige Elite Edition -->
<!DOCTYPE html>
<html lang="en" class="scroll-smooth dark" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Connect ATX Elite · Prestige Sponsorship</title>

  <!-- Meta Description -->
  <meta name="description" content="Empowering youth through basketball, mentorship, and academic excellence in Austin, TX. Sponsor Connect ATX Elite today." />
  <meta name="theme-color" content="#facc15" />
  <meta name="robots" content="index, follow" />

  <!-- Tailwind CSS -->
  <link rel="stylesheet" href="static/css/app.min.css" />
  <link rel="stylesheet" href="static/css/index.css" />

  <!-- Favicon -->
  <link rel="icon" href="static/favicon.ico" />

  <!-- AOS for animations -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" />
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js" defer></script>

  <!-- JS Bundle -->
  <script src="static/js/bundle.min.js" defer></script>
</head>
<body class="bg-white text-gray-900 antialiased dark:bg-gray-900 dark:text-white selection:bg-yellow-300/80">
  <a href="#main" class="sr-only focus:not-sr-only absolute top-2 left-2 z-50 px-4 py-1 rounded shadow bg-yellow-300 text-black">Skip to content</a>

  <main id="main" role="main" tabindex="-1">
<!-- Replace your existing templates/base.html with this full version -->

<!DOCTYPE html>
<html lang="en" class="scroll-smooth dark" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <title>{% block title %}Connect ATX Elite · Empowering Youth Through Basketball{% endblock %}</title>
  <meta name="description" content="Empowering youth in Austin, TX through basketball, mentorship, and academic excellence. Sponsor our 12U AAU team today!" />
  <meta name="theme-color" content="#facc15" media="(prefers-color-scheme: light)" />
  <meta name="theme-color" content="#111827" media="(prefers-color-scheme: dark)" />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="https://www.connectatxelite.com/" />

  <!-- Open Graph / Twitter Meta -->
  <meta property="og:title" content="Connect ATX Elite" />
  <meta property="og:description" content="Sponsor our 12U AAU basketball team—invest in the next generation in Austin, TX." />
  <meta property="og:image" content="{{ url_for('static', filename='connect-atx-team.jpg') }}" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://www.connectatxelite.com/" />
  <meta property="og:site_name" content="Connect ATX Elite" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Connect ATX Elite" />
  <meta name="twitter:description" content="Join our mission to uplift youth through basketball, mentorship, and community." />
  <meta name="twitter:image" content="{{ url_for('static', filename='connect-atx-team.jpg') }}" />

  <!-- Favicon / Touch -->
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" sizes="32x32" type="image/png" />
  <link rel="apple-touch-icon" href="{{ url_for('static', filename='images/apple-touch.png') }}" sizes="180x180" />

  <!-- Stylesheets -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/tailwind.min.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/globals.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/base/back_to_top_ball.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" />
  {% block extra_styles %}{% endblock %}

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SportsTeam",
    "name": "Connect ATX Elite",
    "sport": "Basketball",
    "url": "https://www.connectatxelite.com",
    "location": {
      "@type": "Place",
      "name": "Austin, TX"
    },
    "memberOf": {
      "@type": "Organization",
      "name": "AAU"
    }
  }
  </script>
</head>

<body class="bg-white text-gray-900 antialiased dark:bg-gray-900 dark:text-white selection:bg-yellow-300/80">
  <a href="#main-content" class="sr-only focus:not-sr-only absolute top-2 left-2 bg-yellow-300 text-black px-4 py-1 rounded shadow z-50">Skip to content</a>

  {% include "partials/header.html" %}

  <main id="main-content" role="main" tabindex="-1" aria-label="Main Content">
    {% block content %}{% endblock %}
  </main>

  {% include "partials/footer.html" %}
  {% include "partials/newsletter_popup.html" %}

  <!-- 🔼 Back to Top Ball (Hardcoded) -->
  <button
    id="back-to-top-ball"
    type="button"
    aria-label="Back to top"
    class="fixed bottom-6 right-6 w-14 h-14 z-[60] rounded-full bg-amber-400/90 backdrop-blur-sm shadow-xl opacity-0 pointer-events-none scale-95 translate-y-6 transition-all duration-300 ease-out hover:scale-110 hover:shadow-2xl focus:outline-none focus-visible:ring-4 focus-visible:ring-amber-300"
  >
    <img
      src="{{ url_for('static', filename='images/ball.png') }}"
      alt=""
      aria-hidden="true"
      class="w-9 h-9 mx-auto pointer-events-none select-none"
      loading="lazy"
    />
    <span class="sr-only">Back to top</span>
  </button>

  <!-- JS Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
  <script>AOS.init({ once: true, duration: 700, easing: 'ease-out-quart' });</script>

  <script src="{{ url_for('static', filename='js/bundle.min.js') }}" defer></script>

  <!-- 🔁 Back to Top Ball Script -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const btn = document.getElementById('back-to-top-ball');
      if (!btn) return;

      btn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });

      const toggleVisibility = () => {
        if (window.scrollY > 220) {
          btn.classList.add('opacity-100', 'pointer-events-auto', 'translate-y-0', 'scale-100');
          btn.classList.remove('opacity-0', 'pointer-events-none', 'translate-y-6', 'scale-95');
        } else {
          btn.classList.add('opacity-0', 'pointer-events-none', 'translate-y-6', 'scale-95');
          btn.classList.remove('opacity-100', 'pointer-events-auto', 'translate-y-0', 'scale-100');
        }
      };

      window.addEventListener('scroll', toggleVisibility, { passive: true });
      toggleVisibility();
    });
  </script>

  {% block scripts %}{% endblock %}
</body>
</html>

<footer
  id="site-footer"
  role="contentinfo"
  class="relative bg-zinc-950 text-white py-12 px-6 border-t border-zinc-800 shadow-inner"
  data-aos="fade-up"
  data-aos-delay="200"
>
  <div class="max-w-6xl mx-auto grid gap-12 md:grid-cols-3 text-center md:text-left">

    <!-- Branding & Year -->
    <div class="space-y-2">
      <span class="block text-xs text-amber-400 font-semibold tracking-wide">AAU 12U | Austin, TX</span>
      <p class="text-sm text-white/60">© {{ now().year }} Connect ATX Elite. All rights reserved.</p>

      <!-- Newsletter capture -->
      <form
        id="newsletter-form"
        class="mt-4 flex flex-col sm:flex-row gap-2 justify-center md:justify-start"
        onsubmit="handleNewsletterSignup(event)"
        aria-label="Subscribe to newsletter"
      >
        <input
          type="email"
          name="newsletter_email"
          required
          placeholder="Your email"
          aria-required="true"
          aria-describedby="newsletterHelp"
          class="w-full sm:w-auto flex-grow px-3 py-2 rounded-lg bg-zinc-900 border border-zinc-700 focus:outline-none focus:ring-2 focus:ring-amber-400"
        />
        <button
          type="submit"
          class="px-4 py-2 bg-amber-400 text-black font-semibold rounded-lg hover:bg-amber-300 transition focus:ring-4 focus:ring-amber-400"
        >
          Subscribe
        </button>
      </form>
      <p id="newsletterHelp" class="sr-only">Enter your email to subscribe to our newsletter</p>
    </div>

    <!-- Fundraising Progress + Quick Links -->
    <div class="space-y-4 flex flex-col items-center">
      {% set raised = config.get('RAISED_AMOUNT', 0) %}
      {% set goal   = config.get('GOAL_AMOUNT', 10000) %}
      <div class="w-full max-w-xs" aria-label="Fundraising progress bar">
        <div class="flex justify-between text-xs font-mono text-amber-200 mb-1">
          <span>Raised</span>
          <span>${{ "{:,}".format(raised) }} / ${{ "{:,}".format(goal) }}</span>
        </div>
        <div
          class="relative w-full h-3 rounded-lg bg-zinc-800 overflow-hidden"
          role="progressbar"
          aria-valuemin="0"
          aria-valuemax="{{ goal }}"
          aria-valuenow="{{ raised }}"
          aria-label="Amount raised towards goal"
        >
          <div
            class="absolute inset-y-0 left-0 bg-amber-400 shadow-gold transition-all duration-700"
            style="width: {{ (raised / goal * 100)|round(0, 'floor') }}%;"
          ></div>
        </div>
      </div>

      <nav class="flex flex-wrap justify-center gap-3" role="navigation" aria-label="Footer quick links">
        <a
          href="mailto:arodgps@gmail.com"
          class="px-3 py-1 rounded bg-amber-400/10 text-amber-300 hover:bg-amber-400 hover:text-black transition focus:ring-2 focus:ring-amber-300"
          aria-label="Email Connect ATX Elite"
        >📧 Email</a>
        <a
          href="https://www.connectatxelite.com"
          target="_blank" rel="noopener"
          class="px-3 py-1 rounded bg-amber-400/10 text-amber-300 hover:bg-amber-400 hover:text-black transition focus:ring-2 focus:ring-amber-300"
          aria-label="Visit official site"
        >🌐 Site</a>
        <a
          href="https://www.paypal.com/donate/your-link"
          target="_blank" rel="noopener"
          class="px-3 py-1 rounded bg-green-400/20 text-green-200 hover:bg-green-300 hover:text-black transition focus:ring-2 focus:ring-green-200"
          aria-label="Donate via PayPal"
        >💸 Donate</a>
      </nav>
    </div>

    <!-- Contact, Countdown, and Accessible Back-to-Top -->
    <div class="space-y-4 flex flex-col items-center md:items-end">
      <address class="not-italic text-xs text-white/70 space-y-1">
        <div>
          Contact: <a href="mailto:arodgps@gmail.com" class="underline hover:text-amber-300">arodgps@gmail.com</a>
        </div>
        <div>
          Phone: <a href="tel:+15128200475" class="underline hover:text-amber-300">(512) 820-0475</a>
        </div>
      </address>

      <!-- Live countdown -->
      <div
        id="next-game-countdown"
        class="text-sm text-amber-300 font-mono"
        aria-live="polite"
        aria-atomic="true"
      >
        Next Tournament in: <span id="countdown-timer">00d 00h 00m 00s</span>
      </div>

      <!-- Accessible Back-to-Top anchor -->
      <a
        href="#main-content"
        class="mt-2 text-amber-400 underline hover:text-amber-200"
        aria-label="Back to top"
      >↑ Back to Top</a>
    </div>
  </div>

  <!-- Optional social-proof ticker -->
  <div class="mt-8 text-center text-xs text-white/50 font-mono" aria-live="polite" aria-atomic="true">
    Recent Supporters: {{ ['Acme Corp', 'Jane D.', 'Smith & Co', 'Austin Hoops', 'Elite Donor'] | join(' • ') }}
  </div>
</footer>

<script>
  // Newsletter subscription handler (stub)
  function handleNewsletterSignup(e) {
    e.preventDefault();
    const email = e.target.newsletter_email.value.trim();
    if (!email) {
      alert("Please enter a valid email address.");
      return;
    }
    alert(`🎉 Thanks! We'll keep you updated at ${email}`);
    e.target.reset();
  }

  // Countdown timer script
  const target = new Date('2025-07-01T10:00:00Z');
  function updateCountdown() {
    const now  = Date.now();
    const diff = target - now;
    if (diff <= 0) {
      document.getElementById('countdown-timer').textContent = 'Tournament started!';
      return;
    }
    const d = Math.floor(diff / 86400000),
          h = Math.floor((diff % 86400000) / 3600000),
          m = Math.floor((diff % 3600000) / 60000),
          s = Math.floor((diff % 60000) / 1000);
    document.getElementById('countdown-timer').textContent = `${d}d ${h}h ${m}m ${s}s`;
  }
  setInterval(updateCountdown, 1000);
  updateCountdown();
</script>

{# templates/partials/tiers.html — Enhanced Sponsor Tiers #}
<section
  id="tiers"
  class="py-24 bg-zinc-900 text-white px-6"
  role="region"
  aria-labelledby="tiers-heading"
  tabindex="-1"
  data-aos="fade-up"
  data-aos-duration="800"
>
  <div class="max-w-6xl mx-auto space-y-16">
    <!-- ① QR sponsor call-out -->
    <div
      class="p-6 rounded-2xl bg-gradient-to-r from-amber-400/70 to-amber-200/60 text-black flex flex-col md:flex-row items-center justify-between gap-6 shadow-gold"
      aria-label="Sponsor now call-out"
      data-aos="zoom-in"
      data-aos-delay="200"
    >
      <div>
        <p class="font-bold text-2xl sm:text-3xl">Want to make the biggest impact?</p>
        <p class="text-lg text-amber-800/80">
          Contact us at
          <a href="mailto:arodgps@gmail.com" class="underline hover:text-amber-700">
            arodgps@gmail.com
          </a>
          or scan to sponsor instantly.
        </p>
      </div>
      <img
        src="{{ url_for('static', filename='qr-sponsorship-deck.png') }}"
        alt="Sponsor via QR code"
        width="90"
        height="90"
        class="rounded-lg shadow-lg border border-amber-400 bg-white"
      />
    </div>

    <!-- ② Live progress bar -->
    {% set goal = goal_amount or 10000 %}
    {% set raised = raised_amount or 7850 %}
    <div
      class="w-full max-w-xl mx-auto text-center space-y-2"
      aria-label="{{ '$%s raised of $%s goal'|format(raised, goal) }}"
      data-aos="fade-up"
      data-aos-delay="400"
    >
      <div class="w-full bg-zinc-800 h-5 rounded-full border border-amber-400/30 overflow-hidden relative">
        <div
          id="tiersProgress"
          class="bg-amber-400 h-5 rounded-full shadow-gold transition-all duration-1000 ease-out"
          style="width: {{ (raised/goal*100)|round(1,'ceil') }}%;"
        >
          <span class="pl-2 text-black font-bold">
            {{ '$%s'|format('{:,}'.format(raised)) }}
          </span>
        </div>
      </div>
      <span class="text-sm text-amber-200">Goal: ${{ '{:,}'.format(goal) }}</span>
    </div>

    <!-- ③ Section heading -->
    <h2
      id="tiers-heading"
      class="text-4xl font-bold text-amber-400 text-center"
      data-aos="fade-up"
      data-aos-delay="600"
    >
      Sponsorship Tiers
    </h2>

    <!-- ④ Tier cards with flip effect -->
    {% set tiers = [
      ('Platinum','$5,000+','heroicons-solid:crown',['Logo on jerseys','Shout-outs on social','VIP invites'],'from-amber-500 to-amber-300',True),
      ('Gold','$2,500','heroicons-solid:currency-dollar',['Warm-ups logo','Social features','Appreciation invites'],'from-amber-400 to-amber-200',False),
      ('Silver','$1,000','heroicons-solid:medal',['Social shout-outs','Thank-you certificate','Board listing'],'from-gray-300 to-slate-100',False),
      ('Bronze','$500','heroicons-solid:trophy',['Public thank-you','Board listing'],'from-orange-400 to-amber-200',False),
      ('Custom','Any Amount','heroicons-solid:star',['Tailored benefits','Personalized impact'],'from-purple-500 to-pink-400',False)
    ] %}
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10">
      {% for title, amount, icon, benefits, gradient, highlight in tiers %}
      <div
        class="flip-card perspective"
        tabindex="0"
        data-aos="fade-up"
        data-aos-delay="{{ 700 + loop.index0 * 100 }}"
      >
        <div class="relative w-full h-full transition-transform duration-500 preserve-3d group hover:rotate-y-180 focus-within:rotate-y-180">
          <!-- Front -->
          <div class="card-face card-front p-6 rounded-2xl bg-gradient-to-br {{ gradient }} shadow-2xl text-black flex flex-col items-center justify-start space-y-4">
            {% if highlight %}
            <span class="absolute top-4 right-4 bg-black/80 text-amber-300 text-xs px-3 py-1 rounded-full font-semibold shadow">
              Top&nbsp;Tier
            </span>
            {% endif %}
            <div class="text-5xl">
              <i data-feather="{{ icon }}"></i>
            </div>
            <h3 class="text-2xl font-bold">{{ title }}</h3><span class="sr-only">Secure this tier now</span>
            <p class="text-lg font-semibold">{{ amount }}</p>
            <ul class="list-disc list-inside text-sm space-y-1">
              {% for item in benefits %}
              <li>{{ item }}</li>
              {% endfor %}
            </ul>
          </div>
          <!-- Back -->
          <div class="card-face card-back absolute inset-0 p-6 rounded-2xl bg-zinc-800 text-white flex flex-col items-center justify-center backface-hidden shadow-lg">
            <p class="mb-4 font-semibold">Secure this tier now:</p>
            <button
              class="tier-cta inline-block bg-amber-400 text-black font-bold px-6 py-2 rounded-full shadow-gold hover:scale-105 focus-visible:ring-4 focus-visible:ring-amber-300 transition"
              data-amount="{{ amount | replace('$','') | replace(',','') | default('') }}"
            >
              Sponsor {{ title }}
            </button>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- ⑤ FAQ accordion -->
    <div class="max-w-3xl mx-auto pt-10 border-t border-zinc-800" data-aos="fade-up" data-aos-delay="1100">
      <button
        id="faqToggleTiers"
        class="flex items-center gap-2 text-amber-400 font-bold text-lg hover:underline transition"
        aria-expanded="false"
        aria-controls="faqBodyTiers"
      >
        ▶ Frequently Asked Questions
      </button>
      <div
        id="faqBodyTiers"
        class="hidden mt-4 bg-zinc-900 border border-amber-400/20 rounded-xl p-6 space-y-4"
      >
        <div><b>Can I sponsor anonymously?</b><p class="text-sm text-white/80">Yes — just let us know in your message or donation form.</p></div>
        <div><b>Where does my sponsorship go?</b><p class="text-sm text-white/80">100% supports gym rental, travel, academic programs, and gear.</p></div>
        <div><b>How do I become a sponsor?</b><p class="text-sm text-white/80">Click any “Sponsor” button or email us—we’ll personalize your impact!</p></div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    feather.replace();
    document.getElementById('faqToggleTiers')?.addEventListener('click', (e) => {
      const btn = e.currentTarget;
      const body = document.getElementById('faqBodyTiers');
      const open = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!open));
      btn.textContent = (open ? '▶' : '▼') + ' Frequently Asked Questions';
      body.classList.toggle('hidden', open);
    });

    document.querySelectorAll('.tier-cta').forEach((btn) => {
      btn.addEventListener('click', () => {
        const amt = btn.dataset.amount;
        const dlg = document.getElementById('donateDialog');
        if (dlg) {
          dlg.querySelector('input[name="amount"]').value = amt;
          dlg.showModal();
        }
      });
    });
  });
</script>

<style>
  .perspective { perspective: 1000px; }
  .preserve-3d { transform-style: preserve-3d; }
  .rotate-y-180 { transform: rotateY(180deg); }
  .card-face { backface-visibility: hidden; }
  .card-front { position: relative; }
  .card-back { transform: rotateY(180deg); }
  .backface-hidden { backface-visibility: hidden; }
</style>

<section
  id="challenge"
  class="relative overflow-hidden py-16 px-6 bg-gradient-to-br from-zinc-900 via-black to-zinc-950 border-l-4 border-red-400/80"
  aria-labelledby="challenge-heading"
  tabindex="-1"
>
  <!-- 1. Parallax background image -->
  <div
    class="absolute inset-0 -z-10 bg-[url('/static/images/gym-chutes.jpg')] bg-center bg-cover motion-safe:animate-kenburns"
    style="background-attachment: fixed"
    aria-hidden="true"
  ></div>

  <h2
    id="challenge-heading"
    class="text-2xl md:text-3xl font-bold text-red-400 mb-6 drop-shadow-lg"
    data-aos="fade-up"
    data-aos-delay="100"
  >
    The Challenge We Face
  </h2>

  <p
    class="text-lg text-white/80 max-w-3xl mx-auto mb-8 leading-relaxed"
    data-aos="fade-up"
    data-aos-delay="200"
  >
    Despite the love and energy behind our program, we struggle with consistent access to gym space
    and the high cost of tournament travel across states. These financial barriers place a heavy
    strain on our volunteer coaches and passionate parents — limiting the full potential of our kids
    to grow, bond, and succeed together.
  </p>

  <!-- 2. Impact metrics badges -->
  <div
    class="flex flex-wrap justify-center gap-6 mb-8"
    data-aos="fade-up"
    data-aos-delay="300"
    role="list"
  >
    <div
      class="flex flex-col items-center bg-zinc-800/70 px-6 py-4 rounded-xl shadow-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-red-400"
      tabindex="0"
      role="listitem"
      aria-label="120 plus hours of gym time lost"
    >
      <span class="text-3xl font-extrabold text-red-400" data-count="120">0</span>
      <span class="text-white/80 text-sm">Hours of Gym Time Lost</span>
    </div>
    <div
      class="flex flex-col items-center bg-zinc-800/70 px-6 py-4 rounded-xl shadow-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-red-400"
      tabindex="0"
      role="listitem"
      aria-label="800 tournament miles traveled"
    >
      <span class="text-3xl font-extrabold text-red-400" data-count="800">0</span>
      <span class="text-white/80 text-sm">Tournament Miles Traveled</span>
    </div>
  </div>

  <!-- 3. Animated progress bar -->
  <div
    class="max-w-2xl mx-auto mb-8"
    data-aos="fade-up"
    data-aos-delay="400"
    role="region"
    aria-labelledby="gym-rental-label"
  >
    <div id="gym-rental-label" class="text-sm text-white/70 mb-1 flex justify-between">
      <span>Gym Rental Funding</span>
      <span><strong id="gym-funded" aria-live="polite">45%</strong> funded</span>
    </div>
    <div
      class="w-full h-2 bg-zinc-800 rounded-full overflow-hidden"
      role="progressbar"
      aria-valuemin="0"
      aria-valuemax="100"
      aria-valuenow="45"
      aria-label="Gym Rental Funding progress bar"
    >
      <div
        id="gym-progress-bar-fill"
        class="h-full bg-red-400 transition-all duration-1000 ease-out"
        style="width: 0%"
      ></div>
    </div>
  </div>

  <!-- 4. Sponsor CTA -->
  <div class="text-center mb-12" data-aos="fade-up" data-aos-delay="500">
    <a
      href="mailto:arodgps@gmail.com?subject=Gym%20Space%20Sponsorship"
      class="inline-block bg-red-400 hover:bg-red-300 text-black font-bold px-8 py-3 rounded-full shadow-lg transition-transform hover:scale-105 focus-visible:ring-4 focus-visible:ring-red-300 focus:outline-none"
    >
      Sponsor a Practice
    </a>
  </div>

  <!-- 5. Parent testimonial pop-over -->
  <div
    class="relative max-w-3xl mx-auto"
    data-aos="fade-up"
    data-aos-delay="600"
  >
    <p class="text-xs text-white/60 italic">
      “Without enough court time, my son lost valuable training hours this season.”
    </p>
    <button
      type="button"
      class="absolute top-0 right-0 p-2 text-white/70 hover:text-white transition focus:outline-none focus:ring-2 focus:ring-red-400 rounded"
      aria-describedby="testimonial-pop"
      aria-expanded="false"
      aria-controls="testimonial-pop"
      id="testimonial-toggle"
      onmouseenter="showTestimonial(true)"
      onmouseleave="showTestimonial(false)"
      onfocus="showTestimonial(true)"
      onblur="showTestimonial(false)"
    >
      ℹ️
    </button>
    <div
      id="testimonial-pop"
      class="hidden absolute right-0 mt-10 w-64 p-4 bg-zinc-900/90 text-white text-sm rounded-lg shadow-lg"
      role="tooltip"
      aria-live="polite"
    >
      <strong>Team Parent, Class of 2030</strong><br />
      “We missed 8 practices this year due to no gym—every donation helps keep us on court!”
    </div>
  </div>
</section>

<script>
  // Animate count-up for badges
  document.addEventListener('DOMContentLoaded', () => {
    const counters = document.querySelectorAll('[data-count]');
    counters.forEach((el) => {
      const target = +el.getAttribute('data-count');
      let count = 0;
      const step = Math.max(1, Math.floor(target / 50));
      const interval = setInterval(() => {
        count += step;
        if (count >= target) {
          el.textContent = target;
          clearInterval(interval);
        } else {
          el.textContent = count;
        }
      }, 30);
    });

    // Animate progress bar fill
    const progressBarFill = document.getElementById('gym-progress-bar-fill');
    if (progressBarFill) {
      setTimeout(() => {
        progressBarFill.style.width = '45%';
      }, 500); // Delay to sync with AOS animation
    }
  });

  function showTestimonial(show) {
    const pop = document.getElementById('testimonial-pop');
    const toggle = document.getElementById('testimonial-toggle');
    if (show) {
      pop.classList.remove('hidden');
      toggle.setAttribute('aria-expanded', 'true');
    } else {
      pop.classList.add('hidden');
      toggle.setAttribute('aria-expanded', 'false');
    }
  }
</script>

{# templates/partials/sponsor_wall.html #}
<section
  id="sponsor-wall"
  role="region"
  aria-labelledby="sponsor-heading"
  class="bg-zinc-950/95 py-12 border-t border-zinc-800 text-center text-white"
  data-aos="fade-up"
  data-aos-delay="300"
>
  <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 space-y-8">

    <!-- Funding HUD -->
    <div id="funding-hud" class="w-full max-w-xl mx-auto">
      <div class="flex justify-between text-sm font-mono text-amber-200 mb-1">
        <span>Raised</span>
        <span>
          <span id="funding-raised-amount" aria-live="polite">${{ funding_raised or 0 }}</span> /
          <span id="funding-goal-amount">${{ funding_goal or 10000 }}</span>
        </span>
      </div>
      <div class="relative w-full h-4 rounded-full bg-zinc-800 overflow-hidden">
        <div 
          id="funding-progress-bar"
          class="absolute inset-y-0 left-0 bg-amber-400 shadow-gold transition-all duration-700"
          data-raised="{{ funding_raised or 0 }}"
          data-goal="{{ funding_goal or 10000 }}"
          role="progressbar"
          aria-valuemin="0"
          aria-valuemax="{{ funding_goal or 10000 }}"
          aria-valuenow="{{ funding_raised or 0 }}"
          style="width: {{ ((funding_raised or 0) / (funding_goal or 10000) * 100) | round(1) }}%;"
        ></div>
      </div>
    </div>

    <!-- Sponsor Section Header -->
    <header class="space-y-2">
      <h2
        id="sponsor-heading"
        class="text-2xl sm:text-3xl font-extrabold text-amber-400 tracking-tight"
      >
        Our Generous Sponsors
      </h2>
      <p class="text-sm sm:text-base text-amber-200">
        Every logo below represents a family or company that keeps our kids on the court—thank you!
      </p>
      <p id="sponsor-count" class="text-xs text-white/70 italic" aria-live="polite">
        {{ sponsors|length }} Sponsor{{ sponsors|length != 1 and 's' or '' }} and counting!
      </p>
    </header>

    {% if sponsors %}
    <div class="relative overflow-x-auto vendor-marquee">
      <ul class="inline-flex items-center gap-8 whitespace-nowrap py-4" aria-label="Sponsor logos">
        {% for sponsor in sponsors %}
        <li class="relative shrink-0">
          <a
            href="{{ sponsor.website or '#' }}"
            target="_blank"
            rel="noopener noreferrer"
            class="group inline-block"
            aria-label="Visit {{ sponsor.name }}"
          >
            <img
              src="{{ sponsor.logo_url }}"
              alt="{{ sponsor.name }} logo"
              class="h-16 sm:h-20 grayscale group-hover:grayscale-0 transition duration-300"
              loading="lazy"
              width="160"
              height="80"
            />
            {% if sponsor.tier == 'Platinum' %}
            <span class="absolute top-0 right-0 bg-amber-400 text-black text-xs font-bold px-1 rounded-bl">PLATINUM</span>
            {% endif %}
          </a>
        </li>
        {% endfor %}
      </ul>
    </div>
    {% else %}
    <ul class="grid grid-cols-3 sm:grid-cols-5 gap-6">
      {% for _ in range(5) %}
      <li class="h-16 sm:h-20 bg-zinc-800 animate-pulse rounded-lg"></li>
      {% endfor %}
    </ul>
    <p class="text-sm text-gray-400 mb-4">
      Your logo could be here—become a founding sponsor today!
    </p>
    {% endif %}

    <div>
      <a
        href="#donateModal"
        hx-get="/modal/sponsor"
        class="inline-flex items-center gap-2 rounded-lg bg-amber-400/90 px-6 py-2 text-sm font-semibold text-zinc-900 shadow-md hover:bg-amber-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 transition"
        aria-label="Become a Sponsor"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-4 w-4"
          fill="currentColor"
          viewBox="0 0 16 16"
          aria-hidden="true"
        >
          <path d="M8 0a8 8 0 100 16A8 8 0 008 0zM4 7.5h8v1H4v-1z" />
        </svg>
        Become a Sponsor
      </a>
    </div>
  </div>
</section>

<style>
  @keyframes m-arquee {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(calc(-1 * (100% - 100vw)));
    }
  }
  .vendor-marquee ul {
    animation: m-arquee 30s linear infinite;
  }
  .vendor-marquee:hover ul {
    animation-play-state: paused;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const marquee = document.querySelector('.vendor-marquee ul');
    if (!marquee) return;
    const totalW = marquee.scrollWidth;
    const viewport = document.documentElement.clientWidth;
    const duration = Math.max(20, (totalW / viewport) * 30);
    marquee.style.animationDuration = duration + 's';
  });
</script>

<div
  id="newsletterPopup"
  class="fixed inset-0 z-[9999] flex items-center justify-center bg-black bg-opacity-80 opacity-0 pointer-events-none transition-opacity duration-300"
  role="dialog"
  aria-modal="true"
  aria-labelledby="newsletterTitle"
  aria-describedby="newsletterDesc"
>
  <div
    class="bg-zinc-900 text-white rounded-lg shadow-xl max-w-sm w-full p-6 relative"
    role="document"
  >
    <button
      id="newsletterCloseBtn"
      aria-label="Close newsletter popup"
      class="absolute top-3 right-3 text-amber-400 hover:text-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-400 rounded"
      type="button"
    >
      &times;
    </button>
    <h2 id="newsletterTitle" class="text-2xl font-bold mb-2">Join Our Newsletter</h2>
    <p id="newsletterDesc" class="mb-4 text-white/80">
      Stay updated on our latest news and events.
    </p>
    <form id="newsletterForm" class="space-y-4" novalidate>
      <input
        type="email"
        aria-label="Email address"
        name="email"
        required
        placeholder="Your email"
        class="w-full rounded px-3 py-2 bg-zinc-800 text-white focus:outline-none focus:ring-2 focus:ring-amber-400"
      />
      <button
        type="submit"
        class="w-full bg-amber-400 text-black font-semibold rounded py-2 hover:bg-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-400 transition"
      >
        Subscribe
      </button>
    </form>
  </div>
</div>

<style>
  /* Visible popup */
  #newsletterPopup.show {
    opacity: 1 !important;
    pointer-events: auto !important;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const popup = document.getElementById("newsletterPopup");
    const closeBtn = document.getElementById("newsletterCloseBtn");
    const form = document.getElementById("newsletterForm");

    // Show popup after 5 seconds with fade-in
    setTimeout(() => {
      popup.classList.add("show");
      // Focus first input for accessibility
      form.email.focus();
    }, 5000);

    // Close popup handler
    closeBtn.addEventListener("click", () => {
      popup.classList.remove("show");
    });

    // Close on click outside content
    popup.addEventListener("click", (e) => {
      if (e.target === popup) {
        popup.classList.remove("show");
      }
    });

    // Trap focus inside popup for accessibility
    popup.addEventListener("keydown", (e) => {
      if (e.key === "Tab") {
        const focusableElements = popup.querySelectorAll(
          'a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])'
        );
        const firstElem = focusableElements[0];
        const lastElem = focusableElements[focusableElements.length - 1];
        if (e.shiftKey) {
          if (document.activeElement === firstElem) {
            lastElem.focus();
            e.preventDefault();
          }
        } else {
          if (document.activeElement === lastElem) {
            firstElem.focus();
            e.preventDefault();
          }
        }
      } else if (e.key === "Escape") {
        popup.classList.remove("show");
      }
    });

    // Handle form submission (stub)
    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const email = form.email.value.trim();
      if (email) {
        alert(`Thanks for subscribing, ${email}!`);
        form.reset();
        popup.classList.remove("show");
      } else {
        alert("Please enter a valid email address.");
      }
    });
  });
</script>

<body id="bodyRoot" class="bg-zinc-950 text-white font-sans antialiased fade-in dark:bg-black" aria-live="polite">
  <!-- 🔗 Accessible Skip Link -->
  <a
    href="#main-content"
    class="sr-only focus:not-sr-only fixed top-4 left-4 z-[9999] bg-amber-400 text-black font-bold px-4 py-2 rounded shadow-lg focus:outline-none focus-visible:ring-2 ring-black transition"
  >
    ⤵ Skip to Content
  </a>

  <!-- ─── Header ────────────────────────────── -->
  <header
    role="banner"
    class="sticky top-0 z-50 w-full bg-black/95 backdrop-blur-sm border-b border-amber-500/20 shadow-xl transition-all duration-300 ease-in-out"
  >
    <div class="max-w-7xl mx-auto flex items-center justify-between px-4 py-4 md:px-8">
      <!-- 🔰 Logo + Brand -->
      <a
        href="{{ url_for('main.index') }}"
        class="flex items-center gap-3 group focus:outline-none focus-visible:ring-2 ring-amber-400"
      >
        <img
          src="{{ url_for('static', filename='logo-atx-elite.png') }}"
          class="w-12 h-12 rounded-full shadow-md ring-2 ring-amber-400 group-hover:scale-105 transition-transform duration-200"
          loading="lazy"
          decoding="async"
          alt="Connect ATX Elite Logo"
        />
        <span
          class="text-2xl font-extrabold tracking-tight text-amber-400 drop-shadow-[0_2px_4px_rgba(250,204,21,0.25)] select-none"
          aria-label="Connect ATX Elite"
        >
          Connect ATX Elite
        </span>
      </a>

      <!-- 🧭 Desktop Nav -->
      <nav aria-label="Primary navigation" class="hidden md:flex items-center gap-8 text-lg font-medium">
        {% for link in ['about', 'tiers', 'testimonials', 'faq', 'contact'] %}
          <a
            href="#{{ link }}"
            class="text-white hover:text-amber-400 focus:text-amber-400 transition-colors duration-150"
          >
            {{ link.capitalize() }}
          </a>
        {% endfor %}
      </nav>

      <!-- 🟨 Sponsor CTA (Desktop) -->
      <div class="hidden md:block">
        <a
          href="#tiers"
          class="px-6 py-2 rounded-full bg-amber-400 text-black font-bold shadow-lg hover:bg-amber-300 focus-visible:ring-4 ring-amber-400 transition animate-glow"
        >
          Become a Sponsor
        </a>
      </div>

      <!-- 🌙 Dark Mode Toggle Button -->
      <button
        id="themeToggle"
        type="button"
        class="ml-4 rounded-full p-2 bg-zinc-800/80 backdrop-blur hover:bg-zinc-700 text-amber-400 shadow-lg focus-visible:ring-4 focus-visible:ring-amber-200 transition"
        aria-label="Toggle dark mode"
        title="Toggle light/dark mode"
      >
        🌙
      </button>

      <!-- 📱 Mobile Menu Button -->
      <button
        id="mobileMenuButton"
        type="button"
        class="md:hidden flex items-center text-amber-400 focus:outline-none focus-visible:ring-2 ring-amber-400 ml-2"
        aria-label="Open mobile navigation menu"
        aria-controls="mobile-menu"
        aria-expanded="false"
      >
        <svg class="w-8 h-8" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 8h16M4 16h16" />
        </svg>
      </button>
    </div>

    <!-- 📱 Mobile Menu -->
    <nav
      id="mobile-menu"
      class="md:hidden hidden px-4 pb-4 bg-black/95 border-t border-amber-500/20 animate-fade-in-down"
      aria-label="Mobile navigation"
      tabindex="-1"
    >
      {% for link in ['about', 'tiers', 'testimonials', 'faq', 'contact'] %}
        <a
          href="#{{ link }}"
          class="block py-2 text-lg text-white hover:text-amber-400 focus:text-amber-400 transition"
        >
          {{ link.capitalize() }}
        </a>
      {% endfor %}
      <a
        href="#tiers"
        class="block mt-4 py-2 px-6 text-center rounded-full bg-amber-400 text-black font-bold shadow-md hover:bg-amber-300 focus-visible:ring-2 ring-amber-400 transition"
      >
        Become a Sponsor
      </a>
    </nav>
  </header>

  <!-- ─── Scripts ───────────────────────────── -->
  <script>
    // Dark mode toggle logic
    (() => {
      const root = document.documentElement;
      const btn = document.getElementById('themeToggle');
      const stored = localStorage.getItem('theme');

      // Initialize button icon & theme on page load
      if (stored === 'dark' || (!stored && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        root.classList.add('dark');
        btn.textContent = '☀️';
      } else {
        btn.textContent = '🌙';
      }

      // Toggle theme on button click
      btn.addEventListener('click', () => {
        root.classList.toggle('dark');
        const isDark = root.classList.contains('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        btn.textContent = isDark ? '☀️' : '🌙';
      });
    })();

    // Mobile menu toggle logic
    (() => {
      const mobileBtn = document.getElementById('mobileMenuButton');
      const mobileMenu = document.getElementById('mobile-menu');

      mobileBtn.addEventListener('click', () => {
        const expanded = mobileBtn.getAttribute('aria-expanded') === 'true';
        mobileBtn.setAttribute('aria-expanded', String(!expanded));
        mobileMenu.classList.toggle('hidden');
        if (!expanded) {
          mobileMenu.focus();
        }
      });
    })();
  </script>

{# templates/partials/back_to_top_ball.html #}
<button
  id="back-to-top-ball"
  type="button"
  aria-label="Back to top"
  class="fixed bottom-6 right-6 w-14 h-14 z-[60] rounded-full bg-amber-400/90 backdrop-blur-sm shadow-xl opacity-0 pointer-events-none scale-95 translate-y-6 transition-all duration-300 ease-out hover:scale-110 hover:shadow-2xl focus:outline-none focus-visible:ring-4 focus-visible:ring-amber-300"
>
  <img
    src="{{ url_for('static', filename='images/ball.png') }}"
    alt=""
    aria-hidden="true"
    class="w-9 h-9 mx-auto pointer-events-none select-none"
    loading="lazy"
  />
  <span class="sr-only">Back to top</span>
</button>

<section
  id="faq"
  class="bg-black py-12 text-white"
  aria-labelledby="faq-heading"
  data-aos="fade-up"
  data-aos-delay="100"
>
  <div class="max-w-2xl mx-auto px-4">
    <h2 id="faq-heading" class="text-2xl font-bold text-amber-400 mb-6 text-center">
      Frequently Asked Questions
    </h2>

    <!-- 1. Search filter -->
    <div class="mb-6">
      <label for="faq-search" class="sr-only">Search FAQs</label>
      <input
        id="faq-search"
        type="search"
        placeholder="Search questions…"
        aria-label="Search FAQs"
        class="w-full bg-zinc-800 rounded-full px-4 py-2 placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-amber-400"
      />
    </div>

    <ul class="divide-y divide-zinc-700" id="faq-list">
      {% set faqs = [
        {"q":"Can I sponsor anonymously?","a":"Absolutely — just let us know in your message or donation form."},
        {"q":"How are donations used?","a":"100% supports gym rental, tournament fees, travel costs, academic programs, and gear for our student-athletes."},
        {"q":"How do I become a sponsor?","a":"Use the “Become a Sponsor” button or email us — we’ll reach out to personalize your sponsorship!"}
      ] %}
      {% for faq in faqs %}
      <li class="py-4">
        <button
          type="button"
          class="faq-toggle flex w-full justify-between items-center text-left font-medium focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-400"
          aria-expanded="false"
          aria-controls="panel-{{ loop.index }}"
          id="panel-{{ loop.index }}-label"
          data-target="panel-{{ loop.index }}"
        >
          <span>{{ faq.q }}</span>
          <svg
            class="w-5 h-5 transform transition-transform"
            aria-hidden="true"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"
            />
          </svg>
        </button>
        <div
          id="panel-{{ loop.index }}"
          class="mt-2 pr-8 text-zinc-300 hidden"
          role="region"
          aria-labelledby="panel-{{ loop.index }}-label"
        >
          <p>{{ faq.a }}</p>
        </div>
      </li>
      {% endfor %}
    </ul>

    <!-- 5. Quick-help chat -->
    <div class="mt-8 text-center">
      <a
        href="https://wa.me/15128200475?text=Hi%20Connect%20ATX%20Elite!"
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center gap-2 bg-green-500 hover:bg-green-600 text-white font-semibold px-5 py-3 rounded-full shadow-md transition"
        aria-label="Chat with us on WhatsApp"
      >
        💬 Live Chat Help
      </a>
    </div>
  </div>
</section>

<script>
  // Accordion toggle behavior with aria updates
  document.querySelectorAll('.faq-toggle').forEach((btn) => {
    btn.addEventListener('click', () => {
      const expanded = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!expanded));
      btn.querySelector('svg').classList.toggle('rotate-180', !expanded);
      const panel = document.getElementById(btn.dataset.target);
      if (expanded) {
        panel.classList.add('hidden');
        panel.setAttribute('hidden', '');
      } else {
        panel.classList.remove('hidden');
        panel.removeAttribute('hidden');
      }
    });
  });

  // Live search filter for FAQ questions
  document.getElementById('faq-search').addEventListener('input', (e) => {
    const term = e.target.value.toLowerCase();
    document.querySelectorAll('#faq-list li').forEach((li) => {
      const question = li.querySelector('.faq-toggle span').textContent.toLowerCase();
      li.style.display = question.includes(term) ? '' : 'none';
    });
  });
</script>

{# templates/partials/donation_modal.html — Enhanced Donation Modal #}
<dialog
  id="donateDialog"
  aria-modal="true"
  aria-labelledby="donateDialogTitle"
  class="w-full max-w-md p-0 rounded-2xl overflow-hidden shadow-xl backdrop:bg-black/60 z-[45]"
>
  <form id="donateForm" method="dialog" class="bg-zinc-900 text-white">
    <header class="flex justify-between items-center px-6 py-4 bg-amber-400 text-black">
      <h3 id="donateDialogTitle" class="text-lg font-bold">Support the Team 🏀</h3>
      <button
        type="button"
        class="text-2xl leading-none focus:outline-none focus:ring-2 focus:ring-amber-500 rounded"
        aria-label="Close"
        tabindex="0"
      >
        &times;
      </button>
    </header>
    <div class="px-6 py-4 space-y-4">
      <p class="text-sm text-white/75">100% of proceeds cover gym time & travel.</p>

      <label class="block">
        <span class="text-sm">Your Email (receipt)</span>
        <input
          name="email"
          type="email"
          required
          class="mt-1 w-full px-3 py-2 bg-zinc-800 rounded focus:ring-2 focus:ring-amber-400"
          autocomplete="email"
        />
      </label>

      <label class="block">
        <span class="text-sm">Amount (USD)</span>
        <input
          name="amount"
          type="number"
          min="1"
          max="999"
          value="25"
          required
          class="mt-1 w-full px-3 py-2 bg-zinc-800 rounded focus:ring-2 focus:ring-amber-400"
          autocomplete="off"
          inputmode="numeric"
        />
      </label>

      <button
        id="stripeBtn"
        type="submit"
        class="w-full inline-block text-center bg-amber-400 text-black font-semibold py-2 rounded-lg shadow transition hover:bg-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-500"
        data-stripe
      >
        Donate with Card
      </button>

      <hr class="border-zinc-700" />

      <a
        href="{{ paypal_link or '#' }}"
        class="w-full block text-center bg-blue-600 text-white font-semibold py-2 rounded-lg shadow transition hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-400"
        target="_blank"
        rel="noopener noreferrer"
      >
        Donate with PayPal
      </a>
    </div>
  </form>
</dialog>

<style>
  /* Dialog z-index layering */
  #donateDialog {
    z-index: 100000 !important;
  }
  /* Native dialog backdrop styling */
  #donateDialog::backdrop {
    background: rgba(0, 0, 0, 0.55);
    z-index: 44 !important;
  }
  /* Responsive full width on small screens */
  @media (max-width: 500px) {
    #donateDialog {
      max-width: 98vw;
      border-radius: 1rem;
    }
  }
</style>

<script defer type="module">
  import confetti from 'https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/+esm';
  import { loadStripe } from 'https://js.stripe.com/v3/';

  (async () => {
    const stripe = await loadStripe('{{ stripe_publishable }}');
    const dialog = document.getElementById('donateDialog');
    const form = document.getElementById('donateForm');

    // Open dialog on any element with [data-open-donate] attribute
    document.querySelectorAll('[data-open-donate]').forEach(btn => {
      btn.addEventListener('click', () => {
        const amount = btn.dataset.amount || '25';
        dialog.querySelector('input[name=amount]').value = amount;
        dialog.showModal();
        confetti({ particleCount: 80, spread: 60, origin: { y: 0.6 } });
      });
    });

    // Close dialog on close button click
    dialog.querySelector('button[aria-label="Close"]').onclick = () => dialog.close();

    // Close dialog on outside click
    dialog.addEventListener('click', e => {
      if (e.target === dialog) dialog.close();
    });

    // Prevent dialog from closing on ESC (optional, can be removed if you want ESC to close)
    dialog.addEventListener('cancel', e => e.preventDefault());

    // Handle form submission and trigger Stripe Checkout
    form.addEventListener('submit', async e => {
      e.preventDefault();
      const email = form.email.value;
      const amount = parseInt(form.amount.value, 10);
      if (!amount || amount < 1 || amount > 999) {
        alert('Please enter a valid donation amount between $1 and $999.');
        return;
      }
      const res = await fetch('/api/create-checkout', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ amount, email }),
      });
      const { session_id } = await res.json();
      await stripe.redirectToCheckout({ sessionId: session_id });
    });

    // Trap focus within dialog for accessibility
    dialog.addEventListener('keydown', e => {
      if (e.key === 'Tab') {
        const focusable = Array.from(dialog.querySelectorAll('input, button, a'));
        const idx = focusable.indexOf(document.activeElement);
        let next = idx + (e.shiftKey ? -1 : 1);
        if (next < 0) next = focusable.length - 1;
        if (next >= focusable.length) next = 0;
        focusable[next].focus();
        e.preventDefault();
      }
    });
  })();
</script>

<section
  id="about"
  class="py-24 px-6 bg-zinc-950 text-white space-y-20"
  role="region"
  aria-labelledby="about-heading"
  tabindex="-1"
>
  <!-- 🎯 Our Mission -->
  <div class="max-w-5xl mx-auto space-y-6" data-aos="fade-up" data-aos-delay="100">
    <h2 id="about-heading" class="text-3xl sm:text-4xl font-bold text-amber-400">
      Our Mission
    </h2>
    <p class="text-lg sm:text-xl leading-relaxed text-white/90">
      Connect ATX Elite is a community‑powered, non‑profit <strong>12U AAU</strong> basketball program based
      in Austin, TX. We develop not only skilled athletes, but confident, disciplined, and
      academically driven young leaders.
    </p>
    <p class="text-lg sm:text-xl leading-relaxed text-white/70">
      Many of our boys are honor‑roll students thriving in a positive environment of teamwork,
      mentorship, and integrity. Through basketball we teach life lessons that extend far beyond the
      court.
    </p>
  </div>

  <!-- ⭐️ Impact Stats -->
  <div
    class="max-w-5xl mx-auto"
    data-aos="fade-up"
    data-aos-delay="300"
    aria-label="Program Impact Stats"
    role="list"
  >
    <div class="flex flex-wrap justify-center gap-8 md:gap-14 py-8">
      {% set impact = [
        {"label": "Players Enrolled", "value": 16},
        {"label": "Honor Roll Scholars", "value": 11},
        {"label": "Tournaments Played", "value": 12},
        {"label": "Years Running", "value": 3}
      ] %}
      {% for stat in impact %}
      <div
        class="bg-zinc-900/80 border border-amber-400/20 shadow-gold rounded-xl px-8 py-6 min-w-[150px] text-center focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-400"
        tabindex="0"
        role="listitem"
        aria-label="{{ stat.value }} {{ stat.label }}"
      >
        <div
          class="text-3xl font-extrabold text-amber-400"
          data-count="{{ stat.value }}"
          id="countup-{{ loop.index0 }}"
          >0</div>
        <div class="text-white/80 text-base font-medium">{{ stat.label }}</div>
      </div>
      {% endfor %}
    </div>
  </div>

  <!-- 🟧 Divider -->
  <div
    class="w-16 h-1 mx-auto rounded-full bg-gradient-to-r from-amber-400/60 to-amber-300/60"
    data-aos="fade-up"
    data-aos-delay="450"
    aria-hidden="true"
  ></div>

  <!-- ⚠️ Challenge with Tooltip Enhancement -->
  <div class="max-w-5xl mx-auto" data-aos="fade-up" data-aos-delay="550">
    <div
      class="group relative rounded-2xl shadow-lg bg-gradient-to-br from-zinc-900 via-black to-zinc-950 border-l-4 border-red-400/80 px-7 py-8 space-y-6 cursor-help focus:outline-none focus-visible:ring-2 focus-visible:ring-red-400"
      role="region"
      aria-labelledby="challenge-heading"
      tabindex="0"
      aria-describedby="challenge-tooltip"
    >
      <h3 id="challenge-heading" class="text-2xl sm:text-3xl font-semibold text-red-400">
        The Challenge We Face
      </h3>
      <p class="text-lg sm:text-xl leading-relaxed text-white/80">
        We struggle with consistent gym space and the high cost of tournament travel. These barriers
        strain our volunteer coaches and parents — limiting our kids’ ability to grow, bond, and
        succeed together.
      </p>

      <!-- Tooltip -->
      <div
        id="challenge-tooltip"
        role="tooltip"
        class="absolute left-1/2 bottom-full mb-3 w-72 rounded-md bg-black/90 px-4 py-3 text-sm text-amber-200 shadow-lg opacity-0 pointer-events-none transition-opacity duration-300 group-hover:opacity-100 group-focus:opacity-100 -translate-x-1/2"
      >
        Help us secure resources to expand gym access, reduce travel costs, and invest in our coaches.
      </div>
    </div>
  </div>

  <!-- 💡 Impact supporters can make -->
  <div class="max-w-5xl mx-auto space-y-6" data-aos="fade-up" data-aos-delay="700">
    <h3 class="text-2xl sm:text-3xl font-semibold text-green-400">The Impact You Can Make</h3>
    <ul class="list-disc list-inside space-y-2 text-lg sm:text-xl text-white/85 pl-4 md:pl-8" role="list">
      <li>Secure a consistent gym space for practices</li>
      <li>Support travel & lodging costs for tournaments</li>
      <li>Provide uniforms, gear, meals, and hydration</li>
      <li>Fund academic support and mentorship programs</li>
    </ul>
    <p class="pt-4 text-lg sm:text-xl font-semibold text-white">
      With your help, we can give these young athletes the foundation to become confident,
      accomplished leaders.
    </p>
  </div>

  <!-- ✨ Call to Action Button -->
  <div class="max-w-5xl mx-auto text-center" data-aos="fade-up" data-aos-delay="850">
    <a
      href="#tiers"
      class="inline-block bg-amber-400 hover:bg-amber-300 text-black font-extrabold px-12 py-4 rounded-3xl shadow-[0_0_25px_#facc15] focus-visible:ring-4 ring-amber-300 transition-transform transform-gpu hover:scale-105 animate-pulse-slow"
      aria-label="Become a Sponsor"
    >
      Become a Sponsor & Support Our Mission
    </a>
  </div>
</section>

<script>
  // Animated count-up for stats
  document.addEventListener('DOMContentLoaded', () => {
    const counters = document.querySelectorAll('[data-count]');
    counters.forEach((el) => {
      const target = +el.getAttribute('data-count');
      let count = 0;
      const step = Math.max(1, Math.floor(target / 50));
      const interval = setInterval(() => {
        count += step;
        if (count >= target) {
          el.textContent = target;
          clearInterval(interval);
        } else {
          el.textContent = count;
        }
      }, 30);
    });
  });
</script>

<section
  id="goal"
  class="relative isolate overflow-hidden rounded-3xl bg-luxe-night/90 p-6 text-center text-white shadow-2xl"
  data-aos="fade-up"
  data-aos-delay="300"
>
  <!-- 1. Radial gauge background -->
  <svg class="absolute inset-0 w-full h-full -z-10" viewBox="0 0 200 200" aria-hidden="true" focusable="false">
    <defs>
      <linearGradient id="gauge-gradient" x1="1" y1="0" x2="0" y2="1">
        <stop offset="0%" stop-color="#facc15" />
        <stop offset="100%" stop-color="#4ade80" />
      </linearGradient>
    </defs>
    <circle cx="100" cy="100" r="90" stroke="rgba(255,255,255,0.05)" stroke-width="20" fill="none" />
    <circle
      id="gauge-arc"
      cx="100"
      cy="100"
      r="90"
      stroke="url(#gauge-gradient)"
      stroke-width="20"
      stroke-dasharray="565.48"
      stroke-dashoffset="565.48"
      fill="none"
      transform="rotate(-90 100 100)"
    />
  </svg>

  <h2 class="text-xl font-bold mb-2">Season Goal</h2>

  <!-- 2. Dynamic percentage label -->
  <p class="text-3xl font-mono" id="goal-amount" aria-live="polite" aria-atomic="true">$7,900 / $10,000</p>

  <!-- 3. Animated progress bar -->
  <progress
    id="goal-bar"
    value="0"
    max="10000"
    class="w-full h-4 mt-4 rounded-full bg-zinc-800"
    aria-valuemin="0"
    aria-valuemax="10000"
    aria-valuenow="0"
    role="progressbar"
    aria-label="Progress towards season goal"
  ></progress>

  <!-- 4. Live donor ticker -->
  <div
    id="donor-ticker"
    class="mt-4 text-sm italic text-white/70 overflow-hidden whitespace-nowrap"
    style="mask-image: linear-gradient(to right, transparent, white 20%, white 80%, transparent)"
    aria-label="Latest donors ticker"
  >
    🚨 Latest donors: Alex M., Jamie R., Taylor S., Morgan L., …
  </div>
</section>

<script>
(() => {
  const totalGoal = 10000;
  let current = 7900; // initial funding amount

  // Animate numeric count in label
  function animateValue(el, start, end, duration) {
    const range = end - start;
    let startTime = null;
    function step(timestamp) {
      if (!startTime) startTime = timestamp;
      const progress = Math.min((timestamp - startTime) / duration, 1);
      el.textContent = `$${Math.floor(start + progress * range).toLocaleString()} / $${totalGoal.toLocaleString()}`;
      if (progress < 1) {
        requestAnimationFrame(step);
      }
    }
    requestAnimationFrame(step);
  }

  // Elements
  const section = document.getElementById('goal');
  const gaugeArc = document.getElementById('gauge-arc');
  const progressBar = document.getElementById('goal-bar');
  const label = document.getElementById('goal-amount');

  // IntersectionObserver to animate when in viewport
  const observer = new IntersectionObserver((entries, obs) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        // Animate radial gauge arc stroke
        const dashOffset = 565.48 * (1 - current / totalGoal);
        gaugeArc.style.transition = 'stroke-dashoffset 1.5s ease-out';
        gaugeArc.style.strokeDashoffset = dashOffset;

        // Animate progress bar
        progressBar.max = totalGoal;
        progressBar.value = 0;
        progressBar.style.transition = 'value 1.5s ease-out';
        setTimeout(() => (progressBar.value = current), 50);

        // Animate numeric label count up
        animateValue(label, 0, current, 1500);

        // Confetti celebration milestones
        [0.5, 0.75, 1].forEach(ratio => {
          if (current / totalGoal >= ratio) {
            import('https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/+esm').then(({ default: confetti }) => {
              confetti({
                particleCount: 50,
                spread: 40,
                origin: { y: 0.6 },
                colors: ['#facc15', '#4ade80', '#0a0a0a']
              });
            });
          }
        });

        obs.disconnect(); // animate only once
      }
    });
  }, { threshold: 0.4 });
  observer.observe(section);

  // Optional: Socket.IO live update listener for donations
  if (window.io) {
    const socket = window.io();
    socket.on('donation_update', ({ total }) => {
      current = total;
      progressBar.value = total;
      label.textContent = `$${total.toLocaleString()} / $${totalGoal.toLocaleString()}`;
      gaugeArc.style.strokeDashoffset = 565.48 * (1 - total / totalGoal);
    });
  }

  // Donor ticker scroll effect
  const ticker = document.getElementById('donor-ticker');
  let offset = 0;
  setInterval(() => {
    offset = (offset + 1) % ticker.scrollWidth;
    ticker.scrollLeft = offset;
  }, 50);
})();
</script>

{# templates/partials/testimonials.html #}
<section
  id="testimonials"
  class="relative isolate bg-gradient-to-br from-zinc-800 to-black py-24 px-6 text-white"
  role="region"
  aria-labelledby="testimonials-heading"
  tabindex="-1"
>
  <div class="max-w-5xl mx-auto text-center space-y-12">
    {# ⭐️ Social-proof badge #}
    <div
      class="flex justify-center items-center gap-1 text-2xl text-amber-400 animate-sparkle select-none"
      aria-hidden="true"
    >
      {% for _ in range(5) %}<span>★</span>{% endfor %}
      <span class="ml-2 text-base font-semibold text-amber-200">(5.0)</span>
    </div>

    <h2 id="testimonials-heading" class="text-3xl sm:text-4xl font-bold text-amber-400">
      What They’re Saying
    </h2>

    {# ── Carousel ──────────────────────────────── #}
    <div class="relative max-w-3xl mx-auto">
      <figure
        id="quoteBox"
        class="relative italic text-lg sm:text-xl text-white/90 rounded-xl p-8 bg-zinc-900/70 shadow-lg outline-none select-text transition-opacity duration-500"
        aria-live="polite"
        aria-atomic="true"
        tabindex="0"
      >
        <span
          id="confettiEmoji"
          class="absolute -top-4 left-1/2 -translate-x-1/2 opacity-0 transition-opacity duration-700 pointer-events-none"
          aria-hidden="true"
        >🎉🎊✨</span>

        <blockquote id="quoteText">Loading…</blockquote>
        <figcaption id="quoteAuthor" class="mt-4 text-sm font-medium text-amber-300"></figcaption>

        <button
          id="copyQuoteBtn"
          class="mt-4 text-xs text-amber-400 underline hover:text-amber-200 focus:outline-offset-4"
          aria-label="Copy testimonial to clipboard"
        >
          Copy Quote
        </button>
      </figure>

      <div class="flex justify-center mt-6 gap-2">
        {% for i in range(3) %}
        <button
          class="carousel-dot w-3 h-3 rounded-full border-2 border-amber-400 transition-transform duration-200 {% if i == 0 %}bg-amber-400 scale-110{% else %}bg-zinc-700{% endif %}"
          data-idx="{{ i }}"
          aria-label="Show testimonial {{ i + 1 }}"
        ></button>
        {% endfor %}
      </div>
    </div>

    <img
      src="https://static.wixstatic.com/media/2f0953_5d94082989fb4c4eb31f7f440de183c2~mv2.jpg/v1/fill/w_1100,h_1034,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/IMG_2031.jpg"
      alt="Team showing off championship rings"
      width="480"
      height="320"
      loading="lazy"
      class="rounded-2xl shadow-2xl ring-4 ring-amber-300/50 object-cover mx-auto"
    />
  </div>
</section>

<script defer type="module">
  import confetti from 'https://cdn.skypack.dev/canvas-confetti@1.6.0';

  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const testimonials = [
    {
      q: 'Winning felt amazing — but it’s being part of a team that believes in you that means the most.',
      a: 'Connect ATX Elite Player, Class of 2030'
    },
    {
      q: 'Being part of Connect ATX Elite helps me stay focused in school and basketball. I want to make my family proud.',
      a: 'Honor-Roll Scholar-Athlete'
    },
    {
      q: 'I’ve seen real changes in my son — he’s more disciplined, focused, and confident in class and in life.',
      a: 'Team Parent'
    }
  ];

  let idx = 0, autoTimer;
  const quoteEl = document.getElementById('quoteText');
  const authorEl = document.getElementById('quoteAuthor');
  const dots = Array.from(document.querySelectorAll('.carousel-dot'));
  const emoji = document.getElementById('confettiEmoji');
  const box = document.getElementById('quoteBox');

  function show(i, animate = true) {
    idx = (i + testimonials.length) % testimonials.length;
    quoteEl.textContent = `“${testimonials[idx].q}”`;
    authorEl.textContent = `— ${testimonials[idx].a}`;
    dots.forEach((d, j) => {
      d.classList.toggle('bg-amber-400', j === idx);
      d.classList.toggle('scale-110', j === idx);
      d.classList.toggle('bg-zinc-700', j !== idx);
    });
    if (animate && !prefersReduced) {
      box.style.opacity = 0;
      setTimeout(() => (box.style.opacity = 1), 50);
    }
  }

  dots.forEach((d) =>
    d.addEventListener('click', () => {
      clearInterval(autoTimer);
      show(+d.dataset.idx);
      startAuto();
    })
  );

  box.addEventListener('keydown', (e) => {
    if (['ArrowRight', 'ArrowDown'].includes(e.key)) show(idx + 1);
    if (['ArrowLeft', 'ArrowUp'].includes(e.key)) show(idx - 1);
  });

  let startX = null;
  box.addEventListener('touchstart', (e) => (startX = e.touches[0].clientX), { passive: true });
  box.addEventListener(
    'touchend',
    (e) => {
      if (startX === null) return;
      const delta = e.changedTouches[0].clientX - startX;
      if (Math.abs(delta) > 50) show(delta < 0 ? idx + 1 : idx - 1);
      startX = null;
    },
    { passive: true }
  );

  document.getElementById('copyQuoteBtn').addEventListener('click', async () => {
    await navigator.clipboard.writeText(`${testimonials[idx].q} — ${testimonials[idx].a}`);
    if (prefersReduced) return;
    emoji.style.opacity = 1;
    confetti({
      particleCount: 140,
      spread: 60,
      origin: { y: 0.7 },
      colors: ['#facc15', '#fde68a', '#0a0a0a'],
      disableForReducedMotion: true
    });
    setTimeout(() => (emoji.style.opacity = 0), 1200);
  });

  function startAuto() {
    if (prefersReduced) return;
    autoTimer = setInterval(() => show(idx + 1, false), 8000);
  }
  box.addEventListener('mouseenter', () => clearInterval(autoTimer));
  box.addEventListener('mouseleave', startAuto);
  box.addEventListener('focusin', () => clearInterval(autoTimer));
  box.addEventListener('focusout', startAuto);

  show(0, false);
  startAuto();
</script>

{# templates/partials/stat.html #}
<section
  id="testimonials"
  class="relative isolate bg-gradient-to-br from-zinc-800 to-black py-24 px-6 text-white"
  role="region"
  aria-labelledby="testimonials-heading"
  tabindex="-1"
>
  <div class="max-w-5xl mx-auto text-center space-y-12">
    {# ⭐️ Social-proof badge #}
    <div
      class="flex justify-center items-center gap-1 text-2xl text-amber-400 animate-sparkle select-none"
      aria-hidden="true"
    >
      {% for _ in range(5) %}<span>★</span>{% endfor %}
      <span class="ml-2 text-base font-semibold text-amber-200">(5.0)</span>
    </div>

    <h2 id="testimonials-heading" class="text-3xl sm:text-4xl font-bold text-amber-400">
      What They’re Saying
    </h2>

    {# ── Carousel ──────────────────────────────── #}
    <div class="relative max-w-3xl mx-auto">
      <figure
        id="quoteBox"
        class="relative italic text-lg sm:text-xl text-white/90 rounded-xl p-8 bg-zinc-900/70 shadow-lg outline-none select-text transition-opacity duration-500"
        aria-live="polite"
        aria-atomic="true"
        tabindex="0"
      >
        <span
          id="confettiEmoji"
          class="absolute -top-4 left-1/2 -translate-x-1/2 opacity-0 transition-opacity duration-700 pointer-events-none"
          aria-hidden="true"
        >🎉🎊✨</span>

        <blockquote id="quoteText">Loading…</blockquote>
        <figcaption id="quoteAuthor" class="mt-4 text-sm font-medium text-amber-300"></figcaption>

        <button
          id="copyQuoteBtn"
          class="mt-4 text-xs text-amber-400 underline hover:text-amber-200 focus:outline-offset-4"
          aria-label="Copy testimonial to clipboard"
        >
          Copy Quote
        </button>
      </figure>

      <div class="flex justify-center mt-6 gap-2">
        {% for i in range(3) %}
        <button
          class="carousel-dot w-3 h-3 rounded-full border-2 border-amber-400 transition-transform duration-200 {% if i == 0 %}bg-amber-400 scale-110{% else %}bg-zinc-700{% endif %}"
          data-idx="{{ i }}"
          aria-label="Show testimonial {{ i + 1 }}"
        ></button>
        {% endfor %}
      </div>
    </div>

    <img
      src="https://static.wixstatic.com/media/2f0953_5d94082989fb4c4eb31f7f440de183c2~mv2.jpg/v1/fill/w_1100,h_1034,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/IMG_2031.jpg"
      alt="Team showing off championship rings"
      width="480"
      height="320"
      loading="lazy"
      class="rounded-2xl shadow-2xl ring-4 ring-amber-300/50 object-cover mx-auto"
    />
  </div>
</section>

<section id="stats" class="py-24 px-6 bg-black text-white" role="region" aria-label="Team statistics">
  <div class="max-w-4xl mx-auto flex flex-wrap justify-center gap-10 text-center">
    {% set stats = [
      ('16', 'Players Enrolled'),
      ('11', 'Honor Roll Scholars'),
      ('12', 'Tournaments Played'),
      ('3', 'Years Running')
    ] %}
    {% for number, label in stats %}
    <div
      class="stat-card transform transition duration-300 hover:scale-105"
      data-aos="zoom-in"
      data-aos-delay="{{ loop.index0 * 100 }}"
      tabindex="0"
      role="group"
      aria-label="{{ number }} {{ label }}"
    >
      <div class="text-4xl font-extrabold text-amber-400 drop-shadow">{{ number }}</div>
      <div class="mt-1 text-base text-white/80 font-medium">{{ label }}</div>
    </div>
    {% endfor %}
  </div>
</section>

<script defer type="module">
  import confetti from 'https://cdn.skypack.dev/canvas-confetti@1.6.0';

  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const testimonials = [
    {
      q: 'Winning felt amazing — but it’s being part of a team that believes in you that means the most.',
      a: 'Connect ATX Elite Player, Class of 2030'
    },
    {
      q: 'Being part of Connect ATX Elite helps me stay focused in school and basketball. I want to make my family proud.',
      a: 'Honor-Roll Scholar-Athlete'
    },
    {
      q: 'I’ve seen real changes in my son — he’s more disciplined, focused, and confident in class and in life.',
      a: 'Team Parent'
    }
  ];

  let idx = 0,
    autoTimer;
  const quoteEl = document.getElementById('quoteText');
  const authorEl = document.getElementById('quoteAuthor');
  const dots = Array.from(document.querySelectorAll('.carousel-dot'));
  const emoji = document.getElementById('confettiEmoji');
  const box = document.getElementById('quoteBox');

  function show(i, animate = true) {
    idx = (i + testimonials.length) % testimonials.length;
    quoteEl.textContent = `“${testimonials[idx].q}”`;
    authorEl.textContent = `— ${testimonials[idx].a}`;
    dots.forEach((d, j) => {
      d.classList.toggle('bg-amber-400', j === idx);
      d.classList.toggle('scale-110', j === idx);
      d.classList.toggle('bg-zinc-700', j !== idx);
    });
    if (animate && !prefersReduced) {
      box.style.opacity = 0;
      setTimeout(() => (box.style.opacity = 1), 50);
    }
  }

  dots.forEach((d) =>
    d.addEventListener('click', () => {
      clearInterval(autoTimer);
      show(+d.dataset.idx);
      startAuto();
    })
  );

  box.addEventListener('keydown', (e) => {
    if (['ArrowRight', 'ArrowDown'].includes(e.key)) show(idx + 1);
    if (['ArrowLeft', 'ArrowUp'].includes(e.key)) show(idx - 1);
  });

  let startX = null;
  box.addEventListener('touchstart', (e) => (startX = e.touches[0].clientX), { passive: true });
  box.addEventListener(
    'touchend',
    (e) => {
      if (startX === null) return;
      const delta = e.changedTouches[0].clientX - startX;
      if (Math.abs(delta) > 50) show(delta < 0 ? idx + 1 : idx - 1);
      startX = null;
    },
    { passive: true }
  );

  document.getElementById('copyQuoteBtn').addEventListener('click', async () => {
    await navigator.clipboard.writeText(`${testimonials[idx].q} — ${testimonials[idx].a}`);
    if (prefersReduced) return;
    emoji.style.opacity = 1;
    confetti({
      particleCount: 140,
      spread: 60,
      origin: { y: 0.7 },
      colors: ['#facc15', '#fde68a', '#0a0a0a'],
      disableForReducedMotion: true
    });
    setTimeout(() => (emoji.style.opacity = 0), 1200);
  });

  function startAuto() {
    if (prefersReduced) return;
    autoTimer = setInterval(() => show(idx + 1, false), 8000);
  }
  box.addEventListener('mouseenter', () => clearInterval(autoTimer));
  box.addEventListener('mouseleave', startAuto);
  box.addEventListener('focusin', () => clearInterval(autoTimer));
  box.addEventListener('focusout', startAuto);

  show(0, false);
  startAuto();
</script>

<section
  id="testimonials"
  class="relative isolate bg-gradient-to-br from-zinc-800 to-black py-24 px-6 text-white"
  role="region"
  aria-labelledby="testimonials-heading"
  tabindex="-1"
>
  <div class="max-w-5xl mx-auto text-center space-y-12">
    {# ⭐️ Social-proof badge #}
    <div
      class="flex justify-center items-center gap-1 text-2xl text-amber-400 animate-sparkle select-none"
      aria-hidden="true"
    >
      {% for _ in range(5) %}<span>★</span>{% endfor %}
      <span class="ml-2 text-base font-semibold text-amber-200">(5.0)</span>
    </div>

    <h2 id="testimonials-heading" class="text-3xl sm:text-4xl font-bold text-amber-400">
      What They’re Saying
    </h2>

    {# ── Carousel ──────────────────────────────── #}
    <div class="relative max-w-3xl mx-auto">
      <figure
        id="quoteBox"
        class="relative italic text-lg sm:text-xl text-white/90 rounded-xl p-8 bg-zinc-900/70 shadow-lg outline-none select-text transition-opacity duration-500"
        aria-live="polite"
        aria-atomic="true"
        tabindex="0"
      >
        <span
          id="confettiEmoji"
          class="absolute -top-4 left-1/2 -translate-x-1/2 opacity-0 transition-opacity duration-700 pointer-events-none"
          aria-hidden="true"
        >🎉🎊✨</span>

        <blockquote id="quoteText">Loading…</blockquote>
        <figcaption id="quoteAuthor" class="mt-4 text-sm font-medium text-amber-300"></figcaption>

        <button
          id="copyQuoteBtn"
          class="mt-4 text-xs text-amber-400 underline hover:text-amber-200 focus:outline-offset-4"
          aria-label="Copy testimonial to clipboard"
        >
          Copy Quote
        </button>
      </figure>

      <div class="flex justify-center mt-6 gap-2">
        {% for i in range(3) %}
        <button
          class="carousel-dot w-3 h-3 rounded-full border-2 border-amber-400 transition-transform duration-200 {% if i == 0 %}bg-amber-400 scale-110{% else %}bg-zinc-700{% endif %}"
          data-idx="{{ i }}"
          aria-label="Show testimonial {{ i + 1 }}"
        ></button>
        {% endfor %}
      </div>
    </div>

    <img
      src="https://static.wixstatic.com/media/2f0953_5d94082989fb4c4eb31f7f440de183c2~mv2.jpg/v1/fill/w_1100,h_1034,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/IMG_2031.jpg"
      alt="Team showing off championship rings"
      width="480"
      height="320"
      loading="lazy"
      class="rounded-2xl shadow-2xl ring-4 ring-amber-300/50 object-cover mx-auto"
    />
  </div>
</section>

<script defer type="module">
  import confetti from 'https://cdn.skypack.dev/canvas-confetti@1.6.0';

  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const testimonials = [
    {
      q: 'Winning felt amazing — but it’s being part of a team that believes in you that means the most.',
      a: 'Connect ATX Elite Player, Class of 2030'
    },
    {
      q: 'Being part of Connect ATX Elite helps me stay focused in school and basketball. I want to make my family proud.',
      a: 'Honor-Roll Scholar-Athlete'
    },
    {
      q: 'I’ve seen real changes in my son — he’s more disciplined, focused, and confident in class and in life.',
      a: 'Team Parent'
    }
  ];

  let idx = 0, autoTimer;
  const quoteEl = document.getElementById('quoteText');
  const authorEl = document.getElementById('quoteAuthor');
  const dots = Array.from(document.querySelectorAll('.carousel-dot'));
  const emoji = document.getElementById('confettiEmoji');
  const box = document.getElementById('quoteBox');

  function show(i, animate = true) {
    idx = (i + testimonials.length) % testimonials.length;
    quoteEl.textContent = `“${testimonials[idx].q}”`;
    authorEl.textContent = `— ${testimonials[idx].a}`;
    dots.forEach((d, j) => {
      d.classList.toggle('bg-amber-400', j === idx);
      d.classList.toggle('scale-110', j === idx);
      d.classList.toggle('bg-zinc-700', j !== idx);
    });
    if (animate && !prefersReduced) {
      box.style.opacity = 0;
      setTimeout(() => (box.style.opacity = 1), 50);
    }
  }

  dots.forEach((d) =>
    d.addEventListener('click', () => {
      clearInterval(autoTimer);
      show(+d.dataset.idx);
      startAuto();
    })
  );

  box.addEventListener('keydown', (e) => {
    if (['ArrowRight', 'ArrowDown'].includes(e.key)) show(idx + 1);
    if (['ArrowLeft', 'ArrowUp'].includes(e.key)) show(idx - 1);
  });

  let startX = null;
  box.addEventListener('touchstart', (e) => (startX = e.touches[0].clientX), { passive: true });
  box.addEventListener(
    'touchend',
    (e) => {
      if (startX === null) return;
      const delta = e.changedTouches[0].clientX - startX;
      if (Math.abs(delta) > 50) show(delta < 0 ? idx + 1 : idx - 1);
      startX = null;
    },
    { passive: true }
  );

  document.getElementById('copyQuoteBtn').addEventListener('click', async () => {
    await navigator.clipboard.writeText(`${testimonials[idx].q} — ${testimonials[idx].a}`);
    if (prefersReduced) return;
    emoji.style.opacity = 1;
    confetti({
      particleCount: 140,
      spread: 60,
      origin: { y: 0.7 },
      colors: ['#facc15', '#fde68a', '#0a0a0a'],
      disableForReducedMotion: true
    });
    setTimeout(() => (emoji.style.opacity = 0), 1200);
  });

  function startAuto() {
    if (prefersReduced) return;
    autoTimer = setInterval(() => show(idx + 1, false), 8000);
  }
  box.addEventListener('mouseenter', () => clearInterval(autoTimer));
  box.addEventListener('mouseleave', startAuto);
  box.addEventListener('focusin', () => clearInterval(autoTimer));
  box.addEventListener('focusout', startAuto);

  show(0, false);
  startAuto();
</script>

{# templates/partials/hero_overlay_quote.html #}
<div
  class="absolute bottom-8 left-1/2 -translate-x-1/2 max-w-xl px-6 py-4 bg-black/60 backdrop-blur-md rounded-xl text-center text-amber-300 text-lg sm:text-xl font-semibold tracking-wide shadow-glow select-none pointer-events-none"
  aria-hidden="true"
  data-aos="fade-up"
  data-aos-delay="350"
>
  “Building champions on and off the court — together, we rise.”
</div>

<section
  id="hero"
  class="relative isolate w-full min-h-[90vh] md:min-h-screen overflow-hidden bg-gradient-to-br from-cyber-night to-prestige-black rounded-3xl shadow-gold"
  aria-labelledby="hero-heading"
  tabindex="-1"
  data-aos="fade-in"
>
  <!-- 🔥 Ken Burns Background Image -->
  <div class="absolute inset-0 -z-10 overflow-hidden">
    <img
      src="{{ url_for('static', filename='connect-atx-team.jpg') }}"
      alt="Connect ATX Elite team after a great Championship Tournament"
      class="h-full w-full object-cover brightness-95 saturate-110 motion-safe:animate-kenburns"
      loading="eager"
      decoding="async"
      fetchpriority="high"
    />
  </div>

  <!-- ✨ Luxe animated overlay -->
  <div class="absolute inset-0 bg-gradient-to-b from-black/30 to-black/90 -z-10 animate-gradient-xy"></div>

  <!-- 🟨 Scrollbar Progress HUD -->
  <div
    id="scrollbar"
    class="fixed left-0 top-0 z-[999] h-1 w-0 bg-amber-400 origin-left transition-[width] duration-150 ease-out"
  ></div>

  <!-- 💎 Hero Core Content -->
  <div
    class="relative z-20 flex flex-col items-center justify-center h-full text-center px-6 py-32 md:py-40 max-w-7xl mx-auto"
  >
    <!-- Logo larger + hover scale + glow -->
    <img
      src="{{ url_for('static', filename='images/logo-hero.png') }}"
      alt="Connect ATX Elite Logo"
      class="w-40 md:w-48 drop-shadow-gold animate-glow gsap-logo cursor-pointer transition-transform duration-500 hover:scale-105"
      style="filter: drop-shadow(0 0 1rem #facc15);"
      loading="lazy"
      decoding="async"
      data-aos="zoom-in"
      data-aos-delay="50"
    />

    <!-- Amplified Tagline -->
    <p
      id="hero-heading"
      class="mt-6 text-2xl md:text-4xl font-extrabold text-amber-400 max-w-3xl leading-snug drop-shadow-lg animate-fade-up delay-150"
      data-aos="fade-up"
      data-aos-delay="150"
    >
      Empowering Youth Through Basketball, Brotherhood &amp; Academics
    </p>

    <!-- Upgraded CTAs -->
    <div class="mt-10 flex flex-col sm:flex-row gap-6 justify-center" data-aos="fade-up" data-aos-delay="200">
      <a
        href="#tiers"
        class="inline-block bg-amber-400 hover:bg-amber-300 text-black font-extrabold px-12 py-4 rounded-2xl shadow-[0_0_20px_#facc15] focus-visible:ring-6 ring-amber-300 transition-transform transform-gpu hover:scale-105 animate-pulse-slow"
      >
        Become a Sponsor
      </a>
      <a
        href="#about"
        class="inline-block border-2 border-amber-400 text-amber-400 font-bold px-12 py-4 rounded-2xl shadow-inner hover:bg-amber-400 hover:text-black transition"
      >
        Learn More
      </a>
    </div>

    <!-- Elevated Fundraising HUD -->
    <div
      class="mt-8 font-mono text-lg md:text-xl text-white/90 bg-black/40 backdrop-blur-sm px-6 py-2 rounded-full inline-flex items-center space-x-3 shadow-glow animate-fade-up delay-250"
      aria-live="polite"
      data-aos="fade-up"
      data-aos-delay="250"
    >
      <span>💰</span>
      <span class="font-semibold text-amber-400 tracking-wider">${{ config.get('RAISED_AMOUNT', 7900) }}</span>
      <span>raised of</span>
      <span class="font-semibold text-amber-400 tracking-wider">${{ config.get('GOAL_AMOUNT', 10000) }}</span>
      <span>goal</span>
    </div>
  </div>

  <!-- ⬇️ Larger Chevron Scroll Hint with pulse -->
  <button
    id="scroll-hint"
    class="absolute bottom-12 left-1/2 -translate-x-1/2 text-amber-300 animate-bounce-slow hover:text-amber-200 focus:outline-none scale-110"
    aria-label="Scroll down"
    data-aos="fade-up"
    data-aos-delay="300"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="w-10 h-10"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
      stroke-width="2"
    >
      <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
    </svg>
  </button>

  {% include "partials/hero_overlay_quote.html" ignore missing %}
</section>

<section
  id="cta"
  role="region"
  aria-labelledby="cta-heading"
  class="relative py-28 bg-gradient-to-b from-black via-zinc-900 to-black text-white text-center px-6"
  tabindex="-1"
>
  <div class="max-w-3xl mx-auto space-y-10">

    <!-- 1. Headline & Sub-Headline -->
    <h2
      id="cta-heading"
      class="text-4xl sm:text-5xl font-extrabold text-amber-400 drop-shadow-xl tracking-tight"
      data-aos="zoom-in"
    >
      Ready to Join Our Mission?
    </h2>
    <p
      class="text-white/85 text-lg sm:text-xl leading-relaxed"
      data-aos="fade-up" data-aos-delay="100"
    >
      Help us secure gym time, fund travel, and empower our student-athletes for life beyond the court.
    </p>

    <!-- 2. Live Progress Bar -->
    {% set raised = config.RAISED_AMOUNT %}
    {% set goal   = config.GOAL_AMOUNT %}
    <div class="w-full bg-zinc-800 rounded-full h-4 overflow-hidden" data-aos="fade-up" data-aos-delay="200" aria-hidden="true">
      <div
        class="h-4 bg-gradient-to-r from-amber-400 to-yellow-300 shadow-gold animate-pulse"
        style="width: {{ (raised/goal*100)|round(0) }}%"
        aria-valuemin="0"
        aria-valuemax="100"
        role="progressbar"
        aria-valuenow="{{ (raised/goal*100)|round(0) }}"
      ></div>
    </div>
    <div
      class="flex justify-center items-center gap-2 font-mono text-sm text-white/80"
      aria-live="polite"
      data-aos="fade-up" data-aos-delay="300"
    >
      <span role="img" aria-label="Fundraiser">💰</span>
      <span>
        <span class="font-bold text-amber-400">${{ "{:,}".format(raised) }}</span> of
        <span class="font-bold text-amber-400">${{ "{:,}".format(goal) }}</span> goal
      </span>
    </div>

    <!-- 3. Urgency Countdown -->
    <div
      id="countdown"
      class="text-amber-300 font-semibold tracking-wide text-sm sm:text-base"
      data-aos="fade-up" data-aos-delay="400"
      aria-live="polite"
    >
      <span id="cd-days">--</span>d
      <span id="cd-hours">--</span>h
      <span id="cd-mins">--</span>m left to hit our goal!
    </div>

    <!-- 4. Preset Gift Buttons + Custom Amount -->
    <div class="flex flex-wrap justify-center gap-3" data-aos="fade-up" data-aos-delay="500">
      {% for amt in [25,50,100,250] %}
      <button
        type="button"
        class="preset-amt bg-zinc-700 hover:bg-zinc-600 px-4 py-2 rounded-full font-semibold text-white transition-shadow shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-amber-400"
        data-amt="{{ amt }}"
        aria-label="Select ${{ amt }} donation amount"
      >
        ${{ amt }}
      </button>
      {% endfor %}
      <input
        id="customAmt"
        type="number" min="1" max="999"
        placeholder="Custom"
        aria-label="Custom donation amount"
        class="w-20 bg-zinc-800 text-white text-center rounded-full px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-400 border border-zinc-600"
      />
    </div>

    <!-- 5. Donate Button → Modal + Confetti -->
    <button
      id="donateBtn"
      class="mt-4 inline-block bg-amber-400 text-black font-semibold text-lg px-8 py-3 rounded-full shadow-gold hover:scale-105 hover:bg-amber-300 focus-visible:ring-4 focus-visible:ring-amber-300 transition-transform duration-300 animate-glow"
      data-aos="zoom-in" data-aos-delay="600"
      aria-haspopup="dialog"
      aria-controls="donateDialog"
    >
      Donate Now
    </button>

    <!-- QR code fallback -->
    <div class="pt-6 flex flex-col items-center gap-1" data-aos="fade-up" data-aos-delay="700">
      <img
        src="{{ url_for('static', filename='qr-website.png') }}"
        alt="Donate via QR Code"
        width="128" height="128"
        class="rounded-lg shadow-lg opacity-75 hover:opacity-100 transition"
        loading="lazy"
      >
      <p class="text-xs text-white/60">Scan: CashApp / PayPal / Venmo</p>
    </div>

    <p class="pt-6 text-sm text-white/60" data-aos="fade-up" data-aos-delay="800">
      Or contact <a href="mailto:arodgps@gmail.com" class="underline hover:text-amber-300">arodgps@gmail.com</a>
      &nbsp;| 📞 (512) 820-0475
    </p>
  </div>

  {# ——— Modal (using native <dialog>) ——— #}
  <dialog id="donateDialog" class="w-full max-w-md p-0 rounded-2xl overflow-hidden" role="dialog" aria-modal="true" aria-labelledby="donateDialogTitle">
    <form id="donateForm" method="dialog" class="bg-zinc-950 text-white p-6 space-y-4" aria-describedby="donateDialogDesc">
      <h3 id="donateDialogTitle" class="text-2xl font-bold text-amber-400">Enter Donation Amount</h3>
      <input name="amount" id="formAmt" type="number" min="1" max="999" required
             class="w-full bg-zinc-800 rounded-full px-4 py-2 text-center focus:outline-none border border-zinc-700"
             aria-label="Donation amount input" />
      <div class="flex justify-end gap-2">
        <button type="reset" class="px-4 py-2 rounded-full bg-zinc-700 hover:bg-zinc-600">Cancel</button>
        <button type="submit"
                class="px-6 py-2 rounded-full bg-amber-400 text-black font-bold hover:bg-amber-300">
          Donate
        </button>
      </div>
    </form>
  </dialog>
</section>

<script defer type="module">
import confetti from "https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/+esm";
import { loadStripe } from "https://js.stripe.com/v3";
const stripe = await loadStripe("{{ stripe_publishable }}");

// Countdown Timer
(function() {
  const target = new Date("{{ config.CAMPAIGN_END_ISO }}");
  const days = document.getElementById("cd-days"),
        hours = document.getElementById("cd-hours"),
        mins = document.getElementById("cd-mins");

  function tick() {
    const diff = target - new Date();
    if (diff <= 0) { clearInterval(timer); return; }
    const d = Math.floor(diff/86400000),
          h = Math.floor((diff%86400000)/3600000),
          m = Math.floor((diff%3600000)/60000);
    days.textContent = d; hours.textContent = h; mins.textContent = m;
  }
  const timer = setInterval(tick, 1000);
  tick();
})();

// Preset amount buttons click handler
document.querySelectorAll(".preset-amt").forEach(btn => {
  btn.addEventListener("click", () => {
    document.getElementById("formAmt").value = btn.dataset.amt;
  });
});

// Open dialog and confetti animation
const opener = document.getElementById("donateBtn");
const dialog = document.getElementById("donateDialog");
opener.addEventListener("click", () => {
  dialog.showModal();
  confetti({ particleCount: 120, spread: 70, origin: { y: 0.6 }, colors: ["#facc15", "#fef3c7"] });
});

// Handle form submission → Stripe checkout
document.getElementById("donateForm").addEventListener("submit", async e => {
  e.preventDefault();
  const amount = parseInt(document.getElementById("formAmt").value, 10);
  if (!amount || amount < 1 || amount > 999) {
    alert("Please enter a donation amount between $1 and $999.");
    return;
  }
  const res = await fetch("/api/create-checkout", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ amount }),
  });
  const { session_id } = await res.json();
  await stripe.redirectToCheckout({ sessionId: session_id });
});
</script>

{# templates/index.html — Elite-Grade Homepage (Prestige Theme) #}
{% extends "base.html" %}

{% block title %}
  Home · Connect ATX Elite
{% endblock %}

{% block extra_styles %}
  <style>
    /* ✅ Scroll-Reveal Animation */
    [data-reveal] {
      opacity: 0;
      transform: translateY(32px);
      transition:
        opacity 0.7s cubic-bezier(.22,.61,.36,1),
        transform 0.7s cubic-bezier(.22,.61,.36,1);
      will-change: opacity, transform;
    }
    [data-reveal].in-view {
      opacity: 1;
      transform: translateY(0);
    }

    /* ✨ Focus ring for accessibility */
    :focus-visible {
      outline: 3px solid #facc15;
      outline-offset: 3px;
      border-radius: 0.375rem;
    }

    /* Footer breathing room */
    section.mb-16:last-of-type {
      margin-bottom: 5rem;
    }
  </style>
{% endblock %}

{% block content %}
  <h1 id="page-title" class="sr-only">Home · Connect ATX Elite</h1>

  <main role="main" id="main-content" tabindex="-1" aria-label="Main content" class="overflow-x-hidden">

    <!-- 🏀 Hero Section -->
    <section
      id="hero"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-label="Hero Section"
      tabindex="0"
      aria-describedby="hero-desc"
    >
      {% include "partials/hero.html" %}
      <p id="hero-desc" class="sr-only">
        Empowering youth through basketball, mentorship, and academic excellence.
      </p>
    </section>

    <!-- 🥇 Sponsorship Tiers -->
    <section
      id="tiers"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-labelledby="tiers-title"
      tabindex="0"
    >
      <h2 id="tiers-title" class="sr-only">Sponsorship Tiers</h2>
      {% include "partials/tiers.html" %}
    </section>

    <!-- 💬 Testimonials -->
    <section
      id="testimonials"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-labelledby="testimonials-title"
      tabindex="0"
    >
      <h2 id="testimonials-title" class="sr-only">Testimonials</h2>
      {% include "partials/testimonials.html" %}
    </section>

    <!-- 📣 Call to Action -->
    <section
      id="ctaSection"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-labelledby="cta-title"
      tabindex="0"
    >
      <h2 id="cta-title" class="sr-only">Call To Action</h2>
      {% include "partials/cta.html" %}
    </section>

    <!-- 🌟 Sponsor Wall -->
    <section
      id="sponsor-wall"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-labelledby="sponsor-wall-title"
      tabindex="0"
    >
      <h2 id="sponsor-wall-title" class="sr-only">Sponsor Wall</h2>
      {% include "partials/sponsor_wall.html" %}
    </section>

  </main>

  <!-- 🌐 Modals and UI Widgets -->
  {% include "partials/donation_modal.html" %}
  {% include "partials/newsletter_popup.html" %}
  {% include "partials/back_to_top_ball.html" %}
  {% include "partials/toast_notifications.html" %}
  {% include "partials/vip_leaderboard.html" %}
  {% include "partials/chat_widget.html" %}
  {% include "partials/accessibility_toolbar.html" %}
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script>
    // 🚀 Scroll-Reveal Intersection Observer
    (() => {
      const elements = document.querySelectorAll('[data-reveal]');
      if (!('IntersectionObserver' in window)) return;

      const observer = new IntersectionObserver((entries, obs) => {
        for (const { isIntersecting, target } of entries) {
          if (isIntersecting) {
            target.classList.add('in-view');
            obs.unobserve(target);
          }
        }
      }, { threshold: 0.35 });

      elements.forEach(el => observer.observe(el));
    })();
  </script>
{% endblock %}

<!-- Replace your existing templates/base.html with this full version -->

<!DOCTYPE html>
<html lang="en" class="scroll-smooth dark" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <title>{% block title %}Connect ATX Elite · Empowering Youth Through Basketball{% endblock %}</title>
  <meta name="description" content="Empowering youth in Austin, TX through basketball, mentorship, and academic excellence. Sponsor our 12U AAU team today!" />
  <meta name="theme-color" content="#facc15" media="(prefers-color-scheme: light)" />
  <meta name="theme-color" content="#111827" media="(prefers-color-scheme: dark)" />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="https://www.connectatxelite.com/" />

  <!-- Open Graph / Twitter Meta -->
  <meta property="og:title" content="Connect ATX Elite" />
  <meta property="og:description" content="Sponsor our 12U AAU basketball team—invest in the next generation in Austin, TX." />
  <meta property="og:image" content="{{ url_for('static', filename='connect-atx-team.jpg') }}" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://www.connectatxelite.com/" />
  <meta property="og:site_name" content="Connect ATX Elite" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Connect ATX Elite" />
  <meta name="twitter:description" content="Join our mission to uplift youth through basketball, mentorship, and community." />
  <meta name="twitter:image" content="{{ url_for('static', filename='connect-atx-team.jpg') }}" />

  <!-- Favicon / Touch -->
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" sizes="32x32" type="image/png" />
  <link rel="apple-touch-icon" href="{{ url_for('static', filename='images/apple-touch.png') }}" sizes="180x180" />

  <!-- Stylesheets -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/tailwind.min.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/globals.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/base/back_to_top_ball.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" />
  {% block extra_styles %}{% endblock %}

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SportsTeam",
    "name": "Connect ATX Elite",
    "sport": "Basketball",
    "url": "https://www.connectatxelite.com",
    "location": {
      "@type": "Place",
      "name": "Austin, TX"
    },
    "memberOf": {
      "@type": "Organization",
      "name": "AAU"
    }
  }
  </script>
</head>

<body class="bg-white text-gray-900 antialiased dark:bg-gray-900 dark:text-white selection:bg-yellow-300/80">
  <a href="#main-content" class="sr-only focus:not-sr-only absolute top-2 left-2 bg-yellow-300 text-black px-4 py-1 rounded shadow z-50">Skip to content</a>

  {% include "partials/header.html" %}

  <main id="main-content" role="main" tabindex="-1" aria-label="Main Content">
    {% block content %}{% endblock %}
  </main>

  {% include "partials/footer.html" %}
  {% include "partials/newsletter_popup.html" %}

  <!-- 🔼 Back to Top Ball (Hardcoded) -->
  <button
    id="back-to-top-ball"
    type="button"
    aria-label="Back to top"
    class="fixed bottom-6 right-6 w-14 h-14 z-[60] rounded-full bg-amber-400/90 backdrop-blur-sm shadow-xl opacity-0 pointer-events-none scale-95 translate-y-6 transition-all duration-300 ease-out hover:scale-110 hover:shadow-2xl focus:outline-none focus-visible:ring-4 focus-visible:ring-amber-300"
  >
    <img
      src="{{ url_for('static', filename='images/ball.png') }}"
      alt=""
      aria-hidden="true"
      class="w-9 h-9 mx-auto pointer-events-none select-none"
      loading="lazy"
    />
    <span class="sr-only">Back to top</span>
  </button>

  <!-- JS Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
  <script>AOS.init({ once: true, duration: 700, easing: 'ease-out-quart' });</script>

  <script src="{{ url_for('static', filename='js/bundle.min.js') }}" defer></script>

  <!-- 🔁 Back to Top Ball Script -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const btn = document.getElementById('back-to-top-ball');
      if (!btn) return;

      btn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });

      const toggleVisibility = () => {
        if (window.scrollY > 220) {
          btn.classList.add('opacity-100', 'pointer-events-auto', 'translate-y-0', 'scale-100');
          btn.classList.remove('opacity-0', 'pointer-events-none', 'translate-y-6', 'scale-95');
        } else {
          btn.classList.add('opacity-0', 'pointer-events-none', 'translate-y-6', 'scale-95');
          btn.classList.remove('opacity-100', 'pointer-events-auto', 'translate-y-0', 'scale-100');
        }
      };

      window.addEventListener('scroll', toggleVisibility, { passive: true });
      toggleVisibility();
    });
  </script>

  {% block scripts %}{% endblock %}
</body>
</html>

<footer
  id="site-footer"
  role="contentinfo"
  class="relative bg-zinc-950 text-white py-12 px-6 border-t border-zinc-800 shadow-inner"
  data-aos="fade-up"
  data-aos-delay="200"
>
  <div class="max-w-6xl mx-auto grid gap-12 md:grid-cols-3 text-center md:text-left">

    <!-- Branding & Year -->
    <div class="space-y-2">
      <span class="block text-xs text-amber-400 font-semibold tracking-wide">AAU 12U | Austin, TX</span>
      <p class="text-sm text-white/60">© {{ now().year }} Connect ATX Elite. All rights reserved.</p>

      <!-- Newsletter capture -->
      <form
        id="newsletter-form"
        class="mt-4 flex flex-col sm:flex-row gap-2 justify-center md:justify-start"
        onsubmit="handleNewsletterSignup(event)"
        aria-label="Subscribe to newsletter"
      >
        <input
          type="email"
          name="newsletter_email"
          required
          placeholder="Your email"
          aria-required="true"
          aria-describedby="newsletterHelp"
          class="w-full sm:w-auto flex-grow px-3 py-2 rounded-lg bg-zinc-900 border border-zinc-700 focus:outline-none focus:ring-2 focus:ring-amber-400"
        />
        <button
          type="submit"
          class="px-4 py-2 bg-amber-400 text-black font-semibold rounded-lg hover:bg-amber-300 transition focus:ring-4 focus:ring-amber-400"
        >
          Subscribe
        </button>
      </form>
      <p id="newsletterHelp" class="sr-only">Enter your email to subscribe to our newsletter</p>
    </div>

    <!-- Fundraising Progress + Quick Links -->
    <div class="space-y-4 flex flex-col items-center">
      {% set raised = config.get('RAISED_AMOUNT', 0) %}
      {% set goal   = config.get('GOAL_AMOUNT', 10000) %}
      <div class="w-full max-w-xs" aria-label="Fundraising progress bar">
        <div class="flex justify-between text-xs font-mono text-amber-200 mb-1">
          <span>Raised</span>
          <span>${{ "{:,}".format(raised) }} / ${{ "{:,}".format(goal) }}</span>
        </div>
        <div
          class="relative w-full h-3 rounded-lg bg-zinc-800 overflow-hidden"
          role="progressbar"
          aria-valuemin="0"
          aria-valuemax="{{ goal }}"
          aria-valuenow="{{ raised }}"
          aria-label="Amount raised towards goal"
        >
          <div
            class="absolute inset-y-0 left-0 bg-amber-400 shadow-gold transition-all duration-700"
            style="width: {{ (raised / goal * 100)|round(0, 'floor') }}%;"
          ></div>
        </div>
      </div>

      <nav class="flex flex-wrap justify-center gap-3" role="navigation" aria-label="Footer quick links">
        <a
          href="mailto:arodgps@gmail.com"
          class="px-3 py-1 rounded bg-amber-400/10 text-amber-300 hover:bg-amber-400 hover:text-black transition focus:ring-2 focus:ring-amber-300"
          aria-label="Email Connect ATX Elite"
        >📧 Email</a>
        <a
          href="https://www.connectatxelite.com"
          target="_blank" rel="noopener"
          class="px-3 py-1 rounded bg-amber-400/10 text-amber-300 hover:bg-amber-400 hover:text-black transition focus:ring-2 focus:ring-amber-300"
          aria-label="Visit official site"
        >🌐 Site</a>
        <a
          href="https://www.paypal.com/donate/your-link"
          target="_blank" rel="noopener"
          class="px-3 py-1 rounded bg-green-400/20 text-green-200 hover:bg-green-300 hover:text-black transition focus:ring-2 focus:ring-green-200"
          aria-label="Donate via PayPal"
        >💸 Donate</a>
      </nav>
    </div>

    <!-- Contact, Countdown, and Accessible Back-to-Top -->
    <div class="space-y-4 flex flex-col items-center md:items-end">
      <address class="not-italic text-xs text-white/70 space-y-1">
        <div>
          Contact: <a href="mailto:arodgps@gmail.com" class="underline hover:text-amber-300">arodgps@gmail.com</a>
        </div>
        <div>
          Phone: <a href="tel:+15128200475" class="underline hover:text-amber-300">(512) 820-0475</a>
        </div>
      </address>

      <!-- Live countdown -->
      <div
        id="next-game-countdown"
        class="text-sm text-amber-300 font-mono"
        aria-live="polite"
        aria-atomic="true"
      >
        Next Tournament in: <span id="countdown-timer">00d 00h 00m 00s</span>
      </div>

      <!-- Accessible Back-to-Top anchor -->
      <a
        href="#main-content"
        class="mt-2 text-amber-400 underline hover:text-amber-200"
        aria-label="Back to top"
      >↑ Back to Top</a>
    </div>
  </div>

  <!-- Optional social-proof ticker -->
  <div class="mt-8 text-center text-xs text-white/50 font-mono" aria-live="polite" aria-atomic="true">
    Recent Supporters: {{ ['Acme Corp', 'Jane D.', 'Smith & Co', 'Austin Hoops', 'Elite Donor'] | join(' • ') }}
  </div>
</footer>

<script>
  // Newsletter subscription handler (stub)
  function handleNewsletterSignup(e) {
    e.preventDefault();
    const email = e.target.newsletter_email.value.trim();
    if (!email) {
      alert("Please enter a valid email address.");
      return;
    }
    alert(`🎉 Thanks! We'll keep you updated at ${email}`);
    e.target.reset();
  }

  // Countdown timer script
  const target = new Date('2025-07-01T10:00:00Z');
  function updateCountdown() {
    const now  = Date.now();
    const diff = target - now;
    if (diff <= 0) {
      document.getElementById('countdown-timer').textContent = 'Tournament started!';
      return;
    }
    const d = Math.floor(diff / 86400000),
          h = Math.floor((diff % 86400000) / 3600000),
          m = Math.floor((diff % 3600000) / 60000),
          s = Math.floor((diff % 60000) / 1000);
    document.getElementById('countdown-timer').textContent = `${d}d ${h}h ${m}m ${s}s`;
  }
  setInterval(updateCountdown, 1000);
  updateCountdown();
</script>

{# templates/partials/tiers.html — Enhanced Sponsor Tiers #}
<section
  id="tiers"
  class="py-24 bg-zinc-900 text-white px-6"
  role="region"
  aria-labelledby="tiers-heading"
  tabindex="-1"
  data-aos="fade-up"
  data-aos-duration="800"
>
  <div class="max-w-6xl mx-auto space-y-16">
    <!-- ① QR sponsor call-out -->
    <div
      class="p-6 rounded-2xl bg-gradient-to-r from-amber-400/70 to-amber-200/60 text-black flex flex-col md:flex-row items-center justify-between gap-6 shadow-gold"
      aria-label="Sponsor now call-out"
      data-aos="zoom-in"
      data-aos-delay="200"
    >
      <div>
        <p class="font-bold text-2xl sm:text-3xl">Want to make the biggest impact?</p>
        <p class="text-lg text-amber-800/80">
          Contact us at
          <a href="mailto:arodgps@gmail.com" class="underline hover:text-amber-700">
            arodgps@gmail.com
          </a>
          or scan to sponsor instantly.
        </p>
      </div>
      <img
        src="{{ url_for('static', filename='qr-sponsorship-deck.png') }}"
        alt="Sponsor via QR code"
        width="90"
        height="90"
        class="rounded-lg shadow-lg border border-amber-400 bg-white"
      />
    </div>

    <!-- ② Live progress bar -->
    {% set goal = goal_amount or 10000 %}
    {% set raised = raised_amount or 7850 %}
    <div
      class="w-full max-w-xl mx-auto text-center space-y-2"
      aria-label="{{ '$%s raised of $%s goal'|format(raised, goal) }}"
      data-aos="fade-up"
      data-aos-delay="400"
    >
      <div class="w-full bg-zinc-800 h-5 rounded-full border border-amber-400/30 overflow-hidden relative">
        <div
          id="tiersProgress"
          class="bg-amber-400 h-5 rounded-full shadow-gold transition-all duration-1000 ease-out"
          style="width: {{ (raised/goal*100)|round(1,'ceil') }}%;"
        >
          <span class="pl-2 text-black font-bold">
            {{ '$%s'|format('{:,}'.format(raised)) }}
          </span>
        </div>
      </div>
      <span class="text-sm text-amber-200">Goal: ${{ '{:,}'.format(goal) }}</span>
    </div>

    <!-- ③ Section heading -->
    <h2
      id="tiers-heading"
      class="text-4xl font-bold text-amber-400 text-center"
      data-aos="fade-up"
      data-aos-delay="600"
    >
      Sponsorship Tiers
    </h2>

    <!-- ④ Tier cards with flip effect -->
    {% set tiers = [
      ('Platinum','$5,000+','heroicons-solid:crown',['Logo on jerseys','Shout-outs on social','VIP invites'],'from-amber-500 to-amber-300',True),
      ('Gold','$2,500','heroicons-solid:currency-dollar',['Warm-ups logo','Social features','Appreciation invites'],'from-amber-400 to-amber-200',False),
      ('Silver','$1,000','heroicons-solid:medal',['Social shout-outs','Thank-you certificate','Board listing'],'from-gray-300 to-slate-100',False),
      ('Bronze','$500','heroicons-solid:trophy',['Public thank-you','Board listing'],'from-orange-400 to-amber-200',False),
      ('Custom','Any Amount','heroicons-solid:star',['Tailored benefits','Personalized impact'],'from-purple-500 to-pink-400',False)
    ] %}
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10">
      {% for title, amount, icon, benefits, gradient, highlight in tiers %}
      <div
        class="flip-card perspective"
        tabindex="0"
        data-aos="fade-up"
        data-aos-delay="{{ 700 + loop.index0 * 100 }}"
      >
        <div class="relative w-full h-full transition-transform duration-500 preserve-3d group hover:rotate-y-180 focus-within:rotate-y-180">
          <!-- Front -->
          <div class="card-face card-front p-6 rounded-2xl bg-gradient-to-br {{ gradient }} shadow-2xl text-black flex flex-col items-center justify-start space-y-4">
            {% if highlight %}
            <span class="absolute top-4 right-4 bg-black/80 text-amber-300 text-xs px-3 py-1 rounded-full font-semibold shadow">
              Top&nbsp;Tier
            </span>
            {% endif %}
            <div class="text-5xl">
              <i data-feather="{{ icon }}"></i>
            </div>
            <h3 class="text-2xl font-bold">{{ title }}</h3><span class="sr-only">Secure this tier now</span>
            <p class="text-lg font-semibold">{{ amount }}</p>
            <ul class="list-disc list-inside text-sm space-y-1">
              {% for item in benefits %}
              <li>{{ item }}</li>
              {% endfor %}
            </ul>
          </div>
          <!-- Back -->
          <div class="card-face card-back absolute inset-0 p-6 rounded-2xl bg-zinc-800 text-white flex flex-col items-center justify-center backface-hidden shadow-lg">
            <p class="mb-4 font-semibold">Secure this tier now:</p>
            <button
              class="tier-cta inline-block bg-amber-400 text-black font-bold px-6 py-2 rounded-full shadow-gold hover:scale-105 focus-visible:ring-4 focus-visible:ring-amber-300 transition"
              data-amount="{{ amount | replace('$','') | replace(',','') | default('') }}"
            >
              Sponsor {{ title }}
            </button>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- ⑤ FAQ accordion -->
    <div class="max-w-3xl mx-auto pt-10 border-t border-zinc-800" data-aos="fade-up" data-aos-delay="1100">
      <button
        id="faqToggleTiers"
        class="flex items-center gap-2 text-amber-400 font-bold text-lg hover:underline transition"
        aria-expanded="false"
        aria-controls="faqBodyTiers"
      >
        ▶ Frequently Asked Questions
      </button>
      <div
        id="faqBodyTiers"
        class="hidden mt-4 bg-zinc-900 border border-amber-400/20 rounded-xl p-6 space-y-4"
      >
        <div><b>Can I sponsor anonymously?</b><p class="text-sm text-white/80">Yes — just let us know in your message or donation form.</p></div>
        <div><b>Where does my sponsorship go?</b><p class="text-sm text-white/80">100% supports gym rental, travel, academic programs, and gear.</p></div>
        <div><b>How do I become a sponsor?</b><p class="text-sm text-white/80">Click any “Sponsor” button or email us—we’ll personalize your impact!</p></div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    feather.replace();
    document.getElementById('faqToggleTiers')?.addEventListener('click', (e) => {
      const btn = e.currentTarget;
      const body = document.getElementById('faqBodyTiers');
      const open = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!open));
      btn.textContent = (open ? '▶' : '▼') + ' Frequently Asked Questions';
      body.classList.toggle('hidden', open);
    });

    document.querySelectorAll('.tier-cta').forEach((btn) => {
      btn.addEventListener('click', () => {
        const amt = btn.dataset.amount;
        const dlg = document.getElementById('donateDialog');
        if (dlg) {
          dlg.querySelector('input[name="amount"]').value = amt;
          dlg.showModal();
        }
      });
    });
  });
</script>

<style>
  .perspective { perspective: 1000px; }
  .preserve-3d { transform-style: preserve-3d; }
  .rotate-y-180 { transform: rotateY(180deg); }
  .card-face { backface-visibility: hidden; }
  .card-front { position: relative; }
  .card-back { transform: rotateY(180deg); }
  .backface-hidden { backface-visibility: hidden; }
</style>

<section
  id="challenge"
  class="relative overflow-hidden py-16 px-6 bg-gradient-to-br from-zinc-900 via-black to-zinc-950 border-l-4 border-red-400/80"
  aria-labelledby="challenge-heading"
  tabindex="-1"
>
  <!-- 1. Parallax background image -->
  <div
    class="absolute inset-0 -z-10 bg-[url('/static/images/gym-chutes.jpg')] bg-center bg-cover motion-safe:animate-kenburns"
    style="background-attachment: fixed"
    aria-hidden="true"
  ></div>

  <h2
    id="challenge-heading"
    class="text-2xl md:text-3xl font-bold text-red-400 mb-6 drop-shadow-lg"
    data-aos="fade-up"
    data-aos-delay="100"
  >
    The Challenge We Face
  </h2>

  <p
    class="text-lg text-white/80 max-w-3xl mx-auto mb-8 leading-relaxed"
    data-aos="fade-up"
    data-aos-delay="200"
  >
    Despite the love and energy behind our program, we struggle with consistent access to gym space
    and the high cost of tournament travel across states. These financial barriers place a heavy
    strain on our volunteer coaches and passionate parents — limiting the full potential of our kids
    to grow, bond, and succeed together.
  </p>

  <!-- 2. Impact metrics badges -->
  <div
    class="flex flex-wrap justify-center gap-6 mb-8"
    data-aos="fade-up"
    data-aos-delay="300"
    role="list"
  >
    <div
      class="flex flex-col items-center bg-zinc-800/70 px-6 py-4 rounded-xl shadow-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-red-400"
      tabindex="0"
      role="listitem"
      aria-label="120 plus hours of gym time lost"
    >
      <span class="text-3xl font-extrabold text-red-400" data-count="120">0</span>
      <span class="text-white/80 text-sm">Hours of Gym Time Lost</span>
    </div>
    <div
      class="flex flex-col items-center bg-zinc-800/70 px-6 py-4 rounded-xl shadow-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-red-400"
      tabindex="0"
      role="listitem"
      aria-label="800 tournament miles traveled"
    >
      <span class="text-3xl font-extrabold text-red-400" data-count="800">0</span>
      <span class="text-white/80 text-sm">Tournament Miles Traveled</span>
    </div>
  </div>

  <!-- 3. Animated progress bar -->
  <div
    class="max-w-2xl mx-auto mb-8"
    data-aos="fade-up"
    data-aos-delay="400"
    role="region"
    aria-labelledby="gym-rental-label"
  >
    <div id="gym-rental-label" class="text-sm text-white/70 mb-1 flex justify-between">
      <span>Gym Rental Funding</span>
      <span><strong id="gym-funded" aria-live="polite">45%</strong> funded</span>
    </div>
    <div
      class="w-full h-2 bg-zinc-800 rounded-full overflow-hidden"
      role="progressbar"
      aria-valuemin="0"
      aria-valuemax="100"
      aria-valuenow="45"
      aria-label="Gym Rental Funding progress bar"
    >
      <div
        id="gym-progress-bar-fill"
        class="h-full bg-red-400 transition-all duration-1000 ease-out"
        style="width: 0%"
      ></div>
    </div>
  </div>

  <!-- 4. Sponsor CTA -->
  <div class="text-center mb-12" data-aos="fade-up" data-aos-delay="500">
    <a
      href="mailto:arodgps@gmail.com?subject=Gym%20Space%20Sponsorship"
      class="inline-block bg-red-400 hover:bg-red-300 text-black font-bold px-8 py-3 rounded-full shadow-lg transition-transform hover:scale-105 focus-visible:ring-4 focus-visible:ring-red-300 focus:outline-none"
    >
      Sponsor a Practice
    </a>
  </div>

  <!-- 5. Parent testimonial pop-over -->
  <div
    class="relative max-w-3xl mx-auto"
    data-aos="fade-up"
    data-aos-delay="600"
  >
    <p class="text-xs text-white/60 italic">
      “Without enough court time, my son lost valuable training hours this season.”
    </p>
    <button
      type="button"
      class="absolute top-0 right-0 p-2 text-white/70 hover:text-white transition focus:outline-none focus:ring-2 focus:ring-red-400 rounded"
      aria-describedby="testimonial-pop"
      aria-expanded="false"
      aria-controls="testimonial-pop"
      id="testimonial-toggle"
      onmouseenter="showTestimonial(true)"
      onmouseleave="showTestimonial(false)"
      onfocus="showTestimonial(true)"
      onblur="showTestimonial(false)"
    >
      ℹ️
    </button>
    <div
      id="testimonial-pop"
      class="hidden absolute right-0 mt-10 w-64 p-4 bg-zinc-900/90 text-white text-sm rounded-lg shadow-lg"
      role="tooltip"
      aria-live="polite"
    >
      <strong>Team Parent, Class of 2030</strong><br />
      “We missed 8 practices this year due to no gym—every donation helps keep us on court!”
    </div>
  </div>
</section>

<script>
  // Animate count-up for badges
  document.addEventListener('DOMContentLoaded', () => {
    const counters = document.querySelectorAll('[data-count]');
    counters.forEach((el) => {
      const target = +el.getAttribute('data-count');
      let count = 0;
      const step = Math.max(1, Math.floor(target / 50));
      const interval = setInterval(() => {
        count += step;
        if (count >= target) {
          el.textContent = target;
          clearInterval(interval);
        } else {
          el.textContent = count;
        }
      }, 30);
    });

    // Animate progress bar fill
    const progressBarFill = document.getElementById('gym-progress-bar-fill');
    if (progressBarFill) {
      setTimeout(() => {
        progressBarFill.style.width = '45%';
      }, 500); // Delay to sync with AOS animation
    }
  });

  function showTestimonial(show) {
    const pop = document.getElementById('testimonial-pop');
    const toggle = document.getElementById('testimonial-toggle');
    if (show) {
      pop.classList.remove('hidden');
      toggle.setAttribute('aria-expanded', 'true');
    } else {
      pop.classList.add('hidden');
      toggle.setAttribute('aria-expanded', 'false');
    }
  }
</script>

{# templates/partials/sponsor_wall.html #}
<section
  id="sponsor-wall"
  role="region"
  aria-labelledby="sponsor-heading"
  class="bg-zinc-950/95 py-12 border-t border-zinc-800 text-center text-white"
  data-aos="fade-up"
  data-aos-delay="300"
>
  <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 space-y-8">

    <!-- Funding HUD -->
    <div id="funding-hud" class="w-full max-w-xl mx-auto">
      <div class="flex justify-between text-sm font-mono text-amber-200 mb-1">
        <span>Raised</span>
        <span>
          <span id="funding-raised-amount" aria-live="polite">${{ funding_raised or 0 }}</span> /
          <span id="funding-goal-amount">${{ funding_goal or 10000 }}</span>
        </span>
      </div>
      <div class="relative w-full h-4 rounded-full bg-zinc-800 overflow-hidden">
        <div 
          id="funding-progress-bar"
          class="absolute inset-y-0 left-0 bg-amber-400 shadow-gold transition-all duration-700"
          data-raised="{{ funding_raised or 0 }}"
          data-goal="{{ funding_goal or 10000 }}"
          role="progressbar"
          aria-valuemin="0"
          aria-valuemax="{{ funding_goal or 10000 }}"
          aria-valuenow="{{ funding_raised or 0 }}"
          style="width: {{ ((funding_raised or 0) / (funding_goal or 10000) * 100) | round(1) }}%;"
        ></div>
      </div>
    </div>

    <!-- Sponsor Section Header -->
    <header class="space-y-2">
      <h2
        id="sponsor-heading"
        class="text-2xl sm:text-3xl font-extrabold text-amber-400 tracking-tight"
      >
        Our Generous Sponsors
      </h2>
      <p class="text-sm sm:text-base text-amber-200">
        Every logo below represents a family or company that keeps our kids on the court—thank you!
      </p>
      <p id="sponsor-count" class="text-xs text-white/70 italic" aria-live="polite">
        {{ sponsors|length }} Sponsor{{ sponsors|length != 1 and 's' or '' }} and counting!
      </p>
    </header>

    {% if sponsors %}
    <div class="relative overflow-x-auto vendor-marquee">
      <ul class="inline-flex items-center gap-8 whitespace-nowrap py-4" aria-label="Sponsor logos">
        {% for sponsor in sponsors %}
        <li class="relative shrink-0">
          <a
            href="{{ sponsor.website or '#' }}"
            target="_blank"
            rel="noopener noreferrer"
            class="group inline-block"
            aria-label="Visit {{ sponsor.name }}"
          >
            <img
              src="{{ sponsor.logo_url }}"
              alt="{{ sponsor.name }} logo"
              class="h-16 sm:h-20 grayscale group-hover:grayscale-0 transition duration-300"
              loading="lazy"
              width="160"
              height="80"
            />
            {% if sponsor.tier == 'Platinum' %}
            <span class="absolute top-0 right-0 bg-amber-400 text-black text-xs font-bold px-1 rounded-bl">PLATINUM</span>
            {% endif %}
          </a>
        </li>
        {% endfor %}
      </ul>
    </div>
    {% else %}
    <ul class="grid grid-cols-3 sm:grid-cols-5 gap-6">
      {% for _ in range(5) %}
      <li class="h-16 sm:h-20 bg-zinc-800 animate-pulse rounded-lg"></li>
      {% endfor %}
    </ul>
    <p class="text-sm text-gray-400 mb-4">
      Your logo could be here—become a founding sponsor today!
    </p>
    {% endif %}

    <div>
      <a
        href="#donateModal"
        hx-get="/modal/sponsor"
        class="inline-flex items-center gap-2 rounded-lg bg-amber-400/90 px-6 py-2 text-sm font-semibold text-zinc-900 shadow-md hover:bg-amber-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 transition"
        aria-label="Become a Sponsor"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-4 w-4"
          fill="currentColor"
          viewBox="0 0 16 16"
          aria-hidden="true"
        >
          <path d="M8 0a8 8 0 100 16A8 8 0 008 0zM4 7.5h8v1H4v-1z" />
        </svg>
        Become a Sponsor
      </a>
    </div>
  </div>
</section>

<style>
  @keyframes m-arquee {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(calc(-1 * (100% - 100vw)));
    }
  }
  .vendor-marquee ul {
    animation: m-arquee 30s linear infinite;
  }
  .vendor-marquee:hover ul {
    animation-play-state: paused;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const marquee = document.querySelector('.vendor-marquee ul');
    if (!marquee) return;
    const totalW = marquee.scrollWidth;
    const viewport = document.documentElement.clientWidth;
    const duration = Math.max(20, (totalW / viewport) * 30);
    marquee.style.animationDuration = duration + 's';
  });
</script>

<div
  id="newsletterPopup"
  class="fixed inset-0 z-[9999] flex items-center justify-center bg-black bg-opacity-80 opacity-0 pointer-events-none transition-opacity duration-300"
  role="dialog"
  aria-modal="true"
  aria-labelledby="newsletterTitle"
  aria-describedby="newsletterDesc"
>
  <div
    class="bg-zinc-900 text-white rounded-lg shadow-xl max-w-sm w-full p-6 relative"
    role="document"
  >
    <button
      id="newsletterCloseBtn"
      aria-label="Close newsletter popup"
      class="absolute top-3 right-3 text-amber-400 hover:text-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-400 rounded"
      type="button"
    >
      &times;
    </button>
    <h2 id="newsletterTitle" class="text-2xl font-bold mb-2">Join Our Newsletter</h2>
    <p id="newsletterDesc" class="mb-4 text-white/80">
      Stay updated on our latest news and events.
    </p>
    <form id="newsletterForm" class="space-y-4" novalidate>
      <input
        type="email"
        aria-label="Email address"
        name="email"
        required
        placeholder="Your email"
        class="w-full rounded px-3 py-2 bg-zinc-800 text-white focus:outline-none focus:ring-2 focus:ring-amber-400"
      />
      <button
        type="submit"
        class="w-full bg-amber-400 text-black font-semibold rounded py-2 hover:bg-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-400 transition"
      >
        Subscribe
      </button>
    </form>
  </div>
</div>

<style>
  /* Visible popup */
  #newsletterPopup.show {
    opacity: 1 !important;
    pointer-events: auto !important;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const popup = document.getElementById("newsletterPopup");
    const closeBtn = document.getElementById("newsletterCloseBtn");
    const form = document.getElementById("newsletterForm");

    // Show popup after 5 seconds with fade-in
    setTimeout(() => {
      popup.classList.add("show");
      // Focus first input for accessibility
      form.email.focus();
    }, 5000);

    // Close popup handler
    closeBtn.addEventListener("click", () => {
      popup.classList.remove("show");
    });

    // Close on click outside content
    popup.addEventListener("click", (e) => {
      if (e.target === popup) {
        popup.classList.remove("show");
      }
    });

    // Trap focus inside popup for accessibility
    popup.addEventListener("keydown", (e) => {
      if (e.key === "Tab") {
        const focusableElements = popup.querySelectorAll(
          'a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])'
        );
        const firstElem = focusableElements[0];
        const lastElem = focusableElements[focusableElements.length - 1];
        if (e.shiftKey) {
          if (document.activeElement === firstElem) {
            lastElem.focus();
            e.preventDefault();
          }
        } else {
          if (document.activeElement === lastElem) {
            firstElem.focus();
            e.preventDefault();
          }
        }
      } else if (e.key === "Escape") {
        popup.classList.remove("show");
      }
    });

    // Handle form submission (stub)
    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const email = form.email.value.trim();
      if (email) {
        alert(`Thanks for subscribing, ${email}!`);
        form.reset();
        popup.classList.remove("show");
      } else {
        alert("Please enter a valid email address.");
      }
    });
  });
</script>

<body id="bodyRoot" class="bg-zinc-950 text-white font-sans antialiased fade-in dark:bg-black" aria-live="polite">
  <!-- 🔗 Accessible Skip Link -->
  <a
    href="#main-content"
    class="sr-only focus:not-sr-only fixed top-4 left-4 z-[9999] bg-amber-400 text-black font-bold px-4 py-2 rounded shadow-lg focus:outline-none focus-visible:ring-2 ring-black transition"
  >
    ⤵ Skip to Content
  </a>

  <!-- ─── Header ────────────────────────────── -->
  <header
    role="banner"
    class="sticky top-0 z-50 w-full bg-black/95 backdrop-blur-sm border-b border-amber-500/20 shadow-xl transition-all duration-300 ease-in-out"
  >
    <div class="max-w-7xl mx-auto flex items-center justify-between px-4 py-4 md:px-8">
      <!-- 🔰 Logo + Brand -->
      <a
        href="{{ url_for('main.index') }}"
        class="flex items-center gap-3 group focus:outline-none focus-visible:ring-2 ring-amber-400"
      >
        <img
          src="{{ url_for('static', filename='logo-atx-elite.png') }}"
          class="w-12 h-12 rounded-full shadow-md ring-2 ring-amber-400 group-hover:scale-105 transition-transform duration-200"
          loading="lazy"
          decoding="async"
          alt="Connect ATX Elite Logo"
        />
        <span
          class="text-2xl font-extrabold tracking-tight text-amber-400 drop-shadow-[0_2px_4px_rgba(250,204,21,0.25)] select-none"
          aria-label="Connect ATX Elite"
        >
          Connect ATX Elite
        </span>
      </a>

      <!-- 🧭 Desktop Nav -->
      <nav aria-label="Primary navigation" class="hidden md:flex items-center gap-8 text-lg font-medium">
        {% for link in ['about', 'tiers', 'testimonials', 'faq', 'contact'] %}
          <a
            href="#{{ link }}"
            class="text-white hover:text-amber-400 focus:text-amber-400 transition-colors duration-150"
          >
            {{ link.capitalize() }}
          </a>
        {% endfor %}
      </nav>

      <!-- 🟨 Sponsor CTA (Desktop) -->
      <div class="hidden md:block">
        <a
          href="#tiers"
          class="px-6 py-2 rounded-full bg-amber-400 text-black font-bold shadow-lg hover:bg-amber-300 focus-visible:ring-4 ring-amber-400 transition animate-glow"
        >
          Become a Sponsor
        </a>
      </div>

      <!-- 🌙 Dark Mode Toggle Button -->
      <button
        id="themeToggle"
        type="button"
        class="ml-4 rounded-full p-2 bg-zinc-800/80 backdrop-blur hover:bg-zinc-700 text-amber-400 shadow-lg focus-visible:ring-4 focus-visible:ring-amber-200 transition"
        aria-label="Toggle dark mode"
        title="Toggle light/dark mode"
      >
        🌙
      </button>

      <!-- 📱 Mobile Menu Button -->
      <button
        id="mobileMenuButton"
        type="button"
        class="md:hidden flex items-center text-amber-400 focus:outline-none focus-visible:ring-2 ring-amber-400 ml-2"
        aria-label="Open mobile navigation menu"
        aria-controls="mobile-menu"
        aria-expanded="false"
      >
        <svg class="w-8 h-8" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 8h16M4 16h16" />
        </svg>
      </button>
    </div>

    <!-- 📱 Mobile Menu -->
    <nav
      id="mobile-menu"
      class="md:hidden hidden px-4 pb-4 bg-black/95 border-t border-amber-500/20 animate-fade-in-down"
      aria-label="Mobile navigation"
      tabindex="-1"
    >
      {% for link in ['about', 'tiers', 'testimonials', 'faq', 'contact'] %}
        <a
          href="#{{ link }}"
          class="block py-2 text-lg text-white hover:text-amber-400 focus:text-amber-400 transition"
        >
          {{ link.capitalize() }}
        </a>
      {% endfor %}
      <a
        href="#tiers"
        class="block mt-4 py-2 px-6 text-center rounded-full bg-amber-400 text-black font-bold shadow-md hover:bg-amber-300 focus-visible:ring-2 ring-amber-400 transition"
      >
        Become a Sponsor
      </a>
    </nav>
  </header>

  <!-- ─── Scripts ───────────────────────────── -->
  <script>
    // Dark mode toggle logic
    (() => {
      const root = document.documentElement;
      const btn = document.getElementById('themeToggle');
      const stored = localStorage.getItem('theme');

      // Initialize button icon & theme on page load
      if (stored === 'dark' || (!stored && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        root.classList.add('dark');
        btn.textContent = '☀️';
      } else {
        btn.textContent = '🌙';
      }

      // Toggle theme on button click
      btn.addEventListener('click', () => {
        root.classList.toggle('dark');
        const isDark = root.classList.contains('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        btn.textContent = isDark ? '☀️' : '🌙';
      });
    })();

    // Mobile menu toggle logic
    (() => {
      const mobileBtn = document.getElementById('mobileMenuButton');
      const mobileMenu = document.getElementById('mobile-menu');

      mobileBtn.addEventListener('click', () => {
        const expanded = mobileBtn.getAttribute('aria-expanded') === 'true';
        mobileBtn.setAttribute('aria-expanded', String(!expanded));
        mobileMenu.classList.toggle('hidden');
        if (!expanded) {
          mobileMenu.focus();
        }
      });
    })();
  </script>

{# templates/partials/back_to_top_ball.html #}
<button
  id="back-to-top-ball"
  type="button"
  aria-label="Back to top"
  class="fixed bottom-6 right-6 w-14 h-14 z-[60] rounded-full bg-amber-400/90 backdrop-blur-sm shadow-xl opacity-0 pointer-events-none scale-95 translate-y-6 transition-all duration-300 ease-out hover:scale-110 hover:shadow-2xl focus:outline-none focus-visible:ring-4 focus-visible:ring-amber-300"
>
  <img
    src="{{ url_for('static', filename='images/ball.png') }}"
    alt=""
    aria-hidden="true"
    class="w-9 h-9 mx-auto pointer-events-none select-none"
    loading="lazy"
  />
  <span class="sr-only">Back to top</span>
</button>

<section
  id="faq"
  class="bg-black py-12 text-white"
  aria-labelledby="faq-heading"
  data-aos="fade-up"
  data-aos-delay="100"
>
  <div class="max-w-2xl mx-auto px-4">
    <h2 id="faq-heading" class="text-2xl font-bold text-amber-400 mb-6 text-center">
      Frequently Asked Questions
    </h2>

    <!-- 1. Search filter -->
    <div class="mb-6">
      <label for="faq-search" class="sr-only">Search FAQs</label>
      <input
        id="faq-search"
        type="search"
        placeholder="Search questions…"
        aria-label="Search FAQs"
        class="w-full bg-zinc-800 rounded-full px-4 py-2 placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-amber-400"
      />
    </div>

    <ul class="divide-y divide-zinc-700" id="faq-list">
      {% set faqs = [
        {"q":"Can I sponsor anonymously?","a":"Absolutely — just let us know in your message or donation form."},
        {"q":"How are donations used?","a":"100% supports gym rental, tournament fees, travel costs, academic programs, and gear for our student-athletes."},
        {"q":"How do I become a sponsor?","a":"Use the “Become a Sponsor” button or email us — we’ll reach out to personalize your sponsorship!"}
      ] %}
      {% for faq in faqs %}
      <li class="py-4">
        <button
          type="button"
          class="faq-toggle flex w-full justify-between items-center text-left font-medium focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-400"
          aria-expanded="false"
          aria-controls="panel-{{ loop.index }}"
          id="panel-{{ loop.index }}-label"
          data-target="panel-{{ loop.index }}"
        >
          <span>{{ faq.q }}</span>
          <svg
            class="w-5 h-5 transform transition-transform"
            aria-hidden="true"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"
            />
          </svg>
        </button>
        <div
          id="panel-{{ loop.index }}"
          class="mt-2 pr-8 text-zinc-300 hidden"
          role="region"
          aria-labelledby="panel-{{ loop.index }}-label"
        >
          <p>{{ faq.a }}</p>
        </div>
      </li>
      {% endfor %}
    </ul>

    <!-- 5. Quick-help chat -->
    <div class="mt-8 text-center">
      <a
        href="https://wa.me/15128200475?text=Hi%20Connect%20ATX%20Elite!"
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center gap-2 bg-green-500 hover:bg-green-600 text-white font-semibold px-5 py-3 rounded-full shadow-md transition"
        aria-label="Chat with us on WhatsApp"
      >
        💬 Live Chat Help
      </a>
    </div>
  </div>
</section>

<script>
  // Accordion toggle behavior with aria updates
  document.querySelectorAll('.faq-toggle').forEach((btn) => {
    btn.addEventListener('click', () => {
      const expanded = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!expanded));
      btn.querySelector('svg').classList.toggle('rotate-180', !expanded);
      const panel = document.getElementById(btn.dataset.target);
      if (expanded) {
        panel.classList.add('hidden');
        panel.setAttribute('hidden', '');
      } else {
        panel.classList.remove('hidden');
        panel.removeAttribute('hidden');
      }
    });
  });

  // Live search filter for FAQ questions
  document.getElementById('faq-search').addEventListener('input', (e) => {
    const term = e.target.value.toLowerCase();
    document.querySelectorAll('#faq-list li').forEach((li) => {
      const question = li.querySelector('.faq-toggle span').textContent.toLowerCase();
      li.style.display = question.includes(term) ? '' : 'none';
    });
  });
</script>

{# templates/partials/donation_modal.html — Enhanced Donation Modal #}
<dialog
  id="donateDialog"
  aria-modal="true"
  aria-labelledby="donateDialogTitle"
  class="w-full max-w-md p-0 rounded-2xl overflow-hidden shadow-xl backdrop:bg-black/60 z-[45]"
>
  <form id="donateForm" method="dialog" class="bg-zinc-900 text-white">
    <header class="flex justify-between items-center px-6 py-4 bg-amber-400 text-black">
      <h3 id="donateDialogTitle" class="text-lg font-bold">Support the Team 🏀</h3>
      <button
        type="button"
        class="text-2xl leading-none focus:outline-none focus:ring-2 focus:ring-amber-500 rounded"
        aria-label="Close"
        tabindex="0"
      >
        &times;
      </button>
    </header>
    <div class="px-6 py-4 space-y-4">
      <p class="text-sm text-white/75">100% of proceeds cover gym time & travel.</p>

      <label class="block">
        <span class="text-sm">Your Email (receipt)</span>
        <input
          name="email"
          type="email"
          required
          class="mt-1 w-full px-3 py-2 bg-zinc-800 rounded focus:ring-2 focus:ring-amber-400"
          autocomplete="email"
        />
      </label>

      <label class="block">
        <span class="text-sm">Amount (USD)</span>
        <input
          name="amount"
          type="number"
          min="1"
          max="999"
          value="25"
          required
          class="mt-1 w-full px-3 py-2 bg-zinc-800 rounded focus:ring-2 focus:ring-amber-400"
          autocomplete="off"
          inputmode="numeric"
        />
      </label>

      <button
        id="stripeBtn"
        type="submit"
        class="w-full inline-block text-center bg-amber-400 text-black font-semibold py-2 rounded-lg shadow transition hover:bg-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-500"
        data-stripe
      >
        Donate with Card
      </button>

      <hr class="border-zinc-700" />

      <a
        href="{{ paypal_link or '#' }}"
        class="w-full block text-center bg-blue-600 text-white font-semibold py-2 rounded-lg shadow transition hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-400"
        target="_blank"
        rel="noopener noreferrer"
      >
        Donate with PayPal
      </a>
    </div>
  </form>
</dialog>

<style>
  /* Dialog z-index layering */
  #donateDialog {
    z-index: 100000 !important;
  }
  /* Native dialog backdrop styling */
  #donateDialog::backdrop {
    background: rgba(0, 0, 0, 0.55);
    z-index: 44 !important;
  }
  /* Responsive full width on small screens */
  @media (max-width: 500px) {
    #donateDialog {
      max-width: 98vw;
      border-radius: 1rem;
    }
  }
</style>

<script defer type="module">
  import confetti from 'https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/+esm';
  import { loadStripe } from 'https://js.stripe.com/v3/';

  (async () => {
    const stripe = await loadStripe('{{ stripe_publishable }}');
    const dialog = document.getElementById('donateDialog');
    const form = document.getElementById('donateForm');

    // Open dialog on any element with [data-open-donate] attribute
    document.querySelectorAll('[data-open-donate]').forEach(btn => {
      btn.addEventListener('click', () => {
        const amount = btn.dataset.amount || '25';
        dialog.querySelector('input[name=amount]').value = amount;
        dialog.showModal();
        confetti({ particleCount: 80, spread: 60, origin: { y: 0.6 } });
      });
    });

    // Close dialog on close button click
    dialog.querySelector('button[aria-label="Close"]').onclick = () => dialog.close();

    // Close dialog on outside click
    dialog.addEventListener('click', e => {
      if (e.target === dialog) dialog.close();
    });

    // Prevent dialog from closing on ESC (optional, can be removed if you want ESC to close)
    dialog.addEventListener('cancel', e => e.preventDefault());

    // Handle form submission and trigger Stripe Checkout
    form.addEventListener('submit', async e => {
      e.preventDefault();
      const email = form.email.value;
      const amount = parseInt(form.amount.value, 10);
      if (!amount || amount < 1 || amount > 999) {
        alert('Please enter a valid donation amount between $1 and $999.');
        return;
      }
      const res = await fetch('/api/create-checkout', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ amount, email }),
      });
      const { session_id } = await res.json();
      await stripe.redirectToCheckout({ sessionId: session_id });
    });

    // Trap focus within dialog for accessibility
    dialog.addEventListener('keydown', e => {
      if (e.key === 'Tab') {
        const focusable = Array.from(dialog.querySelectorAll('input, button, a'));
        const idx = focusable.indexOf(document.activeElement);
        let next = idx + (e.shiftKey ? -1 : 1);
        if (next < 0) next = focusable.length - 1;
        if (next >= focusable.length) next = 0;
        focusable[next].focus();
        e.preventDefault();
      }
    });
  })();
</script>

<section
  id="about"
  class="py-24 px-6 bg-zinc-950 text-white space-y-20"
  role="region"
  aria-labelledby="about-heading"
  tabindex="-1"
>
  <!-- 🎯 Our Mission -->
  <div class="max-w-5xl mx-auto space-y-6" data-aos="fade-up" data-aos-delay="100">
    <h2 id="about-heading" class="text-3xl sm:text-4xl font-bold text-amber-400">
      Our Mission
    </h2>
    <p class="text-lg sm:text-xl leading-relaxed text-white/90">
      Connect ATX Elite is a community‑powered, non‑profit <strong>12U AAU</strong> basketball program based
      in Austin, TX. We develop not only skilled athletes, but confident, disciplined, and
      academically driven young leaders.
    </p>
    <p class="text-lg sm:text-xl leading-relaxed text-white/70">
      Many of our boys are honor‑roll students thriving in a positive environment of teamwork,
      mentorship, and integrity. Through basketball we teach life lessons that extend far beyond the
      court.
    </p>
  </div>

  <!-- ⭐️ Impact Stats -->
  <div
    class="max-w-5xl mx-auto"
    data-aos="fade-up"
    data-aos-delay="300"
    aria-label="Program Impact Stats"
    role="list"
  >
    <div class="flex flex-wrap justify-center gap-8 md:gap-14 py-8">
      {% set impact = [
        {"label": "Players Enrolled", "value": 16},
        {"label": "Honor Roll Scholars", "value": 11},
        {"label": "Tournaments Played", "value": 12},
        {"label": "Years Running", "value": 3}
      ] %}
      {% for stat in impact %}
      <div
        class="bg-zinc-900/80 border border-amber-400/20 shadow-gold rounded-xl px-8 py-6 min-w-[150px] text-center focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-400"
        tabindex="0"
        role="listitem"
        aria-label="{{ stat.value }} {{ stat.label }}"
      >
        <div
          class="text-3xl font-extrabold text-amber-400"
          data-count="{{ stat.value }}"
          id="countup-{{ loop.index0 }}"
          >0</div>
        <div class="text-white/80 text-base font-medium">{{ stat.label }}</div>
      </div>
      {% endfor %}
    </div>
  </div>

  <!-- 🟧 Divider -->
  <div
    class="w-16 h-1 mx-auto rounded-full bg-gradient-to-r from-amber-400/60 to-amber-300/60"
    data-aos="fade-up"
    data-aos-delay="450"
    aria-hidden="true"
  ></div>

  <!-- ⚠️ Challenge with Tooltip Enhancement -->
  <div class="max-w-5xl mx-auto" data-aos="fade-up" data-aos-delay="550">
    <div
      class="group relative rounded-2xl shadow-lg bg-gradient-to-br from-zinc-900 via-black to-zinc-950 border-l-4 border-red-400/80 px-7 py-8 space-y-6 cursor-help focus:outline-none focus-visible:ring-2 focus-visible:ring-red-400"
      role="region"
      aria-labelledby="challenge-heading"
      tabindex="0"
      aria-describedby="challenge-tooltip"
    >
      <h3 id="challenge-heading" class="text-2xl sm:text-3xl font-semibold text-red-400">
        The Challenge We Face
      </h3>
      <p class="text-lg sm:text-xl leading-relaxed text-white/80">
        We struggle with consistent gym space and the high cost of tournament travel. These barriers
        strain our volunteer coaches and parents — limiting our kids’ ability to grow, bond, and
        succeed together.
      </p>

      <!-- Tooltip -->
      <div
        id="challenge-tooltip"
        role="tooltip"
        class="absolute left-1/2 bottom-full mb-3 w-72 rounded-md bg-black/90 px-4 py-3 text-sm text-amber-200 shadow-lg opacity-0 pointer-events-none transition-opacity duration-300 group-hover:opacity-100 group-focus:opacity-100 -translate-x-1/2"
      >
        Help us secure resources to expand gym access, reduce travel costs, and invest in our coaches.
      </div>
    </div>
  </div>

  <!-- 💡 Impact supporters can make -->
  <div class="max-w-5xl mx-auto space-y-6" data-aos="fade-up" data-aos-delay="700">
    <h3 class="text-2xl sm:text-3xl font-semibold text-green-400">The Impact You Can Make</h3>
    <ul class="list-disc list-inside space-y-2 text-lg sm:text-xl text-white/85 pl-4 md:pl-8" role="list">
      <li>Secure a consistent gym space for practices</li>
      <li>Support travel & lodging costs for tournaments</li>
      <li>Provide uniforms, gear, meals, and hydration</li>
      <li>Fund academic support and mentorship programs</li>
    </ul>
    <p class="pt-4 text-lg sm:text-xl font-semibold text-white">
      With your help, we can give these young athletes the foundation to become confident,
      accomplished leaders.
    </p>
  </div>

  <!-- ✨ Call to Action Button -->
  <div class="max-w-5xl mx-auto text-center" data-aos="fade-up" data-aos-delay="850">
    <a
      href="#tiers"
      class="inline-block bg-amber-400 hover:bg-amber-300 text-black font-extrabold px-12 py-4 rounded-3xl shadow-[0_0_25px_#facc15] focus-visible:ring-4 ring-amber-300 transition-transform transform-gpu hover:scale-105 animate-pulse-slow"
      aria-label="Become a Sponsor"
    >
      Become a Sponsor & Support Our Mission
    </a>
  </div>
</section>

<script>
  // Animated count-up for stats
  document.addEventListener('DOMContentLoaded', () => {
    const counters = document.querySelectorAll('[data-count]');
    counters.forEach((el) => {
      const target = +el.getAttribute('data-count');
      let count = 0;
      const step = Math.max(1, Math.floor(target / 50));
      const interval = setInterval(() => {
        count += step;
        if (count >= target) {
          el.textContent = target;
          clearInterval(interval);
        } else {
          el.textContent = count;
        }
      }, 30);
    });
  });
</script>

<section
  id="goal"
  class="relative isolate overflow-hidden rounded-3xl bg-luxe-night/90 p-6 text-center text-white shadow-2xl"
  data-aos="fade-up"
  data-aos-delay="300"
>
  <!-- 1. Radial gauge background -->
  <svg class="absolute inset-0 w-full h-full -z-10" viewBox="0 0 200 200" aria-hidden="true" focusable="false">
    <defs>
      <linearGradient id="gauge-gradient" x1="1" y1="0" x2="0" y2="1">
        <stop offset="0%" stop-color="#facc15" />
        <stop offset="100%" stop-color="#4ade80" />
      </linearGradient>
    </defs>
    <circle cx="100" cy="100" r="90" stroke="rgba(255,255,255,0.05)" stroke-width="20" fill="none" />
    <circle
      id="gauge-arc"
      cx="100"
      cy="100"
      r="90"
      stroke="url(#gauge-gradient)"
      stroke-width="20"
      stroke-dasharray="565.48"
      stroke-dashoffset="565.48"
      fill="none"
      transform="rotate(-90 100 100)"
    />
  </svg>

  <h2 class="text-xl font-bold mb-2">Season Goal</h2>

  <!-- 2. Dynamic percentage label -->
  <p class="text-3xl font-mono" id="goal-amount" aria-live="polite" aria-atomic="true">$7,900 / $10,000</p>

  <!-- 3. Animated progress bar -->
  <progress
    id="goal-bar"
    value="0"
    max="10000"
    class="w-full h-4 mt-4 rounded-full bg-zinc-800"
    aria-valuemin="0"
    aria-valuemax="10000"
    aria-valuenow="0"
    role="progressbar"
    aria-label="Progress towards season goal"
  ></progress>

  <!-- 4. Live donor ticker -->
  <div
    id="donor-ticker"
    class="mt-4 text-sm italic text-white/70 overflow-hidden whitespace-nowrap"
    style="mask-image: linear-gradient(to right, transparent, white 20%, white 80%, transparent)"
    aria-label="Latest donors ticker"
  >
    🚨 Latest donors: Alex M., Jamie R., Taylor S., Morgan L., …
  </div>
</section>

<script>
(() => {
  const totalGoal = 10000;
  let current = 7900; // initial funding amount

  // Animate numeric count in label
  function animateValue(el, start, end, duration) {
    const range = end - start;
    let startTime = null;
    function step(timestamp) {
      if (!startTime) startTime = timestamp;
      const progress = Math.min((timestamp - startTime) / duration, 1);
      el.textContent = `$${Math.floor(start + progress * range).toLocaleString()} / $${totalGoal.toLocaleString()}`;
      if (progress < 1) {
        requestAnimationFrame(step);
      }
    }
    requestAnimationFrame(step);
  }

  // Elements
  const section = document.getElementById('goal');
  const gaugeArc = document.getElementById('gauge-arc');
  const progressBar = document.getElementById('goal-bar');
  const label = document.getElementById('goal-amount');

  // IntersectionObserver to animate when in viewport
  const observer = new IntersectionObserver((entries, obs) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        // Animate radial gauge arc stroke
        const dashOffset = 565.48 * (1 - current / totalGoal);
        gaugeArc.style.transition = 'stroke-dashoffset 1.5s ease-out';
        gaugeArc.style.strokeDashoffset = dashOffset;

        // Animate progress bar
        progressBar.max = totalGoal;
        progressBar.value = 0;
        progressBar.style.transition = 'value 1.5s ease-out';
        setTimeout(() => (progressBar.value = current), 50);

        // Animate numeric label count up
        animateValue(label, 0, current, 1500);

        // Confetti celebration milestones
        [0.5, 0.75, 1].forEach(ratio => {
          if (current / totalGoal >= ratio) {
            import('https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/+esm').then(({ default: confetti }) => {
              confetti({
                particleCount: 50,
                spread: 40,
                origin: { y: 0.6 },
                colors: ['#facc15', '#4ade80', '#0a0a0a']
              });
            });
          }
        });

        obs.disconnect(); // animate only once
      }
    });
  }, { threshold: 0.4 });
  observer.observe(section);

  // Optional: Socket.IO live update listener for donations
  if (window.io) {
    const socket = window.io();
    socket.on('donation_update', ({ total }) => {
      current = total;
      progressBar.value = total;
      label.textContent = `$${total.toLocaleString()} / $${totalGoal.toLocaleString()}`;
      gaugeArc.style.strokeDashoffset = 565.48 * (1 - total / totalGoal);
    });
  }

  // Donor ticker scroll effect
  const ticker = document.getElementById('donor-ticker');
  let offset = 0;
  setInterval(() => {
    offset = (offset + 1) % ticker.scrollWidth;
    ticker.scrollLeft = offset;
  }, 50);
})();
</script>

{# templates/partials/testimonials.html #}
<section
  id="testimonials"
  class="relative isolate bg-gradient-to-br from-zinc-800 to-black py-24 px-6 text-white"
  role="region"
  aria-labelledby="testimonials-heading"
  tabindex="-1"
>
  <div class="max-w-5xl mx-auto text-center space-y-12">
    {# ⭐️ Social-proof badge #}
    <div
      class="flex justify-center items-center gap-1 text-2xl text-amber-400 animate-sparkle select-none"
      aria-hidden="true"
    >
      {% for _ in range(5) %}<span>★</span>{% endfor %}
      <span class="ml-2 text-base font-semibold text-amber-200">(5.0)</span>
    </div>

    <h2 id="testimonials-heading" class="text-3xl sm:text-4xl font-bold text-amber-400">
      What They’re Saying
    </h2>

    {# ── Carousel ──────────────────────────────── #}
    <div class="relative max-w-3xl mx-auto">
      <figure
        id="quoteBox"
        class="relative italic text-lg sm:text-xl text-white/90 rounded-xl p-8 bg-zinc-900/70 shadow-lg outline-none select-text transition-opacity duration-500"
        aria-live="polite"
        aria-atomic="true"
        tabindex="0"
      >
        <span
          id="confettiEmoji"
          class="absolute -top-4 left-1/2 -translate-x-1/2 opacity-0 transition-opacity duration-700 pointer-events-none"
          aria-hidden="true"
        >🎉🎊✨</span>

        <blockquote id="quoteText">Loading…</blockquote>
        <figcaption id="quoteAuthor" class="mt-4 text-sm font-medium text-amber-300"></figcaption>

        <button
          id="copyQuoteBtn"
          class="mt-4 text-xs text-amber-400 underline hover:text-amber-200 focus:outline-offset-4"
          aria-label="Copy testimonial to clipboard"
        >
          Copy Quote
        </button>
      </figure>

      <div class="flex justify-center mt-6 gap-2">
        {% for i in range(3) %}
        <button
          class="carousel-dot w-3 h-3 rounded-full border-2 border-amber-400 transition-transform duration-200 {% if i == 0 %}bg-amber-400 scale-110{% else %}bg-zinc-700{% endif %}"
          data-idx="{{ i }}"
          aria-label="Show testimonial {{ i + 1 }}"
        ></button>
        {% endfor %}
      </div>
    </div>

    <img
      src="https://static.wixstatic.com/media/2f0953_5d94082989fb4c4eb31f7f440de183c2~mv2.jpg/v1/fill/w_1100,h_1034,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/IMG_2031.jpg"
      alt="Team showing off championship rings"
      width="480"
      height="320"
      loading="lazy"
      class="rounded-2xl shadow-2xl ring-4 ring-amber-300/50 object-cover mx-auto"
    />
  </div>
</section>

<script defer type="module">
  import confetti from 'https://cdn.skypack.dev/canvas-confetti@1.6.0';

  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const testimonials = [
    {
      q: 'Winning felt amazing — but it’s being part of a team that believes in you that means the most.',
      a: 'Connect ATX Elite Player, Class of 2030'
    },
    {
      q: 'Being part of Connect ATX Elite helps me stay focused in school and basketball. I want to make my family proud.',
      a: 'Honor-Roll Scholar-Athlete'
    },
    {
      q: 'I’ve seen real changes in my son — he’s more disciplined, focused, and confident in class and in life.',
      a: 'Team Parent'
    }
  ];

  let idx = 0, autoTimer;
  const quoteEl = document.getElementById('quoteText');
  const authorEl = document.getElementById('quoteAuthor');
  const dots = Array.from(document.querySelectorAll('.carousel-dot'));
  const emoji = document.getElementById('confettiEmoji');
  const box = document.getElementById('quoteBox');

  function show(i, animate = true) {
    idx = (i + testimonials.length) % testimonials.length;
    quoteEl.textContent = `“${testimonials[idx].q}”`;
    authorEl.textContent = `— ${testimonials[idx].a}`;
    dots.forEach((d, j) => {
      d.classList.toggle('bg-amber-400', j === idx);
      d.classList.toggle('scale-110', j === idx);
      d.classList.toggle('bg-zinc-700', j !== idx);
    });
    if (animate && !prefersReduced) {
      box.style.opacity = 0;
      setTimeout(() => (box.style.opacity = 1), 50);
    }
  }

  dots.forEach((d) =>
    d.addEventListener('click', () => {
      clearInterval(autoTimer);
      show(+d.dataset.idx);
      startAuto();
    })
  );

  box.addEventListener('keydown', (e) => {
    if (['ArrowRight', 'ArrowDown'].includes(e.key)) show(idx + 1);
    if (['ArrowLeft', 'ArrowUp'].includes(e.key)) show(idx - 1);
  });

  let startX = null;
  box.addEventListener('touchstart', (e) => (startX = e.touches[0].clientX), { passive: true });
  box.addEventListener(
    'touchend',
    (e) => {
      if (startX === null) return;
      const delta = e.changedTouches[0].clientX - startX;
      if (Math.abs(delta) > 50) show(delta < 0 ? idx + 1 : idx - 1);
      startX = null;
    },
    { passive: true }
  );

  document.getElementById('copyQuoteBtn').addEventListener('click', async () => {
    await navigator.clipboard.writeText(`${testimonials[idx].q} — ${testimonials[idx].a}`);
    if (prefersReduced) return;
    emoji.style.opacity = 1;
    confetti({
      particleCount: 140,
      spread: 60,
      origin: { y: 0.7 },
      colors: ['#facc15', '#fde68a', '#0a0a0a'],
      disableForReducedMotion: true
    });
    setTimeout(() => (emoji.style.opacity = 0), 1200);
  });

  function startAuto() {
    if (prefersReduced) return;
    autoTimer = setInterval(() => show(idx + 1, false), 8000);
  }
  box.addEventListener('mouseenter', () => clearInterval(autoTimer));
  box.addEventListener('mouseleave', startAuto);
  box.addEventListener('focusin', () => clearInterval(autoTimer));
  box.addEventListener('focusout', startAuto);

  show(0, false);
  startAuto();
</script>

{# templates/partials/stat.html #}
<section
  id="testimonials"
  class="relative isolate bg-gradient-to-br from-zinc-800 to-black py-24 px-6 text-white"
  role="region"
  aria-labelledby="testimonials-heading"
  tabindex="-1"
>
  <div class="max-w-5xl mx-auto text-center space-y-12">
    {# ⭐️ Social-proof badge #}
    <div
      class="flex justify-center items-center gap-1 text-2xl text-amber-400 animate-sparkle select-none"
      aria-hidden="true"
    >
      {% for _ in range(5) %}<span>★</span>{% endfor %}
      <span class="ml-2 text-base font-semibold text-amber-200">(5.0)</span>
    </div>

    <h2 id="testimonials-heading" class="text-3xl sm:text-4xl font-bold text-amber-400">
      What They’re Saying
    </h2>

    {# ── Carousel ──────────────────────────────── #}
    <div class="relative max-w-3xl mx-auto">
      <figure
        id="quoteBox"
        class="relative italic text-lg sm:text-xl text-white/90 rounded-xl p-8 bg-zinc-900/70 shadow-lg outline-none select-text transition-opacity duration-500"
        aria-live="polite"
        aria-atomic="true"
        tabindex="0"
      >
        <span
          id="confettiEmoji"
          class="absolute -top-4 left-1/2 -translate-x-1/2 opacity-0 transition-opacity duration-700 pointer-events-none"
          aria-hidden="true"
        >🎉🎊✨</span>

        <blockquote id="quoteText">Loading…</blockquote>
        <figcaption id="quoteAuthor" class="mt-4 text-sm font-medium text-amber-300"></figcaption>

        <button
          id="copyQuoteBtn"
          class="mt-4 text-xs text-amber-400 underline hover:text-amber-200 focus:outline-offset-4"
          aria-label="Copy testimonial to clipboard"
        >
          Copy Quote
        </button>
      </figure>

      <div class="flex justify-center mt-6 gap-2">
        {% for i in range(3) %}
        <button
          class="carousel-dot w-3 h-3 rounded-full border-2 border-amber-400 transition-transform duration-200 {% if i == 0 %}bg-amber-400 scale-110{% else %}bg-zinc-700{% endif %}"
          data-idx="{{ i }}"
          aria-label="Show testimonial {{ i + 1 }}"
        ></button>
        {% endfor %}
      </div>
    </div>

    <img
      src="https://static.wixstatic.com/media/2f0953_5d94082989fb4c4eb31f7f440de183c2~mv2.jpg/v1/fill/w_1100,h_1034,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/IMG_2031.jpg"
      alt="Team showing off championship rings"
      width="480"
      height="320"
      loading="lazy"
      class="rounded-2xl shadow-2xl ring-4 ring-amber-300/50 object-cover mx-auto"
    />
  </div>
</section>

<section id="stats" class="py-24 px-6 bg-black text-white" role="region" aria-label="Team statistics">
  <div class="max-w-4xl mx-auto flex flex-wrap justify-center gap-10 text-center">
    {% set stats = [
      ('16', 'Players Enrolled'),
      ('11', 'Honor Roll Scholars'),
      ('12', 'Tournaments Played'),
      ('3', 'Years Running')
    ] %}
    {% for number, label in stats %}
    <div
      class="stat-card transform transition duration-300 hover:scale-105"
      data-aos="zoom-in"
      data-aos-delay="{{ loop.index0 * 100 }}"
      tabindex="0"
      role="group"
      aria-label="{{ number }} {{ label }}"
    >
      <div class="text-4xl font-extrabold text-amber-400 drop-shadow">{{ number }}</div>
      <div class="mt-1 text-base text-white/80 font-medium">{{ label }}</div>
    </div>
    {% endfor %}
  </div>
</section>

<script defer type="module">
  import confetti from 'https://cdn.skypack.dev/canvas-confetti@1.6.0';

  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const testimonials = [
    {
      q: 'Winning felt amazing — but it’s being part of a team that believes in you that means the most.',
      a: 'Connect ATX Elite Player, Class of 2030'
    },
    {
      q: 'Being part of Connect ATX Elite helps me stay focused in school and basketball. I want to make my family proud.',
      a: 'Honor-Roll Scholar-Athlete'
    },
    {
      q: 'I’ve seen real changes in my son — he’s more disciplined, focused, and confident in class and in life.',
      a: 'Team Parent'
    }
  ];

  let idx = 0,
    autoTimer;
  const quoteEl = document.getElementById('quoteText');
  const authorEl = document.getElementById('quoteAuthor');
  const dots = Array.from(document.querySelectorAll('.carousel-dot'));
  const emoji = document.getElementById('confettiEmoji');
  const box = document.getElementById('quoteBox');

  function show(i, animate = true) {
    idx = (i + testimonials.length) % testimonials.length;
    quoteEl.textContent = `“${testimonials[idx].q}”`;
    authorEl.textContent = `— ${testimonials[idx].a}`;
    dots.forEach((d, j) => {
      d.classList.toggle('bg-amber-400', j === idx);
      d.classList.toggle('scale-110', j === idx);
      d.classList.toggle('bg-zinc-700', j !== idx);
    });
    if (animate && !prefersReduced) {
      box.style.opacity = 0;
      setTimeout(() => (box.style.opacity = 1), 50);
    }
  }

  dots.forEach((d) =>
    d.addEventListener('click', () => {
      clearInterval(autoTimer);
      show(+d.dataset.idx);
      startAuto();
    })
  );

  box.addEventListener('keydown', (e) => {
    if (['ArrowRight', 'ArrowDown'].includes(e.key)) show(idx + 1);
    if (['ArrowLeft', 'ArrowUp'].includes(e.key)) show(idx - 1);
  });

  let startX = null;
  box.addEventListener('touchstart', (e) => (startX = e.touches[0].clientX), { passive: true });
  box.addEventListener(
    'touchend',
    (e) => {
      if (startX === null) return;
      const delta = e.changedTouches[0].clientX - startX;
      if (Math.abs(delta) > 50) show(delta < 0 ? idx + 1 : idx - 1);
      startX = null;
    },
    { passive: true }
  );

  document.getElementById('copyQuoteBtn').addEventListener('click', async () => {
    await navigator.clipboard.writeText(`${testimonials[idx].q} — ${testimonials[idx].a}`);
    if (prefersReduced) return;
    emoji.style.opacity = 1;
    confetti({
      particleCount: 140,
      spread: 60,
      origin: { y: 0.7 },
      colors: ['#facc15', '#fde68a', '#0a0a0a'],
      disableForReducedMotion: true
    });
    setTimeout(() => (emoji.style.opacity = 0), 1200);
  });

  function startAuto() {
    if (prefersReduced) return;
    autoTimer = setInterval(() => show(idx + 1, false), 8000);
  }
  box.addEventListener('mouseenter', () => clearInterval(autoTimer));
  box.addEventListener('mouseleave', startAuto);
  box.addEventListener('focusin', () => clearInterval(autoTimer));
  box.addEventListener('focusout', startAuto);

  show(0, false);
  startAuto();
</script>

<section
  id="testimonials"
  class="relative isolate bg-gradient-to-br from-zinc-800 to-black py-24 px-6 text-white"
  role="region"
  aria-labelledby="testimonials-heading"
  tabindex="-1"
>
  <div class="max-w-5xl mx-auto text-center space-y-12">
    {# ⭐️ Social-proof badge #}
    <div
      class="flex justify-center items-center gap-1 text-2xl text-amber-400 animate-sparkle select-none"
      aria-hidden="true"
    >
      {% for _ in range(5) %}<span>★</span>{% endfor %}
      <span class="ml-2 text-base font-semibold text-amber-200">(5.0)</span>
    </div>

    <h2 id="testimonials-heading" class="text-3xl sm:text-4xl font-bold text-amber-400">
      What They’re Saying
    </h2>

    {# ── Carousel ──────────────────────────────── #}
    <div class="relative max-w-3xl mx-auto">
      <figure
        id="quoteBox"
        class="relative italic text-lg sm:text-xl text-white/90 rounded-xl p-8 bg-zinc-900/70 shadow-lg outline-none select-text transition-opacity duration-500"
        aria-live="polite"
        aria-atomic="true"
        tabindex="0"
      >
        <span
          id="confettiEmoji"
          class="absolute -top-4 left-1/2 -translate-x-1/2 opacity-0 transition-opacity duration-700 pointer-events-none"
          aria-hidden="true"
        >🎉🎊✨</span>

        <blockquote id="quoteText">Loading…</blockquote>
        <figcaption id="quoteAuthor" class="mt-4 text-sm font-medium text-amber-300"></figcaption>

        <button
          id="copyQuoteBtn"
          class="mt-4 text-xs text-amber-400 underline hover:text-amber-200 focus:outline-offset-4"
          aria-label="Copy testimonial to clipboard"
        >
          Copy Quote
        </button>
      </figure>

      <div class="flex justify-center mt-6 gap-2">
        {% for i in range(3) %}
        <button
          class="carousel-dot w-3 h-3 rounded-full border-2 border-amber-400 transition-transform duration-200 {% if i == 0 %}bg-amber-400 scale-110{% else %}bg-zinc-700{% endif %}"
          data-idx="{{ i }}"
          aria-label="Show testimonial {{ i + 1 }}"
        ></button>
        {% endfor %}
      </div>
    </div>

    <img
      src="https://static.wixstatic.com/media/2f0953_5d94082989fb4c4eb31f7f440de183c2~mv2.jpg/v1/fill/w_1100,h_1034,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/IMG_2031.jpg"
      alt="Team showing off championship rings"
      width="480"
      height="320"
      loading="lazy"
      class="rounded-2xl shadow-2xl ring-4 ring-amber-300/50 object-cover mx-auto"
    />
  </div>
</section>

<script defer type="module">
  import confetti from 'https://cdn.skypack.dev/canvas-confetti@1.6.0';

  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const testimonials = [
    {
      q: 'Winning felt amazing — but it’s being part of a team that believes in you that means the most.',
      a: 'Connect ATX Elite Player, Class of 2030'
    },
    {
      q: 'Being part of Connect ATX Elite helps me stay focused in school and basketball. I want to make my family proud.',
      a: 'Honor-Roll Scholar-Athlete'
    },
    {
      q: 'I’ve seen real changes in my son — he’s more disciplined, focused, and confident in class and in life.',
      a: 'Team Parent'
    }
  ];

  let idx = 0, autoTimer;
  const quoteEl = document.getElementById('quoteText');
  const authorEl = document.getElementById('quoteAuthor');
  const dots = Array.from(document.querySelectorAll('.carousel-dot'));
  const emoji = document.getElementById('confettiEmoji');
  const box = document.getElementById('quoteBox');

  function show(i, animate = true) {
    idx = (i + testimonials.length) % testimonials.length;
    quoteEl.textContent = `“${testimonials[idx].q}”`;
    authorEl.textContent = `— ${testimonials[idx].a}`;
    dots.forEach((d, j) => {
      d.classList.toggle('bg-amber-400', j === idx);
      d.classList.toggle('scale-110', j === idx);
      d.classList.toggle('bg-zinc-700', j !== idx);
    });
    if (animate && !prefersReduced) {
      box.style.opacity = 0;
      setTimeout(() => (box.style.opacity = 1), 50);
    }
  }

  dots.forEach((d) =>
    d.addEventListener('click', () => {
      clearInterval(autoTimer);
      show(+d.dataset.idx);
      startAuto();
    })
  );

  box.addEventListener('keydown', (e) => {
    if (['ArrowRight', 'ArrowDown'].includes(e.key)) show(idx + 1);
    if (['ArrowLeft', 'ArrowUp'].includes(e.key)) show(idx - 1);
  });

  let startX = null;
  box.addEventListener('touchstart', (e) => (startX = e.touches[0].clientX), { passive: true });
  box.addEventListener(
    'touchend',
    (e) => {
      if (startX === null) return;
      const delta = e.changedTouches[0].clientX - startX;
      if (Math.abs(delta) > 50) show(delta < 0 ? idx + 1 : idx - 1);
      startX = null;
    },
    { passive: true }
  );

  document.getElementById('copyQuoteBtn').addEventListener('click', async () => {
    await navigator.clipboard.writeText(`${testimonials[idx].q} — ${testimonials[idx].a}`);
    if (prefersReduced) return;
    emoji.style.opacity = 1;
    confetti({
      particleCount: 140,
      spread: 60,
      origin: { y: 0.7 },
      colors: ['#facc15', '#fde68a', '#0a0a0a'],
      disableForReducedMotion: true
    });
    setTimeout(() => (emoji.style.opacity = 0), 1200);
  });

  function startAuto() {
    if (prefersReduced) return;
    autoTimer = setInterval(() => show(idx + 1, false), 8000);
  }
  box.addEventListener('mouseenter', () => clearInterval(autoTimer));
  box.addEventListener('mouseleave', startAuto);
  box.addEventListener('focusin', () => clearInterval(autoTimer));
  box.addEventListener('focusout', startAuto);

  show(0, false);
  startAuto();
</script>

{# templates/partials/hero_overlay_quote.html #}
<div
  class="absolute bottom-8 left-1/2 -translate-x-1/2 max-w-xl px-6 py-4 bg-black/60 backdrop-blur-md rounded-xl text-center text-amber-300 text-lg sm:text-xl font-semibold tracking-wide shadow-glow select-none pointer-events-none"
  aria-hidden="true"
  data-aos="fade-up"
  data-aos-delay="350"
>
  “Building champions on and off the court — together, we rise.”
</div>

<section
  id="hero"
  class="relative isolate w-full min-h-[90vh] md:min-h-screen overflow-hidden bg-gradient-to-br from-cyber-night to-prestige-black rounded-3xl shadow-gold"
  aria-labelledby="hero-heading"
  tabindex="-1"
  data-aos="fade-in"
>
  <!-- 🔥 Ken Burns Background Image -->
  <div class="absolute inset-0 -z-10 overflow-hidden">
    <img
      src="{{ url_for('static', filename='connect-atx-team.jpg') }}"
      alt="Connect ATX Elite team after a great Championship Tournament"
      class="h-full w-full object-cover brightness-95 saturate-110 motion-safe:animate-kenburns"
      loading="eager"
      decoding="async"
      fetchpriority="high"
    />
  </div>

  <!-- ✨ Luxe animated overlay -->
  <div class="absolute inset-0 bg-gradient-to-b from-black/30 to-black/90 -z-10 animate-gradient-xy"></div>

  <!-- 🟨 Scrollbar Progress HUD -->
  <div
    id="scrollbar"
    class="fixed left-0 top-0 z-[999] h-1 w-0 bg-amber-400 origin-left transition-[width] duration-150 ease-out"
  ></div>

  <!-- 💎 Hero Core Content -->
  <div
    class="relative z-20 flex flex-col items-center justify-center h-full text-center px-6 py-32 md:py-40 max-w-7xl mx-auto"
  >
    <!-- Logo larger + hover scale + glow -->
    <img
      src="{{ url_for('static', filename='images/logo-hero.png') }}"
      alt="Connect ATX Elite Logo"
      class="w-40 md:w-48 drop-shadow-gold animate-glow gsap-logo cursor-pointer transition-transform duration-500 hover:scale-105"
      style="filter: drop-shadow(0 0 1rem #facc15);"
      loading="lazy"
      decoding="async"
      data-aos="zoom-in"
      data-aos-delay="50"
    />

    <!-- Amplified Tagline -->
    <p
      id="hero-heading"
      class="mt-6 text-2xl md:text-4xl font-extrabold text-amber-400 max-w-3xl leading-snug drop-shadow-lg animate-fade-up delay-150"
      data-aos="fade-up"
      data-aos-delay="150"
    >
      Empowering Youth Through Basketball, Brotherhood &amp; Academics
    </p>

    <!-- Upgraded CTAs -->
    <div class="mt-10 flex flex-col sm:flex-row gap-6 justify-center" data-aos="fade-up" data-aos-delay="200">
      <a
        href="#tiers"
        class="inline-block bg-amber-400 hover:bg-amber-300 text-black font-extrabold px-12 py-4 rounded-2xl shadow-[0_0_20px_#facc15] focus-visible:ring-6 ring-amber-300 transition-transform transform-gpu hover:scale-105 animate-pulse-slow"
      >
        Become a Sponsor
      </a>
      <a
        href="#about"
        class="inline-block border-2 border-amber-400 text-amber-400 font-bold px-12 py-4 rounded-2xl shadow-inner hover:bg-amber-400 hover:text-black transition"
      >
        Learn More
      </a>
    </div>

    <!-- Elevated Fundraising HUD -->
    <div
      class="mt-8 font-mono text-lg md:text-xl text-white/90 bg-black/40 backdrop-blur-sm px-6 py-2 rounded-full inline-flex items-center space-x-3 shadow-glow animate-fade-up delay-250"
      aria-live="polite"
      data-aos="fade-up"
      data-aos-delay="250"
    >
      <span>💰</span>
      <span class="font-semibold text-amber-400 tracking-wider">${{ config.get('RAISED_AMOUNT', 7900) }}</span>
      <span>raised of</span>
      <span class="font-semibold text-amber-400 tracking-wider">${{ config.get('GOAL_AMOUNT', 10000) }}</span>
      <span>goal</span>
    </div>
  </div>

  <!-- ⬇️ Larger Chevron Scroll Hint with pulse -->
  <button
    id="scroll-hint"
    class="absolute bottom-12 left-1/2 -translate-x-1/2 text-amber-300 animate-bounce-slow hover:text-amber-200 focus:outline-none scale-110"
    aria-label="Scroll down"
    data-aos="fade-up"
    data-aos-delay="300"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="w-10 h-10"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
      stroke-width="2"
    >
      <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
    </svg>
  </button>

  {% include "partials/hero_overlay_quote.html" ignore missing %}
</section>

<section
  id="cta"
  role="region"
  aria-labelledby="cta-heading"
  class="relative py-28 bg-gradient-to-b from-black via-zinc-900 to-black text-white text-center px-6"
  tabindex="-1"
>
  <div class="max-w-3xl mx-auto space-y-10">

    <!-- 1. Headline & Sub-Headline -->
    <h2
      id="cta-heading"
      class="text-4xl sm:text-5xl font-extrabold text-amber-400 drop-shadow-xl tracking-tight"
      data-aos="zoom-in"
    >
      Ready to Join Our Mission?
    </h2>
    <p
      class="text-white/85 text-lg sm:text-xl leading-relaxed"
      data-aos="fade-up" data-aos-delay="100"
    >
      Help us secure gym time, fund travel, and empower our student-athletes for life beyond the court.
    </p>

    <!-- 2. Live Progress Bar -->
    {% set raised = config.RAISED_AMOUNT %}
    {% set goal   = config.GOAL_AMOUNT %}
    <div class="w-full bg-zinc-800 rounded-full h-4 overflow-hidden" data-aos="fade-up" data-aos-delay="200" aria-hidden="true">
      <div
        class="h-4 bg-gradient-to-r from-amber-400 to-yellow-300 shadow-gold animate-pulse"
        style="width: {{ (raised/goal*100)|round(0) }}%"
        aria-valuemin="0"
        aria-valuemax="100"
        role="progressbar"
        aria-valuenow="{{ (raised/goal*100)|round(0) }}"
      ></div>
    </div>
    <div
      class="flex justify-center items-center gap-2 font-mono text-sm text-white/80"
      aria-live="polite"
      data-aos="fade-up" data-aos-delay="300"
    >
      <span role="img" aria-label="Fundraiser">💰</span>
      <span>
        <span class="font-bold text-amber-400">${{ "{:,}".format(raised) }}</span> of
        <span class="font-bold text-amber-400">${{ "{:,}".format(goal) }}</span> goal
      </span>
    </div>

    <!-- 3. Urgency Countdown -->
    <div
      id="countdown"
      class="text-amber-300 font-semibold tracking-wide text-sm sm:text-base"
      data-aos="fade-up" data-aos-delay="400"
      aria-live="polite"
    >
      <span id="cd-days">--</span>d
      <span id="cd-hours">--</span>h
      <span id="cd-mins">--</span>m left to hit our goal!
    </div>

    <!-- 4. Preset Gift Buttons + Custom Amount -->
    <div class="flex flex-wrap justify-center gap-3" data-aos="fade-up" data-aos-delay="500">
      {% for amt in [25,50,100,250] %}
      <button
        type="button"
        class="preset-amt bg-zinc-700 hover:bg-zinc-600 px-4 py-2 rounded-full font-semibold text-white transition-shadow shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-amber-400"
        data-amt="{{ amt }}"
        aria-label="Select ${{ amt }} donation amount"
      >
        ${{ amt }}
      </button>
      {% endfor %}
      <input
        id="customAmt"
        type="number" min="1" max="999"
        placeholder="Custom"
        aria-label="Custom donation amount"
        class="w-20 bg-zinc-800 text-white text-center rounded-full px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-400 border border-zinc-600"
      />
    </div>

    <!-- 5. Donate Button → Modal + Confetti -->
    <button
      id="donateBtn"
      class="mt-4 inline-block bg-amber-400 text-black font-semibold text-lg px-8 py-3 rounded-full shadow-gold hover:scale-105 hover:bg-amber-300 focus-visible:ring-4 focus-visible:ring-amber-300 transition-transform duration-300 animate-glow"
      data-aos="zoom-in" data-aos-delay="600"
      aria-haspopup="dialog"
      aria-controls="donateDialog"
    >
      Donate Now
    </button>

    <!-- QR code fallback -->
    <div class="pt-6 flex flex-col items-center gap-1" data-aos="fade-up" data-aos-delay="700">
      <img
        src="{{ url_for('static', filename='qr-website.png') }}"
        alt="Donate via QR Code"
        width="128" height="128"
        class="rounded-lg shadow-lg opacity-75 hover:opacity-100 transition"
        loading="lazy"
      >
      <p class="text-xs text-white/60">Scan: CashApp / PayPal / Venmo</p>
    </div>

    <p class="pt-6 text-sm text-white/60" data-aos="fade-up" data-aos-delay="800">
      Or contact <a href="mailto:arodgps@gmail.com" class="underline hover:text-amber-300">arodgps@gmail.com</a>
      &nbsp;| 📞 (512) 820-0475
    </p>
  </div>

  {# ——— Modal (using native <dialog>) ——— #}
  <dialog id="donateDialog" class="w-full max-w-md p-0 rounded-2xl overflow-hidden" role="dialog" aria-modal="true" aria-labelledby="donateDialogTitle">
    <form id="donateForm" method="dialog" class="bg-zinc-950 text-white p-6 space-y-4" aria-describedby="donateDialogDesc">
      <h3 id="donateDialogTitle" class="text-2xl font-bold text-amber-400">Enter Donation Amount</h3>
      <input name="amount" id="formAmt" type="number" min="1" max="999" required
             class="w-full bg-zinc-800 rounded-full px-4 py-2 text-center focus:outline-none border border-zinc-700"
             aria-label="Donation amount input" />
      <div class="flex justify-end gap-2">
        <button type="reset" class="px-4 py-2 rounded-full bg-zinc-700 hover:bg-zinc-600">Cancel</button>
        <button type="submit"
                class="px-6 py-2 rounded-full bg-amber-400 text-black font-bold hover:bg-amber-300">
          Donate
        </button>
      </div>
    </form>
  </dialog>
</section>

<script defer type="module">
import confetti from "https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/+esm";
import { loadStripe } from "https://js.stripe.com/v3";
const stripe = await loadStripe("{{ stripe_publishable }}");

// Countdown Timer
(function() {
  const target = new Date("{{ config.CAMPAIGN_END_ISO }}");
  const days = document.getElementById("cd-days"),
        hours = document.getElementById("cd-hours"),
        mins = document.getElementById("cd-mins");

  function tick() {
    const diff = target - new Date();
    if (diff <= 0) { clearInterval(timer); return; }
    const d = Math.floor(diff/86400000),
          h = Math.floor((diff%86400000)/3600000),
          m = Math.floor((diff%3600000)/60000);
    days.textContent = d; hours.textContent = h; mins.textContent = m;
  }
  const timer = setInterval(tick, 1000);
  tick();
})();

// Preset amount buttons click handler
document.querySelectorAll(".preset-amt").forEach(btn => {
  btn.addEventListener("click", () => {
    document.getElementById("formAmt").value = btn.dataset.amt;
  });
});

// Open dialog and confetti animation
const opener = document.getElementById("donateBtn");
const dialog = document.getElementById("donateDialog");
opener.addEventListener("click", () => {
  dialog.showModal();
  confetti({ particleCount: 120, spread: 70, origin: { y: 0.6 }, colors: ["#facc15", "#fef3c7"] });
});

// Handle form submission → Stripe checkout
document.getElementById("donateForm").addEventListener("submit", async e => {
  e.preventDefault();
  const amount = parseInt(document.getElementById("formAmt").value, 10);
  if (!amount || amount < 1 || amount > 999) {
    alert("Please enter a donation amount between $1 and $999.");
    return;
  }
  const res = await fetch("/api/create-checkout", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ amount }),
  });
  const { session_id } = await res.json();
  await stripe.redirectToCheckout({ sessionId: session_id });
});
</script>

{# templates/index.html — Elite-Grade Homepage (Prestige Theme) #}
{% extends "base.html" %}

{% block title %}
  Home · Connect ATX Elite
{% endblock %}

{% block extra_styles %}
  <style>
    /* ✅ Scroll-Reveal Animation */
    [data-reveal] {
      opacity: 0;
      transform: translateY(32px);
      transition:
        opacity 0.7s cubic-bezier(.22,.61,.36,1),
        transform 0.7s cubic-bezier(.22,.61,.36,1);
      will-change: opacity, transform;
    }
    [data-reveal].in-view {
      opacity: 1;
      transform: translateY(0);
    }

    /* ✨ Focus ring for accessibility */
    :focus-visible {
      outline: 3px solid #facc15;
      outline-offset: 3px;
      border-radius: 0.375rem;
    }

    /* Footer breathing room */
    section.mb-16:last-of-type {
      margin-bottom: 5rem;
    }
  </style>
{% endblock %}

{% block content %}
  <h1 id="page-title" class="sr-only">Home · Connect ATX Elite</h1>

  <main role="main" id="main-content" tabindex="-1" aria-label="Main content" class="overflow-x-hidden">

    <!-- 🏀 Hero Section -->
    <section
      id="hero"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-label="Hero Section"
      tabindex="0"
      aria-describedby="hero-desc"
    >
      {% include "partials/hero.html" %}
      <p id="hero-desc" class="sr-only">
        Empowering youth through basketball, mentorship, and academic excellence.
      </p>
    </section>

    <!-- 🥇 Sponsorship Tiers -->
    <section
      id="tiers"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-labelledby="tiers-title"
      tabindex="0"
    >
      <h2 id="tiers-title" class="sr-only">Sponsorship Tiers</h2>
      {% include "partials/tiers.html" %}
    </section>

    <!-- 💬 Testimonials -->
    <section
      id="testimonials"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-labelledby="testimonials-title"
      tabindex="0"
    >
      <h2 id="testimonials-title" class="sr-only">Testimonials</h2>
      {% include "partials/testimonials.html" %}
    </section>

    <!-- 📣 Call to Action -->
    <section
      id="ctaSection"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-labelledby="cta-title"
      tabindex="0"
    >
      <h2 id="cta-title" class="sr-only">Call To Action</h2>
      {% include "partials/cta.html" %}
    </section>

    <!-- 🌟 Sponsor Wall -->
    <section
      id="sponsor-wall"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-labelledby="sponsor-wall-title"
      tabindex="0"
    >
      <h2 id="sponsor-wall-title" class="sr-only">Sponsor Wall</h2>
      {% include "partials/sponsor_wall.html" %}
    </section>

  </main>

  <!-- 🌐 Modals and UI Widgets -->
  {% include "partials/donation_modal.html" %}
  {% include "partials/newsletter_popup.html" %}
  {% include "partials/back_to_top_ball.html" %}
  {% include "partials/toast_notifications.html" %}
  {% include "partials/vip_leaderboard.html" %}
  {% include "partials/chat_widget.html" %}
  {% include "partials/accessibility_toolbar.html" %}
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script>
    // 🚀 Scroll-Reveal Intersection Observer
    (() => {
      const elements = document.querySelectorAll('[data-reveal]');
      if (!('IntersectionObserver' in window)) return;

      const observer = new IntersectionObserver((entries, obs) => {
        for (const { isIntersecting, target } of entries) {
          if (isIntersecting) {
            target.classList.add('in-view');
            obs.unobserve(target);
          }
        }
      }, { threshold: 0.35 });

      elements.forEach(el => observer.observe(el));
    })();
  </script>
{% endblock %}

<!-- Replace your existing templates/base.html with this full version -->

<!DOCTYPE html>
<html lang="en" class="scroll-smooth dark" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <title>{% block title %}Connect ATX Elite · Empowering Youth Through Basketball{% endblock %}</title>
  <meta name="description" content="Empowering youth in Austin, TX through basketball, mentorship, and academic excellence. Sponsor our 12U AAU team today!" />
  <meta name="theme-color" content="#facc15" media="(prefers-color-scheme: light)" />
  <meta name="theme-color" content="#111827" media="(prefers-color-scheme: dark)" />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="https://www.connectatxelite.com/" />

  <!-- Open Graph / Twitter Meta -->
  <meta property="og:title" content="Connect ATX Elite" />
  <meta property="og:description" content="Sponsor our 12U AAU basketball team—invest in the next generation in Austin, TX." />
  <meta property="og:image" content="{{ url_for('static', filename='connect-atx-team.jpg') }}" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://www.connectatxelite.com/" />
  <meta property="og:site_name" content="Connect ATX Elite" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Connect ATX Elite" />
  <meta name="twitter:description" content="Join our mission to uplift youth through basketball, mentorship, and community." />
  <meta name="twitter:image" content="{{ url_for('static', filename='connect-atx-team.jpg') }}" />

  <!-- Favicon / Touch -->
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" sizes="32x32" type="image/png" />
  <link rel="apple-touch-icon" href="{{ url_for('static', filename='images/apple-touch.png') }}" sizes="180x180" />

  <!-- Stylesheets -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/tailwind.min.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/globals.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/base/back_to_top_ball.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" />
  {% block extra_styles %}{% endblock %}

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SportsTeam",
    "name": "Connect ATX Elite",
    "sport": "Basketball",
    "url": "https://www.connectatxelite.com",
    "location": {
      "@type": "Place",
      "name": "Austin, TX"
    },
    "memberOf": {
      "@type": "Organization",
      "name": "AAU"
    }
  }
  </script>
</head>

<body class="bg-white text-gray-900 antialiased dark:bg-gray-900 dark:text-white selection:bg-yellow-300/80">
  <a href="#main-content" class="sr-only focus:not-sr-only absolute top-2 left-2 bg-yellow-300 text-black px-4 py-1 rounded shadow z-50">Skip to content</a>

  {% include "partials/header.html" %}

  <main id="main-content" role="main" tabindex="-1" aria-label="Main Content">
    {% block content %}{% endblock %}
  </main>

  {% include "partials/footer.html" %}
  {% include "partials/newsletter_popup.html" %}

  <!-- 🔼 Back to Top Ball (Hardcoded) -->
  <button
    id="back-to-top-ball"
    type="button"
    aria-label="Back to top"
    class="fixed bottom-6 right-6 w-14 h-14 z-[60] rounded-full bg-amber-400/90 backdrop-blur-sm shadow-xl opacity-0 pointer-events-none scale-95 translate-y-6 transition-all duration-300 ease-out hover:scale-110 hover:shadow-2xl focus:outline-none focus-visible:ring-4 focus-visible:ring-amber-300"
  >
    <img
      src="{{ url_for('static', filename='images/ball.png') }}"
      alt=""
      aria-hidden="true"
      class="w-9 h-9 mx-auto pointer-events-none select-none"
      loading="lazy"
    />
    <span class="sr-only">Back to top</span>
  </button>

  <!-- JS Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
  <script>AOS.init({ once: true, duration: 700, easing: 'ease-out-quart' });</script>

  <script src="{{ url_for('static', filename='js/bundle.min.js') }}" defer></script>

  <!-- 🔁 Back to Top Ball Script -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const btn = document.getElementById('back-to-top-ball');
      if (!btn) return;

      btn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });

      const toggleVisibility = () => {
        if (window.scrollY > 220) {
          btn.classList.add('opacity-100', 'pointer-events-auto', 'translate-y-0', 'scale-100');
          btn.classList.remove('opacity-0', 'pointer-events-none', 'translate-y-6', 'scale-95');
        } else {
          btn.classList.add('opacity-0', 'pointer-events-none', 'translate-y-6', 'scale-95');
          btn.classList.remove('opacity-100', 'pointer-events-auto', 'translate-y-0', 'scale-100');
        }
      };

      window.addEventListener('scroll', toggleVisibility, { passive: true });
      toggleVisibility();
    });
  </script>

  {% block scripts %}{% endblock %}
</body>
</html>

<footer
  id="site-footer"
  role="contentinfo"
  class="relative bg-zinc-950 text-white py-12 px-6 border-t border-zinc-800 shadow-inner"
  data-aos="fade-up"
  data-aos-delay="200"
>
  <div class="max-w-6xl mx-auto grid gap-12 md:grid-cols-3 text-center md:text-left">

    <!-- Branding & Year -->
    <div class="space-y-2">
      <span class="block text-xs text-amber-400 font-semibold tracking-wide">AAU 12U | Austin, TX</span>
      <p class="text-sm text-white/60">© {{ now().year }} Connect ATX Elite. All rights reserved.</p>

      <!-- Newsletter capture -->
      <form
        id="newsletter-form"
        class="mt-4 flex flex-col sm:flex-row gap-2 justify-center md:justify-start"
        onsubmit="handleNewsletterSignup(event)"
        aria-label="Subscribe to newsletter"
      >
        <input
          type="email"
          name="newsletter_email"
          required
          placeholder="Your email"
          aria-required="true"
          aria-describedby="newsletterHelp"
          class="w-full sm:w-auto flex-grow px-3 py-2 rounded-lg bg-zinc-900 border border-zinc-700 focus:outline-none focus:ring-2 focus:ring-amber-400"
        />
        <button
          type="submit"
          class="px-4 py-2 bg-amber-400 text-black font-semibold rounded-lg hover:bg-amber-300 transition focus:ring-4 focus:ring-amber-400"
        >
          Subscribe
        </button>
      </form>
      <p id="newsletterHelp" class="sr-only">Enter your email to subscribe to our newsletter</p>
    </div>

    <!-- Fundraising Progress + Quick Links -->
    <div class="space-y-4 flex flex-col items-center">
      {% set raised = config.get('RAISED_AMOUNT', 0) %}
      {% set goal   = config.get('GOAL_AMOUNT', 10000) %}
      <div class="w-full max-w-xs" aria-label="Fundraising progress bar">
        <div class="flex justify-between text-xs font-mono text-amber-200 mb-1">
          <span>Raised</span>
          <span>${{ "{:,}".format(raised) }} / ${{ "{:,}".format(goal) }}</span>
        </div>
        <div
          class="relative w-full h-3 rounded-lg bg-zinc-800 overflow-hidden"
          role="progressbar"
          aria-valuemin="0"
          aria-valuemax="{{ goal }}"
          aria-valuenow="{{ raised }}"
          aria-label="Amount raised towards goal"
        >
          <div
            class="absolute inset-y-0 left-0 bg-amber-400 shadow-gold transition-all duration-700"
            style="width: {{ (raised / goal * 100)|round(0, 'floor') }}%;"
          ></div>
        </div>
      </div>

      <nav class="flex flex-wrap justify-center gap-3" role="navigation" aria-label="Footer quick links">
        <a
          href="mailto:arodgps@gmail.com"
          class="px-3 py-1 rounded bg-amber-400/10 text-amber-300 hover:bg-amber-400 hover:text-black transition focus:ring-2 focus:ring-amber-300"
          aria-label="Email Connect ATX Elite"
        >📧 Email</a>
        <a
          href="https://www.connectatxelite.com"
          target="_blank" rel="noopener"
          class="px-3 py-1 rounded bg-amber-400/10 text-amber-300 hover:bg-amber-400 hover:text-black transition focus:ring-2 focus:ring-amber-300"
          aria-label="Visit official site"
        >🌐 Site</a>
        <a
          href="https://www.paypal.com/donate/your-link"
          target="_blank" rel="noopener"
          class="px-3 py-1 rounded bg-green-400/20 text-green-200 hover:bg-green-300 hover:text-black transition focus:ring-2 focus:ring-green-200"
          aria-label="Donate via PayPal"
        >💸 Donate</a>
      </nav>
    </div>

    <!-- Contact, Countdown, and Accessible Back-to-Top -->
    <div class="space-y-4 flex flex-col items-center md:items-end">
      <address class="not-italic text-xs text-white/70 space-y-1">
        <div>
          Contact: <a href="mailto:arodgps@gmail.com" class="underline hover:text-amber-300">arodgps@gmail.com</a>
        </div>
        <div>
          Phone: <a href="tel:+15128200475" class="underline hover:text-amber-300">(512) 820-0475</a>
        </div>
      </address>

      <!-- Live countdown -->
      <div
        id="next-game-countdown"
        class="text-sm text-amber-300 font-mono"
        aria-live="polite"
        aria-atomic="true"
      >
        Next Tournament in: <span id="countdown-timer">00d 00h 00m 00s</span>
      </div>

      <!-- Accessible Back-to-Top anchor -->
      <a
        href="#main-content"
        class="mt-2 text-amber-400 underline hover:text-amber-200"
        aria-label="Back to top"
      >↑ Back to Top</a>
    </div>
  </div>

  <!-- Optional social-proof ticker -->
  <div class="mt-8 text-center text-xs text-white/50 font-mono" aria-live="polite" aria-atomic="true">
    Recent Supporters: {{ ['Acme Corp', 'Jane D.', 'Smith & Co', 'Austin Hoops', 'Elite Donor'] | join(' • ') }}
  </div>
</footer>

<script>
  // Newsletter subscription handler (stub)
  function handleNewsletterSignup(e) {
    e.preventDefault();
    const email = e.target.newsletter_email.value.trim();
    if (!email) {
      alert("Please enter a valid email address.");
      return;
    }
    alert(`🎉 Thanks! We'll keep you updated at ${email}`);
    e.target.reset();
  }

  // Countdown timer script
  const target = new Date('2025-07-01T10:00:00Z');
  function updateCountdown() {
    const now  = Date.now();
    const diff = target - now;
    if (diff <= 0) {
      document.getElementById('countdown-timer').textContent = 'Tournament started!';
      return;
    }
    const d = Math.floor(diff / 86400000),
          h = Math.floor((diff % 86400000) / 3600000),
          m = Math.floor((diff % 3600000) / 60000),
          s = Math.floor((diff % 60000) / 1000);
    document.getElementById('countdown-timer').textContent = `${d}d ${h}h ${m}m ${s}s`;
  }
  setInterval(updateCountdown, 1000);
  updateCountdown();
</script>

{# templates/partials/tiers.html — Enhanced Sponsor Tiers #}
<section
  id="tiers"
  class="py-24 bg-zinc-900 text-white px-6"
  role="region"
  aria-labelledby="tiers-heading"
  tabindex="-1"
  data-aos="fade-up"
  data-aos-duration="800"
>
  <div class="max-w-6xl mx-auto space-y-16">
    <!-- ① QR sponsor call-out -->
    <div
      class="p-6 rounded-2xl bg-gradient-to-r from-amber-400/70 to-amber-200/60 text-black flex flex-col md:flex-row items-center justify-between gap-6 shadow-gold"
      aria-label="Sponsor now call-out"
      data-aos="zoom-in"
      data-aos-delay="200"
    >
      <div>
        <p class="font-bold text-2xl sm:text-3xl">Want to make the biggest impact?</p>
        <p class="text-lg text-amber-800/80">
          Contact us at
          <a href="mailto:arodgps@gmail.com" class="underline hover:text-amber-700">
            arodgps@gmail.com
          </a>
          or scan to sponsor instantly.
        </p>
      </div>
      <img
        src="{{ url_for('static', filename='qr-sponsorship-deck.png') }}"
        alt="Sponsor via QR code"
        width="90"
        height="90"
        class="rounded-lg shadow-lg border border-amber-400 bg-white"
      />
    </div>

    <!-- ② Live progress bar -->
    {% set goal = goal_amount or 10000 %}
    {% set raised = raised_amount or 7850 %}
    <div
      class="w-full max-w-xl mx-auto text-center space-y-2"
      aria-label="{{ '$%s raised of $%s goal'|format(raised, goal) }}"
      data-aos="fade-up"
      data-aos-delay="400"
    >
      <div class="w-full bg-zinc-800 h-5 rounded-full border border-amber-400/30 overflow-hidden relative">
        <div
          id="tiersProgress"
          class="bg-amber-400 h-5 rounded-full shadow-gold transition-all duration-1000 ease-out"
          style="width: {{ (raised/goal*100)|round(1,'ceil') }}%;"
        >
          <span class="pl-2 text-black font-bold">
            {{ '$%s'|format('{:,}'.format(raised)) }}
          </span>
        </div>
      </div>
      <span class="text-sm text-amber-200">Goal: ${{ '{:,}'.format(goal) }}</span>
    </div>

    <!-- ③ Section heading -->
    <h2
      id="tiers-heading"
      class="text-4xl font-bold text-amber-400 text-center"
      data-aos="fade-up"
      data-aos-delay="600"
    >
      Sponsorship Tiers
    </h2>

    <!-- ④ Tier cards with flip effect -->
    {% set tiers = [
      ('Platinum','$5,000+','heroicons-solid:crown',['Logo on jerseys','Shout-outs on social','VIP invites'],'from-amber-500 to-amber-300',True),
      ('Gold','$2,500','heroicons-solid:currency-dollar',['Warm-ups logo','Social features','Appreciation invites'],'from-amber-400 to-amber-200',False),
      ('Silver','$1,000','heroicons-solid:medal',['Social shout-outs','Thank-you certificate','Board listing'],'from-gray-300 to-slate-100',False),
      ('Bronze','$500','heroicons-solid:trophy',['Public thank-you','Board listing'],'from-orange-400 to-amber-200',False),
      ('Custom','Any Amount','heroicons-solid:star',['Tailored benefits','Personalized impact'],'from-purple-500 to-pink-400',False)
    ] %}
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10">
      {% for title, amount, icon, benefits, gradient, highlight in tiers %}
      <div
        class="flip-card perspective"
        tabindex="0"
        data-aos="fade-up"
        data-aos-delay="{{ 700 + loop.index0 * 100 }}"
      >
        <div class="relative w-full h-full transition-transform duration-500 preserve-3d group hover:rotate-y-180 focus-within:rotate-y-180">
          <!-- Front -->
          <div class="card-face card-front p-6 rounded-2xl bg-gradient-to-br {{ gradient }} shadow-2xl text-black flex flex-col items-center justify-start space-y-4">
            {% if highlight %}
            <span class="absolute top-4 right-4 bg-black/80 text-amber-300 text-xs px-3 py-1 rounded-full font-semibold shadow">
              Top&nbsp;Tier
            </span>
            {% endif %}
            <div class="text-5xl">
              <i data-feather="{{ icon }}"></i>
            </div>
            <h3 class="text-2xl font-bold">{{ title }}</h3><span class="sr-only">Secure this tier now</span>
            <p class="text-lg font-semibold">{{ amount }}</p>
            <ul class="list-disc list-inside text-sm space-y-1">
              {% for item in benefits %}
              <li>{{ item }}</li>
              {% endfor %}
            </ul>
          </div>
          <!-- Back -->
          <div class="card-face card-back absolute inset-0 p-6 rounded-2xl bg-zinc-800 text-white flex flex-col items-center justify-center backface-hidden shadow-lg">
            <p class="mb-4 font-semibold">Secure this tier now:</p>
            <button
              class="tier-cta inline-block bg-amber-400 text-black font-bold px-6 py-2 rounded-full shadow-gold hover:scale-105 focus-visible:ring-4 focus-visible:ring-amber-300 transition"
              data-amount="{{ amount | replace('$','') | replace(',','') | default('') }}"
            >
              Sponsor {{ title }}
            </button>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- ⑤ FAQ accordion -->
    <div class="max-w-3xl mx-auto pt-10 border-t border-zinc-800" data-aos="fade-up" data-aos-delay="1100">
      <button
        id="faqToggleTiers"
        class="flex items-center gap-2 text-amber-400 font-bold text-lg hover:underline transition"
        aria-expanded="false"
        aria-controls="faqBodyTiers"
      >
        ▶ Frequently Asked Questions
      </button>
      <div
        id="faqBodyTiers"
        class="hidden mt-4 bg-zinc-900 border border-amber-400/20 rounded-xl p-6 space-y-4"
      >
        <div><b>Can I sponsor anonymously?</b><p class="text-sm text-white/80">Yes — just let us know in your message or donation form.</p></div>
        <div><b>Where does my sponsorship go?</b><p class="text-sm text-white/80">100% supports gym rental, travel, academic programs, and gear.</p></div>
        <div><b>How do I become a sponsor?</b><p class="text-sm text-white/80">Click any “Sponsor” button or email us—we’ll personalize your impact!</p></div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    feather.replace();
    document.getElementById('faqToggleTiers')?.addEventListener('click', (e) => {
      const btn = e.currentTarget;
      const body = document.getElementById('faqBodyTiers');
      const open = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!open));
      btn.textContent = (open ? '▶' : '▼') + ' Frequently Asked Questions';
      body.classList.toggle('hidden', open);
    });

    document.querySelectorAll('.tier-cta').forEach((btn) => {
      btn.addEventListener('click', () => {
        const amt = btn.dataset.amount;
        const dlg = document.getElementById('donateDialog');
        if (dlg) {
          dlg.querySelector('input[name="amount"]').value = amt;
          dlg.showModal();
        }
      });
    });
  });
</script>

<style>
  .perspective { perspective: 1000px; }
  .preserve-3d { transform-style: preserve-3d; }
  .rotate-y-180 { transform: rotateY(180deg); }
  .card-face { backface-visibility: hidden; }
  .card-front { position: relative; }
  .card-back { transform: rotateY(180deg); }
  .backface-hidden { backface-visibility: hidden; }
</style>

<section
  id="challenge"
  class="relative overflow-hidden py-16 px-6 bg-gradient-to-br from-zinc-900 via-black to-zinc-950 border-l-4 border-red-400/80"
  aria-labelledby="challenge-heading"
  tabindex="-1"
>
  <!-- 1. Parallax background image -->
  <div
    class="absolute inset-0 -z-10 bg-[url('/static/images/gym-chutes.jpg')] bg-center bg-cover motion-safe:animate-kenburns"
    style="background-attachment: fixed"
    aria-hidden="true"
  ></div>

  <h2
    id="challenge-heading"
    class="text-2xl md:text-3xl font-bold text-red-400 mb-6 drop-shadow-lg"
    data-aos="fade-up"
    data-aos-delay="100"
  >
    The Challenge We Face
  </h2>

  <p
    class="text-lg text-white/80 max-w-3xl mx-auto mb-8 leading-relaxed"
    data-aos="fade-up"
    data-aos-delay="200"
  >
    Despite the love and energy behind our program, we struggle with consistent access to gym space
    and the high cost of tournament travel across states. These financial barriers place a heavy
    strain on our volunteer coaches and passionate parents — limiting the full potential of our kids
    to grow, bond, and succeed together.
  </p>

  <!-- 2. Impact metrics badges -->
  <div
    class="flex flex-wrap justify-center gap-6 mb-8"
    data-aos="fade-up"
    data-aos-delay="300"
    role="list"
  >
    <div
      class="flex flex-col items-center bg-zinc-800/70 px-6 py-4 rounded-xl shadow-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-red-400"
      tabindex="0"
      role="listitem"
      aria-label="120 plus hours of gym time lost"
    >
      <span class="text-3xl font-extrabold text-red-400" data-count="120">0</span>
      <span class="text-white/80 text-sm">Hours of Gym Time Lost</span>
    </div>
    <div
      class="flex flex-col items-center bg-zinc-800/70 px-6 py-4 rounded-xl shadow-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-red-400"
      tabindex="0"
      role="listitem"
      aria-label="800 tournament miles traveled"
    >
      <span class="text-3xl font-extrabold text-red-400" data-count="800">0</span>
      <span class="text-white/80 text-sm">Tournament Miles Traveled</span>
    </div>
  </div>

  <!-- 3. Animated progress bar -->
  <div
    class="max-w-2xl mx-auto mb-8"
    data-aos="fade-up"
    data-aos-delay="400"
    role="region"
    aria-labelledby="gym-rental-label"
  >
    <div id="gym-rental-label" class="text-sm text-white/70 mb-1 flex justify-between">
      <span>Gym Rental Funding</span>
      <span><strong id="gym-funded" aria-live="polite">45%</strong> funded</span>
    </div>
    <div
      class="w-full h-2 bg-zinc-800 rounded-full overflow-hidden"
      role="progressbar"
      aria-valuemin="0"
      aria-valuemax="100"
      aria-valuenow="45"
      aria-label="Gym Rental Funding progress bar"
    >
      <div
        id="gym-progress-bar-fill"
        class="h-full bg-red-400 transition-all duration-1000 ease-out"
        style="width: 0%"
      ></div>
    </div>
  </div>

  <!-- 4. Sponsor CTA -->
  <div class="text-center mb-12" data-aos="fade-up" data-aos-delay="500">
    <a
      href="mailto:arodgps@gmail.com?subject=Gym%20Space%20Sponsorship"
      class="inline-block bg-red-400 hover:bg-red-300 text-black font-bold px-8 py-3 rounded-full shadow-lg transition-transform hover:scale-105 focus-visible:ring-4 focus-visible:ring-red-300 focus:outline-none"
    >
      Sponsor a Practice
    </a>
  </div>

  <!-- 5. Parent testimonial pop-over -->
  <div
    class="relative max-w-3xl mx-auto"
    data-aos="fade-up"
    data-aos-delay="600"
  >
    <p class="text-xs text-white/60 italic">
      “Without enough court time, my son lost valuable training hours this season.”
    </p>
    <button
      type="button"
      class="absolute top-0 right-0 p-2 text-white/70 hover:text-white transition focus:outline-none focus:ring-2 focus:ring-red-400 rounded"
      aria-describedby="testimonial-pop"
      aria-expanded="false"
      aria-controls="testimonial-pop"
      id="testimonial-toggle"
      onmouseenter="showTestimonial(true)"
      onmouseleave="showTestimonial(false)"
      onfocus="showTestimonial(true)"
      onblur="showTestimonial(false)"
    >
      ℹ️
    </button>
    <div
      id="testimonial-pop"
      class="hidden absolute right-0 mt-10 w-64 p-4 bg-zinc-900/90 text-white text-sm rounded-lg shadow-lg"
      role="tooltip"
      aria-live="polite"
    >
      <strong>Team Parent, Class of 2030</strong><br />
      “We missed 8 practices this year due to no gym—every donation helps keep us on court!”
    </div>
  </div>
</section>

<script>
  // Animate count-up for badges
  document.addEventListener('DOMContentLoaded', () => {
    const counters = document.querySelectorAll('[data-count]');
    counters.forEach((el) => {
      const target = +el.getAttribute('data-count');
      let count = 0;
      const step = Math.max(1, Math.floor(target / 50));
      const interval = setInterval(() => {
        count += step;
        if (count >= target) {
          el.textContent = target;
          clearInterval(interval);
        } else {
          el.textContent = count;
        }
      }, 30);
    });

    // Animate progress bar fill
    const progressBarFill = document.getElementById('gym-progress-bar-fill');
    if (progressBarFill) {
      setTimeout(() => {
        progressBarFill.style.width = '45%';
      }, 500); // Delay to sync with AOS animation
    }
  });

  function showTestimonial(show) {
    const pop = document.getElementById('testimonial-pop');
    const toggle = document.getElementById('testimonial-toggle');
    if (show) {
      pop.classList.remove('hidden');
      toggle.setAttribute('aria-expanded', 'true');
    } else {
      pop.classList.add('hidden');
      toggle.setAttribute('aria-expanded', 'false');
    }
  }
</script>

{# templates/partials/sponsor_wall.html #}
<section
  id="sponsor-wall"
  role="region"
  aria-labelledby="sponsor-heading"
  class="bg-zinc-950/95 py-12 border-t border-zinc-800 text-center text-white"
  data-aos="fade-up"
  data-aos-delay="300"
>
  <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 space-y-8">

    <!-- Funding HUD -->
    <div id="funding-hud" class="w-full max-w-xl mx-auto">
      <div class="flex justify-between text-sm font-mono text-amber-200 mb-1">
        <span>Raised</span>
        <span>
          <span id="funding-raised-amount" aria-live="polite">${{ funding_raised or 0 }}</span> /
          <span id="funding-goal-amount">${{ funding_goal or 10000 }}</span>
        </span>
      </div>
      <div class="relative w-full h-4 rounded-full bg-zinc-800 overflow-hidden">
        <div 
          id="funding-progress-bar"
          class="absolute inset-y-0 left-0 bg-amber-400 shadow-gold transition-all duration-700"
          data-raised="{{ funding_raised or 0 }}"
          data-goal="{{ funding_goal or 10000 }}"
          role="progressbar"
          aria-valuemin="0"
          aria-valuemax="{{ funding_goal or 10000 }}"
          aria-valuenow="{{ funding_raised or 0 }}"
          style="width: {{ ((funding_raised or 0) / (funding_goal or 10000) * 100) | round(1) }}%;"
        ></div>
      </div>
    </div>

    <!-- Sponsor Section Header -->
    <header class="space-y-2">
      <h2
        id="sponsor-heading"
        class="text-2xl sm:text-3xl font-extrabold text-amber-400 tracking-tight"
      >
        Our Generous Sponsors
      </h2>
      <p class="text-sm sm:text-base text-amber-200">
        Every logo below represents a family or company that keeps our kids on the court—thank you!
      </p>
      <p id="sponsor-count" class="text-xs text-white/70 italic" aria-live="polite">
        {{ sponsors|length }} Sponsor{{ sponsors|length != 1 and 's' or '' }} and counting!
      </p>
    </header>

    {% if sponsors %}
    <div class="relative overflow-x-auto vendor-marquee">
      <ul class="inline-flex items-center gap-8 whitespace-nowrap py-4" aria-label="Sponsor logos">
        {% for sponsor in sponsors %}
        <li class="relative shrink-0">
          <a
            href="{{ sponsor.website or '#' }}"
            target="_blank"
            rel="noopener noreferrer"
            class="group inline-block"
            aria-label="Visit {{ sponsor.name }}"
          >
            <img
              src="{{ sponsor.logo_url }}"
              alt="{{ sponsor.name }} logo"
              class="h-16 sm:h-20 grayscale group-hover:grayscale-0 transition duration-300"
              loading="lazy"
              width="160"
              height="80"
            />
            {% if sponsor.tier == 'Platinum' %}
            <span class="absolute top-0 right-0 bg-amber-400 text-black text-xs font-bold px-1 rounded-bl">PLATINUM</span>
            {% endif %}
          </a>
        </li>
        {% endfor %}
      </ul>
    </div>
    {% else %}
    <ul class="grid grid-cols-3 sm:grid-cols-5 gap-6">
      {% for _ in range(5) %}
      <li class="h-16 sm:h-20 bg-zinc-800 animate-pulse rounded-lg"></li>
      {% endfor %}
    </ul>
    <p class="text-sm text-gray-400 mb-4">
      Your logo could be here—become a founding sponsor today!
    </p>
    {% endif %}

    <div>
      <a
        href="#donateModal"
        hx-get="/modal/sponsor"
        class="inline-flex items-center gap-2 rounded-lg bg-amber-400/90 px-6 py-2 text-sm font-semibold text-zinc-900 shadow-md hover:bg-amber-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 transition"
        aria-label="Become a Sponsor"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-4 w-4"
          fill="currentColor"
          viewBox="0 0 16 16"
          aria-hidden="true"
        >
          <path d="M8 0a8 8 0 100 16A8 8 0 008 0zM4 7.5h8v1H4v-1z" />
        </svg>
        Become a Sponsor
      </a>
    </div>
  </div>
</section>

<style>
  @keyframes m-arquee {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(calc(-1 * (100% - 100vw)));
    }
  }
  .vendor-marquee ul {
    animation: m-arquee 30s linear infinite;
  }
  .vendor-marquee:hover ul {
    animation-play-state: paused;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const marquee = document.querySelector('.vendor-marquee ul');
    if (!marquee) return;
    const totalW = marquee.scrollWidth;
    const viewport = document.documentElement.clientWidth;
    const duration = Math.max(20, (totalW / viewport) * 30);
    marquee.style.animationDuration = duration + 's';
  });
</script>

<div
  id="newsletterPopup"
  class="fixed inset-0 z-[9999] flex items-center justify-center bg-black bg-opacity-80 opacity-0 pointer-events-none transition-opacity duration-300"
  role="dialog"
  aria-modal="true"
  aria-labelledby="newsletterTitle"
  aria-describedby="newsletterDesc"
>
  <div
    class="bg-zinc-900 text-white rounded-lg shadow-xl max-w-sm w-full p-6 relative"
    role="document"
  >
    <button
      id="newsletterCloseBtn"
      aria-label="Close newsletter popup"
      class="absolute top-3 right-3 text-amber-400 hover:text-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-400 rounded"
      type="button"
    >
      &times;
    </button>
    <h2 id="newsletterTitle" class="text-2xl font-bold mb-2">Join Our Newsletter</h2>
    <p id="newsletterDesc" class="mb-4 text-white/80">
      Stay updated on our latest news and events.
    </p>
    <form id="newsletterForm" class="space-y-4" novalidate>
      <input
        type="email"
        aria-label="Email address"
        name="email"
        required
        placeholder="Your email"
        class="w-full rounded px-3 py-2 bg-zinc-800 text-white focus:outline-none focus:ring-2 focus:ring-amber-400"
      />
      <button
        type="submit"
        class="w-full bg-amber-400 text-black font-semibold rounded py-2 hover:bg-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-400 transition"
      >
        Subscribe
      </button>
    </form>
  </div>
</div>

<style>
  /* Visible popup */
  #newsletterPopup.show {
    opacity: 1 !important;
    pointer-events: auto !important;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const popup = document.getElementById("newsletterPopup");
    const closeBtn = document.getElementById("newsletterCloseBtn");
    const form = document.getElementById("newsletterForm");

    // Show popup after 5 seconds with fade-in
    setTimeout(() => {
      popup.classList.add("show");
      // Focus first input for accessibility
      form.email.focus();
    }, 5000);

    // Close popup handler
    closeBtn.addEventListener("click", () => {
      popup.classList.remove("show");
    });

    // Close on click outside content
    popup.addEventListener("click", (e) => {
      if (e.target === popup) {
        popup.classList.remove("show");
      }
    });

    // Trap focus inside popup for accessibility
    popup.addEventListener("keydown", (e) => {
      if (e.key === "Tab") {
        const focusableElements = popup.querySelectorAll(
          'a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])'
        );
        const firstElem = focusableElements[0];
        const lastElem = focusableElements[focusableElements.length - 1];
        if (e.shiftKey) {
          if (document.activeElement === firstElem) {
            lastElem.focus();
            e.preventDefault();
          }
        } else {
          if (document.activeElement === lastElem) {
            firstElem.focus();
            e.preventDefault();
          }
        }
      } else if (e.key === "Escape") {
        popup.classList.remove("show");
      }
    });

    // Handle form submission (stub)
    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const email = form.email.value.trim();
      if (email) {
        alert(`Thanks for subscribing, ${email}!`);
        form.reset();
        popup.classList.remove("show");
      } else {
        alert("Please enter a valid email address.");
      }
    });
  });
</script>

<body id="bodyRoot" class="bg-zinc-950 text-white font-sans antialiased fade-in dark:bg-black" aria-live="polite">
  <!-- 🔗 Accessible Skip Link -->
  <a
    href="#main-content"
    class="sr-only focus:not-sr-only fixed top-4 left-4 z-[9999] bg-amber-400 text-black font-bold px-4 py-2 rounded shadow-lg focus:outline-none focus-visible:ring-2 ring-black transition"
  >
    ⤵ Skip to Content
  </a>

  <!-- ─── Header ────────────────────────────── -->
  <header
    role="banner"
    class="sticky top-0 z-50 w-full bg-black/95 backdrop-blur-sm border-b border-amber-500/20 shadow-xl transition-all duration-300 ease-in-out"
  >
    <div class="max-w-7xl mx-auto flex items-center justify-between px-4 py-4 md:px-8">
      <!-- 🔰 Logo + Brand -->
      <a
        href="{{ url_for('main.index') }}"
        class="flex items-center gap-3 group focus:outline-none focus-visible:ring-2 ring-amber-400"
      >
        <img
          src="{{ url_for('static', filename='logo-atx-elite.png') }}"
          class="w-12 h-12 rounded-full shadow-md ring-2 ring-amber-400 group-hover:scale-105 transition-transform duration-200"
          loading="lazy"
          decoding="async"
          alt="Connect ATX Elite Logo"
        />
        <span
          class="text-2xl font-extrabold tracking-tight text-amber-400 drop-shadow-[0_2px_4px_rgba(250,204,21,0.25)] select-none"
          aria-label="Connect ATX Elite"
        >
          Connect ATX Elite
        </span>
      </a>

      <!-- 🧭 Desktop Nav -->
      <nav aria-label="Primary navigation" class="hidden md:flex items-center gap-8 text-lg font-medium">
        {% for link in ['about', 'tiers', 'testimonials', 'faq', 'contact'] %}
          <a
            href="#{{ link }}"
            class="text-white hover:text-amber-400 focus:text-amber-400 transition-colors duration-150"
          >
            {{ link.capitalize() }}
          </a>
        {% endfor %}
      </nav>

      <!-- 🟨 Sponsor CTA (Desktop) -->
      <div class="hidden md:block">
        <a
          href="#tiers"
          class="px-6 py-2 rounded-full bg-amber-400 text-black font-bold shadow-lg hover:bg-amber-300 focus-visible:ring-4 ring-amber-400 transition animate-glow"
        >
          Become a Sponsor
        </a>
      </div>

      <!-- 🌙 Dark Mode Toggle Button -->
      <button
        id="themeToggle"
        type="button"
        class="ml-4 rounded-full p-2 bg-zinc-800/80 backdrop-blur hover:bg-zinc-700 text-amber-400 shadow-lg focus-visible:ring-4 focus-visible:ring-amber-200 transition"
        aria-label="Toggle dark mode"
        title="Toggle light/dark mode"
      >
        🌙
      </button>

      <!-- 📱 Mobile Menu Button -->
      <button
        id="mobileMenuButton"
        type="button"
        class="md:hidden flex items-center text-amber-400 focus:outline-none focus-visible:ring-2 ring-amber-400 ml-2"
        aria-label="Open mobile navigation menu"
        aria-controls="mobile-menu"
        aria-expanded="false"
      >
        <svg class="w-8 h-8" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 8h16M4 16h16" />
        </svg>
      </button>
    </div>

    <!-- 📱 Mobile Menu -->
    <nav
      id="mobile-menu"
      class="md:hidden hidden px-4 pb-4 bg-black/95 border-t border-amber-500/20 animate-fade-in-down"
      aria-label="Mobile navigation"
      tabindex="-1"
    >
      {% for link in ['about', 'tiers', 'testimonials', 'faq', 'contact'] %}
        <a
          href="#{{ link }}"
          class="block py-2 text-lg text-white hover:text-amber-400 focus:text-amber-400 transition"
        >
          {{ link.capitalize() }}
        </a>
      {% endfor %}
      <a
        href="#tiers"
        class="block mt-4 py-2 px-6 text-center rounded-full bg-amber-400 text-black font-bold shadow-md hover:bg-amber-300 focus-visible:ring-2 ring-amber-400 transition"
      >
        Become a Sponsor
      </a>
    </nav>
  </header>

  <!-- ─── Scripts ───────────────────────────── -->
  <script>
    // Dark mode toggle logic
    (() => {
      const root = document.documentElement;
      const btn = document.getElementById('themeToggle');
      const stored = localStorage.getItem('theme');

      // Initialize button icon & theme on page load
      if (stored === 'dark' || (!stored && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        root.classList.add('dark');
        btn.textContent = '☀️';
      } else {
        btn.textContent = '🌙';
      }

      // Toggle theme on button click
      btn.addEventListener('click', () => {
        root.classList.toggle('dark');
        const isDark = root.classList.contains('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        btn.textContent = isDark ? '☀️' : '🌙';
      });
    })();

    // Mobile menu toggle logic
    (() => {
      const mobileBtn = document.getElementById('mobileMenuButton');
      const mobileMenu = document.getElementById('mobile-menu');

      mobileBtn.addEventListener('click', () => {
        const expanded = mobileBtn.getAttribute('aria-expanded') === 'true';
        mobileBtn.setAttribute('aria-expanded', String(!expanded));
        mobileMenu.classList.toggle('hidden');
        if (!expanded) {
          mobileMenu.focus();
        }
      });
    })();
  </script>

{# templates/partials/back_to_top_ball.html #}
<button
  id="back-to-top-ball"
  type="button"
  aria-label="Back to top"
  class="fixed bottom-6 right-6 w-14 h-14 z-[60] rounded-full bg-amber-400/90 backdrop-blur-sm shadow-xl opacity-0 pointer-events-none scale-95 translate-y-6 transition-all duration-300 ease-out hover:scale-110 hover:shadow-2xl focus:outline-none focus-visible:ring-4 focus-visible:ring-amber-300"
>
  <img
    src="{{ url_for('static', filename='images/ball.png') }}"
    alt=""
    aria-hidden="true"
    class="w-9 h-9 mx-auto pointer-events-none select-none"
    loading="lazy"
  />
  <span class="sr-only">Back to top</span>
</button>

<section
  id="faq"
  class="bg-black py-12 text-white"
  aria-labelledby="faq-heading"
  data-aos="fade-up"
  data-aos-delay="100"
>
  <div class="max-w-2xl mx-auto px-4">
    <h2 id="faq-heading" class="text-2xl font-bold text-amber-400 mb-6 text-center">
      Frequently Asked Questions
    </h2>

    <!-- 1. Search filter -->
    <div class="mb-6">
      <label for="faq-search" class="sr-only">Search FAQs</label>
      <input
        id="faq-search"
        type="search"
        placeholder="Search questions…"
        aria-label="Search FAQs"
        class="w-full bg-zinc-800 rounded-full px-4 py-2 placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-amber-400"
      />
    </div>

    <ul class="divide-y divide-zinc-700" id="faq-list">
      {% set faqs = [
        {"q":"Can I sponsor anonymously?","a":"Absolutely — just let us know in your message or donation form."},
        {"q":"How are donations used?","a":"100% supports gym rental, tournament fees, travel costs, academic programs, and gear for our student-athletes."},
        {"q":"How do I become a sponsor?","a":"Use the “Become a Sponsor” button or email us — we’ll reach out to personalize your sponsorship!"}
      ] %}
      {% for faq in faqs %}
      <li class="py-4">
        <button
          type="button"
          class="faq-toggle flex w-full justify-between items-center text-left font-medium focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-400"
          aria-expanded="false"
          aria-controls="panel-{{ loop.index }}"
          id="panel-{{ loop.index }}-label"
          data-target="panel-{{ loop.index }}"
        >
          <span>{{ faq.q }}</span>
          <svg
            class="w-5 h-5 transform transition-transform"
            aria-hidden="true"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"
            />
          </svg>
        </button>
        <div
          id="panel-{{ loop.index }}"
          class="mt-2 pr-8 text-zinc-300 hidden"
          role="region"
          aria-labelledby="panel-{{ loop.index }}-label"
        >
          <p>{{ faq.a }}</p>
        </div>
      </li>
      {% endfor %}
    </ul>

    <!-- 5. Quick-help chat -->
    <div class="mt-8 text-center">
      <a
        href="https://wa.me/15128200475?text=Hi%20Connect%20ATX%20Elite!"
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center gap-2 bg-green-500 hover:bg-green-600 text-white font-semibold px-5 py-3 rounded-full shadow-md transition"
        aria-label="Chat with us on WhatsApp"
      >
        💬 Live Chat Help
      </a>
    </div>
  </div>
</section>

<script>
  // Accordion toggle behavior with aria updates
  document.querySelectorAll('.faq-toggle').forEach((btn) => {
    btn.addEventListener('click', () => {
      const expanded = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!expanded));
      btn.querySelector('svg').classList.toggle('rotate-180', !expanded);
      const panel = document.getElementById(btn.dataset.target);
      if (expanded) {
        panel.classList.add('hidden');
        panel.setAttribute('hidden', '');
      } else {
        panel.classList.remove('hidden');
        panel.removeAttribute('hidden');
      }
    });
  });

  // Live search filter for FAQ questions
  document.getElementById('faq-search').addEventListener('input', (e) => {
    const term = e.target.value.toLowerCase();
    document.querySelectorAll('#faq-list li').forEach((li) => {
      const question = li.querySelector('.faq-toggle span').textContent.toLowerCase();
      li.style.display = question.includes(term) ? '' : 'none';
    });
  });
</script>

{# templates/partials/donation_modal.html — Enhanced Donation Modal #}
<dialog
  id="donateDialog"
  aria-modal="true"
  aria-labelledby="donateDialogTitle"
  class="w-full max-w-md p-0 rounded-2xl overflow-hidden shadow-xl backdrop:bg-black/60 z-[45]"
>
  <form id="donateForm" method="dialog" class="bg-zinc-900 text-white">
    <header class="flex justify-between items-center px-6 py-4 bg-amber-400 text-black">
      <h3 id="donateDialogTitle" class="text-lg font-bold">Support the Team 🏀</h3>
      <button
        type="button"
        class="text-2xl leading-none focus:outline-none focus:ring-2 focus:ring-amber-500 rounded"
        aria-label="Close"
        tabindex="0"
      >
        &times;
      </button>
    </header>
    <div class="px-6 py-4 space-y-4">
      <p class="text-sm text-white/75">100% of proceeds cover gym time & travel.</p>

      <label class="block">
        <span class="text-sm">Your Email (receipt)</span>
        <input
          name="email"
          type="email"
          required
          class="mt-1 w-full px-3 py-2 bg-zinc-800 rounded focus:ring-2 focus:ring-amber-400"
          autocomplete="email"
        />
      </label>

      <label class="block">
        <span class="text-sm">Amount (USD)</span>
        <input
          name="amount"
          type="number"
          min="1"
          max="999"
          value="25"
          required
          class="mt-1 w-full px-3 py-2 bg-zinc-800 rounded focus:ring-2 focus:ring-amber-400"
          autocomplete="off"
          inputmode="numeric"
        />
      </label>

      <button
        id="stripeBtn"
        type="submit"
        class="w-full inline-block text-center bg-amber-400 text-black font-semibold py-2 rounded-lg shadow transition hover:bg-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-500"
        data-stripe
      >
        Donate with Card
      </button>

      <hr class="border-zinc-700" />

      <a
        href="{{ paypal_link or '#' }}"
        class="w-full block text-center bg-blue-600 text-white font-semibold py-2 rounded-lg shadow transition hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-400"
        target="_blank"
        rel="noopener noreferrer"
      >
        Donate with PayPal
      </a>
    </div>
  </form>
</dialog>

<style>
  /* Dialog z-index layering */
  #donateDialog {
    z-index: 100000 !important;
  }
  /* Native dialog backdrop styling */
  #donateDialog::backdrop {
    background: rgba(0, 0, 0, 0.55);
    z-index: 44 !important;
  }
  /* Responsive full width on small screens */
  @media (max-width: 500px) {
    #donateDialog {
      max-width: 98vw;
      border-radius: 1rem;
    }
  }
</style>

<script defer type="module">
  import confetti from 'https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/+esm';
  import { loadStripe } from 'https://js.stripe.com/v3/';

  (async () => {
    const stripe = await loadStripe('{{ stripe_publishable }}');
    const dialog = document.getElementById('donateDialog');
    const form = document.getElementById('donateForm');

    // Open dialog on any element with [data-open-donate] attribute
    document.querySelectorAll('[data-open-donate]').forEach(btn => {
      btn.addEventListener('click', () => {
        const amount = btn.dataset.amount || '25';
        dialog.querySelector('input[name=amount]').value = amount;
        dialog.showModal();
        confetti({ particleCount: 80, spread: 60, origin: { y: 0.6 } });
      });
    });

    // Close dialog on close button click
    dialog.querySelector('button[aria-label="Close"]').onclick = () => dialog.close();

    // Close dialog on outside click
    dialog.addEventListener('click', e => {
      if (e.target === dialog) dialog.close();
    });

    // Prevent dialog from closing on ESC (optional, can be removed if you want ESC to close)
    dialog.addEventListener('cancel', e => e.preventDefault());

    // Handle form submission and trigger Stripe Checkout
    form.addEventListener('submit', async e => {
      e.preventDefault();
      const email = form.email.value;
      const amount = parseInt(form.amount.value, 10);
      if (!amount || amount < 1 || amount > 999) {
        alert('Please enter a valid donation amount between $1 and $999.');
        return;
      }
      const res = await fetch('/api/create-checkout', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ amount, email }),
      });
      const { session_id } = await res.json();
      await stripe.redirectToCheckout({ sessionId: session_id });
    });

    // Trap focus within dialog for accessibility
    dialog.addEventListener('keydown', e => {
      if (e.key === 'Tab') {
        const focusable = Array.from(dialog.querySelectorAll('input, button, a'));
        const idx = focusable.indexOf(document.activeElement);
        let next = idx + (e.shiftKey ? -1 : 1);
        if (next < 0) next = focusable.length - 1;
        if (next >= focusable.length) next = 0;
        focusable[next].focus();
        e.preventDefault();
      }
    });
  })();
</script>

<section
  id="about"
  class="py-24 px-6 bg-zinc-950 text-white space-y-20"
  role="region"
  aria-labelledby="about-heading"
  tabindex="-1"
>
  <!-- 🎯 Our Mission -->
  <div class="max-w-5xl mx-auto space-y-6" data-aos="fade-up" data-aos-delay="100">
    <h2 id="about-heading" class="text-3xl sm:text-4xl font-bold text-amber-400">
      Our Mission
    </h2>
    <p class="text-lg sm:text-xl leading-relaxed text-white/90">
      Connect ATX Elite is a community‑powered, non‑profit <strong>12U AAU</strong> basketball program based
      in Austin, TX. We develop not only skilled athletes, but confident, disciplined, and
      academically driven young leaders.
    </p>
    <p class="text-lg sm:text-xl leading-relaxed text-white/70">
      Many of our boys are honor‑roll students thriving in a positive environment of teamwork,
      mentorship, and integrity. Through basketball we teach life lessons that extend far beyond the
      court.
    </p>
  </div>

  <!-- ⭐️ Impact Stats -->
  <div
    class="max-w-5xl mx-auto"
    data-aos="fade-up"
    data-aos-delay="300"
    aria-label="Program Impact Stats"
    role="list"
  >
    <div class="flex flex-wrap justify-center gap-8 md:gap-14 py-8">
      {% set impact = [
        {"label": "Players Enrolled", "value": 16},
        {"label": "Honor Roll Scholars", "value": 11},
        {"label": "Tournaments Played", "value": 12},
        {"label": "Years Running", "value": 3}
      ] %}
      {% for stat in impact %}
      <div
        class="bg-zinc-900/80 border border-amber-400/20 shadow-gold rounded-xl px-8 py-6 min-w-[150px] text-center focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-400"
        tabindex="0"
        role="listitem"
        aria-label="{{ stat.value }} {{ stat.label }}"
      >
        <div
          class="text-3xl font-extrabold text-amber-400"
          data-count="{{ stat.value }}"
          id="countup-{{ loop.index0 }}"
          >0</div>
        <div class="text-white/80 text-base font-medium">{{ stat.label }}</div>
      </div>
      {% endfor %}
    </div>
  </div>

  <!-- 🟧 Divider -->
  <div
    class="w-16 h-1 mx-auto rounded-full bg-gradient-to-r from-amber-400/60 to-amber-300/60"
    data-aos="fade-up"
    data-aos-delay="450"
    aria-hidden="true"
  ></div>

  <!-- ⚠️ Challenge with Tooltip Enhancement -->
  <div class="max-w-5xl mx-auto" data-aos="fade-up" data-aos-delay="550">
    <div
      class="group relative rounded-2xl shadow-lg bg-gradient-to-br from-zinc-900 via-black to-zinc-950 border-l-4 border-red-400/80 px-7 py-8 space-y-6 cursor-help focus:outline-none focus-visible:ring-2 focus-visible:ring-red-400"
      role="region"
      aria-labelledby="challenge-heading"
      tabindex="0"
      aria-describedby="challenge-tooltip"
    >
      <h3 id="challenge-heading" class="text-2xl sm:text-3xl font-semibold text-red-400">
        The Challenge We Face
      </h3>
      <p class="text-lg sm:text-xl leading-relaxed text-white/80">
        We struggle with consistent gym space and the high cost of tournament travel. These barriers
        strain our volunteer coaches and parents — limiting our kids’ ability to grow, bond, and
        succeed together.
      </p>

      <!-- Tooltip -->
      <div
        id="challenge-tooltip"
        role="tooltip"
        class="absolute left-1/2 bottom-full mb-3 w-72 rounded-md bg-black/90 px-4 py-3 text-sm text-amber-200 shadow-lg opacity-0 pointer-events-none transition-opacity duration-300 group-hover:opacity-100 group-focus:opacity-100 -translate-x-1/2"
      >
        Help us secure resources to expand gym access, reduce travel costs, and invest in our coaches.
      </div>
    </div>
  </div>

  <!-- 💡 Impact supporters can make -->
  <div class="max-w-5xl mx-auto space-y-6" data-aos="fade-up" data-aos-delay="700">
    <h3 class="text-2xl sm:text-3xl font-semibold text-green-400">The Impact You Can Make</h3>
    <ul class="list-disc list-inside space-y-2 text-lg sm:text-xl text-white/85 pl-4 md:pl-8" role="list">
      <li>Secure a consistent gym space for practices</li>
      <li>Support travel & lodging costs for tournaments</li>
      <li>Provide uniforms, gear, meals, and hydration</li>
      <li>Fund academic support and mentorship programs</li>
    </ul>
    <p class="pt-4 text-lg sm:text-xl font-semibold text-white">
      With your help, we can give these young athletes the foundation to become confident,
      accomplished leaders.
    </p>
  </div>

  <!-- ✨ Call to Action Button -->
  <div class="max-w-5xl mx-auto text-center" data-aos="fade-up" data-aos-delay="850">
    <a
      href="#tiers"
      class="inline-block bg-amber-400 hover:bg-amber-300 text-black font-extrabold px-12 py-4 rounded-3xl shadow-[0_0_25px_#facc15] focus-visible:ring-4 ring-amber-300 transition-transform transform-gpu hover:scale-105 animate-pulse-slow"
      aria-label="Become a Sponsor"
    >
      Become a Sponsor & Support Our Mission
    </a>
  </div>
</section>

<script>
  // Animated count-up for stats
  document.addEventListener('DOMContentLoaded', () => {
    const counters = document.querySelectorAll('[data-count]');
    counters.forEach((el) => {
      const target = +el.getAttribute('data-count');
      let count = 0;
      const step = Math.max(1, Math.floor(target / 50));
      const interval = setInterval(() => {
        count += step;
        if (count >= target) {
          el.textContent = target;
          clearInterval(interval);
        } else {
          el.textContent = count;
        }
      }, 30);
    });
  });
</script>

<section
  id="goal"
  class="relative isolate overflow-hidden rounded-3xl bg-luxe-night/90 p-6 text-center text-white shadow-2xl"
  data-aos="fade-up"
  data-aos-delay="300"
>
  <!-- 1. Radial gauge background -->
  <svg class="absolute inset-0 w-full h-full -z-10" viewBox="0 0 200 200" aria-hidden="true" focusable="false">
    <defs>
      <linearGradient id="gauge-gradient" x1="1" y1="0" x2="0" y2="1">
        <stop offset="0%" stop-color="#facc15" />
        <stop offset="100%" stop-color="#4ade80" />
      </linearGradient>
    </defs>
    <circle cx="100" cy="100" r="90" stroke="rgba(255,255,255,0.05)" stroke-width="20" fill="none" />
    <circle
      id="gauge-arc"
      cx="100"
      cy="100"
      r="90"
      stroke="url(#gauge-gradient)"
      stroke-width="20"
      stroke-dasharray="565.48"
      stroke-dashoffset="565.48"
      fill="none"
      transform="rotate(-90 100 100)"
    />
  </svg>

  <h2 class="text-xl font-bold mb-2">Season Goal</h2>

  <!-- 2. Dynamic percentage label -->
  <p class="text-3xl font-mono" id="goal-amount" aria-live="polite" aria-atomic="true">$7,900 / $10,000</p>

  <!-- 3. Animated progress bar -->
  <progress
    id="goal-bar"
    value="0"
    max="10000"
    class="w-full h-4 mt-4 rounded-full bg-zinc-800"
    aria-valuemin="0"
    aria-valuemax="10000"
    aria-valuenow="0"
    role="progressbar"
    aria-label="Progress towards season goal"
  ></progress>

  <!-- 4. Live donor ticker -->
  <div
    id="donor-ticker"
    class="mt-4 text-sm italic text-white/70 overflow-hidden whitespace-nowrap"
    style="mask-image: linear-gradient(to right, transparent, white 20%, white 80%, transparent)"
    aria-label="Latest donors ticker"
  >
    🚨 Latest donors: Alex M., Jamie R., Taylor S., Morgan L., …
  </div>
</section>

<script>
(() => {
  const totalGoal = 10000;
  let current = 7900; // initial funding amount

  // Animate numeric count in label
  function animateValue(el, start, end, duration) {
    const range = end - start;
    let startTime = null;
    function step(timestamp) {
      if (!startTime) startTime = timestamp;
      const progress = Math.min((timestamp - startTime) / duration, 1);
      el.textContent = `$${Math.floor(start + progress * range).toLocaleString()} / $${totalGoal.toLocaleString()}`;
      if (progress < 1) {
        requestAnimationFrame(step);
      }
    }
    requestAnimationFrame(step);
  }

  // Elements
  const section = document.getElementById('goal');
  const gaugeArc = document.getElementById('gauge-arc');
  const progressBar = document.getElementById('goal-bar');
  const label = document.getElementById('goal-amount');

  // IntersectionObserver to animate when in viewport
  const observer = new IntersectionObserver((entries, obs) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        // Animate radial gauge arc stroke
        const dashOffset = 565.48 * (1 - current / totalGoal);
        gaugeArc.style.transition = 'stroke-dashoffset 1.5s ease-out';
        gaugeArc.style.strokeDashoffset = dashOffset;

        // Animate progress bar
        progressBar.max = totalGoal;
        progressBar.value = 0;
        progressBar.style.transition = 'value 1.5s ease-out';
        setTimeout(() => (progressBar.value = current), 50);

        // Animate numeric label count up
        animateValue(label, 0, current, 1500);

        // Confetti celebration milestones
        [0.5, 0.75, 1].forEach(ratio => {
          if (current / totalGoal >= ratio) {
            import('https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/+esm').then(({ default: confetti }) => {
              confetti({
                particleCount: 50,
                spread: 40,
                origin: { y: 0.6 },
                colors: ['#facc15', '#4ade80', '#0a0a0a']
              });
            });
          }
        });

        obs.disconnect(); // animate only once
      }
    });
  }, { threshold: 0.4 });
  observer.observe(section);

  // Optional: Socket.IO live update listener for donations
  if (window.io) {
    const socket = window.io();
    socket.on('donation_update', ({ total }) => {
      current = total;
      progressBar.value = total;
      label.textContent = `$${total.toLocaleString()} / $${totalGoal.toLocaleString()}`;
      gaugeArc.style.strokeDashoffset = 565.48 * (1 - total / totalGoal);
    });
  }

  // Donor ticker scroll effect
  const ticker = document.getElementById('donor-ticker');
  let offset = 0;
  setInterval(() => {
    offset = (offset + 1) % ticker.scrollWidth;
    ticker.scrollLeft = offset;
  }, 50);
})();
</script>

{# templates/partials/testimonials.html #}
<section
  id="testimonials"
  class="relative isolate bg-gradient-to-br from-zinc-800 to-black py-24 px-6 text-white"
  role="region"
  aria-labelledby="testimonials-heading"
  tabindex="-1"
>
  <div class="max-w-5xl mx-auto text-center space-y-12">
    {# ⭐️ Social-proof badge #}
    <div
      class="flex justify-center items-center gap-1 text-2xl text-amber-400 animate-sparkle select-none"
      aria-hidden="true"
    >
      {% for _ in range(5) %}<span>★</span>{% endfor %}
      <span class="ml-2 text-base font-semibold text-amber-200">(5.0)</span>
    </div>

    <h2 id="testimonials-heading" class="text-3xl sm:text-4xl font-bold text-amber-400">
      What They’re Saying
    </h2>

    {# ── Carousel ──────────────────────────────── #}
    <div class="relative max-w-3xl mx-auto">
      <figure
        id="quoteBox"
        class="relative italic text-lg sm:text-xl text-white/90 rounded-xl p-8 bg-zinc-900/70 shadow-lg outline-none select-text transition-opacity duration-500"
        aria-live="polite"
        aria-atomic="true"
        tabindex="0"
      >
        <span
          id="confettiEmoji"
          class="absolute -top-4 left-1/2 -translate-x-1/2 opacity-0 transition-opacity duration-700 pointer-events-none"
          aria-hidden="true"
        >🎉🎊✨</span>

        <blockquote id="quoteText">Loading…</blockquote>
        <figcaption id="quoteAuthor" class="mt-4 text-sm font-medium text-amber-300"></figcaption>

        <button
          id="copyQuoteBtn"
          class="mt-4 text-xs text-amber-400 underline hover:text-amber-200 focus:outline-offset-4"
          aria-label="Copy testimonial to clipboard"
        >
          Copy Quote
        </button>
      </figure>

      <div class="flex justify-center mt-6 gap-2">
        {% for i in range(3) %}
        <button
          class="carousel-dot w-3 h-3 rounded-full border-2 border-amber-400 transition-transform duration-200 {% if i == 0 %}bg-amber-400 scale-110{% else %}bg-zinc-700{% endif %}"
          data-idx="{{ i }}"
          aria-label="Show testimonial {{ i + 1 }}"
        ></button>
        {% endfor %}
      </div>
    </div>

    <img
      src="https://static.wixstatic.com/media/2f0953_5d94082989fb4c4eb31f7f440de183c2~mv2.jpg/v1/fill/w_1100,h_1034,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/IMG_2031.jpg"
      alt="Team showing off championship rings"
      width="480"
      height="320"
      loading="lazy"
      class="rounded-2xl shadow-2xl ring-4 ring-amber-300/50 object-cover mx-auto"
    />
  </div>
</section>

<script defer type="module">
  import confetti from 'https://cdn.skypack.dev/canvas-confetti@1.6.0';

  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const testimonials = [
    {
      q: 'Winning felt amazing — but it’s being part of a team that believes in you that means the most.',
      a: 'Connect ATX Elite Player, Class of 2030'
    },
    {
      q: 'Being part of Connect ATX Elite helps me stay focused in school and basketball. I want to make my family proud.',
      a: 'Honor-Roll Scholar-Athlete'
    },
    {
      q: 'I’ve seen real changes in my son — he’s more disciplined, focused, and confident in class and in life.',
      a: 'Team Parent'
    }
  ];

  let idx = 0, autoTimer;
  const quoteEl = document.getElementById('quoteText');
  const authorEl = document.getElementById('quoteAuthor');
  const dots = Array.from(document.querySelectorAll('.carousel-dot'));
  const emoji = document.getElementById('confettiEmoji');
  const box = document.getElementById('quoteBox');

  function show(i, animate = true) {
    idx = (i + testimonials.length) % testimonials.length;
    quoteEl.textContent = `“${testimonials[idx].q}”`;
    authorEl.textContent = `— ${testimonials[idx].a}`;
    dots.forEach((d, j) => {
      d.classList.toggle('bg-amber-400', j === idx);
      d.classList.toggle('scale-110', j === idx);
      d.classList.toggle('bg-zinc-700', j !== idx);
    });
    if (animate && !prefersReduced) {
      box.style.opacity = 0;
      setTimeout(() => (box.style.opacity = 1), 50);
    }
  }

  dots.forEach((d) =>
    d.addEventListener('click', () => {
      clearInterval(autoTimer);
      show(+d.dataset.idx);
      startAuto();
    })
  );

  box.addEventListener('keydown', (e) => {
    if (['ArrowRight', 'ArrowDown'].includes(e.key)) show(idx + 1);
    if (['ArrowLeft', 'ArrowUp'].includes(e.key)) show(idx - 1);
  });

  let startX = null;
  box.addEventListener('touchstart', (e) => (startX = e.touches[0].clientX), { passive: true });
  box.addEventListener(
    'touchend',
    (e) => {
      if (startX === null) return;
      const delta = e.changedTouches[0].clientX - startX;
      if (Math.abs(delta) > 50) show(delta < 0 ? idx + 1 : idx - 1);
      startX = null;
    },
    { passive: true }
  );

  document.getElementById('copyQuoteBtn').addEventListener('click', async () => {
    await navigator.clipboard.writeText(`${testimonials[idx].q} — ${testimonials[idx].a}`);
    if (prefersReduced) return;
    emoji.style.opacity = 1;
    confetti({
      particleCount: 140,
      spread: 60,
      origin: { y: 0.7 },
      colors: ['#facc15', '#fde68a', '#0a0a0a'],
      disableForReducedMotion: true
    });
    setTimeout(() => (emoji.style.opacity = 0), 1200);
  });

  function startAuto() {
    if (prefersReduced) return;
    autoTimer = setInterval(() => show(idx + 1, false), 8000);
  }
  box.addEventListener('mouseenter', () => clearInterval(autoTimer));
  box.addEventListener('mouseleave', startAuto);
  box.addEventListener('focusin', () => clearInterval(autoTimer));
  box.addEventListener('focusout', startAuto);

  show(0, false);
  startAuto();
</script>

{# templates/partials/stat.html #}
<section
  id="testimonials"
  class="relative isolate bg-gradient-to-br from-zinc-800 to-black py-24 px-6 text-white"
  role="region"
  aria-labelledby="testimonials-heading"
  tabindex="-1"
>
  <div class="max-w-5xl mx-auto text-center space-y-12">
    {# ⭐️ Social-proof badge #}
    <div
      class="flex justify-center items-center gap-1 text-2xl text-amber-400 animate-sparkle select-none"
      aria-hidden="true"
    >
      {% for _ in range(5) %}<span>★</span>{% endfor %}
      <span class="ml-2 text-base font-semibold text-amber-200">(5.0)</span>
    </div>

    <h2 id="testimonials-heading" class="text-3xl sm:text-4xl font-bold text-amber-400">
      What They’re Saying
    </h2>

    {# ── Carousel ──────────────────────────────── #}
    <div class="relative max-w-3xl mx-auto">
      <figure
        id="quoteBox"
        class="relative italic text-lg sm:text-xl text-white/90 rounded-xl p-8 bg-zinc-900/70 shadow-lg outline-none select-text transition-opacity duration-500"
        aria-live="polite"
        aria-atomic="true"
        tabindex="0"
      >
        <span
          id="confettiEmoji"
          class="absolute -top-4 left-1/2 -translate-x-1/2 opacity-0 transition-opacity duration-700 pointer-events-none"
          aria-hidden="true"
        >🎉🎊✨</span>

        <blockquote id="quoteText">Loading…</blockquote>
        <figcaption id="quoteAuthor" class="mt-4 text-sm font-medium text-amber-300"></figcaption>

        <button
          id="copyQuoteBtn"
          class="mt-4 text-xs text-amber-400 underline hover:text-amber-200 focus:outline-offset-4"
          aria-label="Copy testimonial to clipboard"
        >
          Copy Quote
        </button>
      </figure>

      <div class="flex justify-center mt-6 gap-2">
        {% for i in range(3) %}
        <button
          class="carousel-dot w-3 h-3 rounded-full border-2 border-amber-400 transition-transform duration-200 {% if i == 0 %}bg-amber-400 scale-110{% else %}bg-zinc-700{% endif %}"
          data-idx="{{ i }}"
          aria-label="Show testimonial {{ i + 1 }}"
        ></button>
        {% endfor %}
      </div>
    </div>

    <img
      src="https://static.wixstatic.com/media/2f0953_5d94082989fb4c4eb31f7f440de183c2~mv2.jpg/v1/fill/w_1100,h_1034,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/IMG_2031.jpg"
      alt="Team showing off championship rings"
      width="480"
      height="320"
      loading="lazy"
      class="rounded-2xl shadow-2xl ring-4 ring-amber-300/50 object-cover mx-auto"
    />
  </div>
</section>

<section id="stats" class="py-24 px-6 bg-black text-white" role="region" aria-label="Team statistics">
  <div class="max-w-4xl mx-auto flex flex-wrap justify-center gap-10 text-center">
    {% set stats = [
      ('16', 'Players Enrolled'),
      ('11', 'Honor Roll Scholars'),
      ('12', 'Tournaments Played'),
      ('3', 'Years Running')
    ] %}
    {% for number, label in stats %}
    <div
      class="stat-card transform transition duration-300 hover:scale-105"
      data-aos="zoom-in"
      data-aos-delay="{{ loop.index0 * 100 }}"
      tabindex="0"
      role="group"
      aria-label="{{ number }} {{ label }}"
    >
      <div class="text-4xl font-extrabold text-amber-400 drop-shadow">{{ number }}</div>
      <div class="mt-1 text-base text-white/80 font-medium">{{ label }}</div>
    </div>
    {% endfor %}
  </div>
</section>

<script defer type="module">
  import confetti from 'https://cdn.skypack.dev/canvas-confetti@1.6.0';

  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const testimonials = [
    {
      q: 'Winning felt amazing — but it’s being part of a team that believes in you that means the most.',
      a: 'Connect ATX Elite Player, Class of 2030'
    },
    {
      q: 'Being part of Connect ATX Elite helps me stay focused in school and basketball. I want to make my family proud.',
      a: 'Honor-Roll Scholar-Athlete'
    },
    {
      q: 'I’ve seen real changes in my son — he’s more disciplined, focused, and confident in class and in life.',
      a: 'Team Parent'
    }
  ];

  let idx = 0,
    autoTimer;
  const quoteEl = document.getElementById('quoteText');
  const authorEl = document.getElementById('quoteAuthor');
  const dots = Array.from(document.querySelectorAll('.carousel-dot'));
  const emoji = document.getElementById('confettiEmoji');
  const box = document.getElementById('quoteBox');

  function show(i, animate = true) {
    idx = (i + testimonials.length) % testimonials.length;
    quoteEl.textContent = `“${testimonials[idx].q}”`;
    authorEl.textContent = `— ${testimonials[idx].a}`;
    dots.forEach((d, j) => {
      d.classList.toggle('bg-amber-400', j === idx);
      d.classList.toggle('scale-110', j === idx);
      d.classList.toggle('bg-zinc-700', j !== idx);
    });
    if (animate && !prefersReduced) {
      box.style.opacity = 0;
      setTimeout(() => (box.style.opacity = 1), 50);
    }
  }

  dots.forEach((d) =>
    d.addEventListener('click', () => {
      clearInterval(autoTimer);
      show(+d.dataset.idx);
      startAuto();
    })
  );

  box.addEventListener('keydown', (e) => {
    if (['ArrowRight', 'ArrowDown'].includes(e.key)) show(idx + 1);
    if (['ArrowLeft', 'ArrowUp'].includes(e.key)) show(idx - 1);
  });

  let startX = null;
  box.addEventListener('touchstart', (e) => (startX = e.touches[0].clientX), { passive: true });
  box.addEventListener(
    'touchend',
    (e) => {
      if (startX === null) return;
      const delta = e.changedTouches[0].clientX - startX;
      if (Math.abs(delta) > 50) show(delta < 0 ? idx + 1 : idx - 1);
      startX = null;
    },
    { passive: true }
  );

  document.getElementById('copyQuoteBtn').addEventListener('click', async () => {
    await navigator.clipboard.writeText(`${testimonials[idx].q} — ${testimonials[idx].a}`);
    if (prefersReduced) return;
    emoji.style.opacity = 1;
    confetti({
      particleCount: 140,
      spread: 60,
      origin: { y: 0.7 },
      colors: ['#facc15', '#fde68a', '#0a0a0a'],
      disableForReducedMotion: true
    });
    setTimeout(() => (emoji.style.opacity = 0), 1200);
  });

  function startAuto() {
    if (prefersReduced) return;
    autoTimer = setInterval(() => show(idx + 1, false), 8000);
  }
  box.addEventListener('mouseenter', () => clearInterval(autoTimer));
  box.addEventListener('mouseleave', startAuto);
  box.addEventListener('focusin', () => clearInterval(autoTimer));
  box.addEventListener('focusout', startAuto);

  show(0, false);
  startAuto();
</script>

<section
  id="testimonials"
  class="relative isolate bg-gradient-to-br from-zinc-800 to-black py-24 px-6 text-white"
  role="region"
  aria-labelledby="testimonials-heading"
  tabindex="-1"
>
  <div class="max-w-5xl mx-auto text-center space-y-12">
    {# ⭐️ Social-proof badge #}
    <div
      class="flex justify-center items-center gap-1 text-2xl text-amber-400 animate-sparkle select-none"
      aria-hidden="true"
    >
      {% for _ in range(5) %}<span>★</span>{% endfor %}
      <span class="ml-2 text-base font-semibold text-amber-200">(5.0)</span>
    </div>

    <h2 id="testimonials-heading" class="text-3xl sm:text-4xl font-bold text-amber-400">
      What They’re Saying
    </h2>

    {# ── Carousel ──────────────────────────────── #}
    <div class="relative max-w-3xl mx-auto">
      <figure
        id="quoteBox"
        class="relative italic text-lg sm:text-xl text-white/90 rounded-xl p-8 bg-zinc-900/70 shadow-lg outline-none select-text transition-opacity duration-500"
        aria-live="polite"
        aria-atomic="true"
        tabindex="0"
      >
        <span
          id="confettiEmoji"
          class="absolute -top-4 left-1/2 -translate-x-1/2 opacity-0 transition-opacity duration-700 pointer-events-none"
          aria-hidden="true"
        >🎉🎊✨</span>

        <blockquote id="quoteText">Loading…</blockquote>
        <figcaption id="quoteAuthor" class="mt-4 text-sm font-medium text-amber-300"></figcaption>

        <button
          id="copyQuoteBtn"
          class="mt-4 text-xs text-amber-400 underline hover:text-amber-200 focus:outline-offset-4"
          aria-label="Copy testimonial to clipboard"
        >
          Copy Quote
        </button>
      </figure>

      <div class="flex justify-center mt-6 gap-2">
        {% for i in range(3) %}
        <button
          class="carousel-dot w-3 h-3 rounded-full border-2 border-amber-400 transition-transform duration-200 {% if i == 0 %}bg-amber-400 scale-110{% else %}bg-zinc-700{% endif %}"
          data-idx="{{ i }}"
          aria-label="Show testimonial {{ i + 1 }}"
        ></button>
        {% endfor %}
      </div>
    </div>

    <img
      src="https://static.wixstatic.com/media/2f0953_5d94082989fb4c4eb31f7f440de183c2~mv2.jpg/v1/fill/w_1100,h_1034,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/IMG_2031.jpg"
      alt="Team showing off championship rings"
      width="480"
      height="320"
      loading="lazy"
      class="rounded-2xl shadow-2xl ring-4 ring-amber-300/50 object-cover mx-auto"
    />
  </div>
</section>

<script defer type="module">
  import confetti from 'https://cdn.skypack.dev/canvas-confetti@1.6.0';

  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const testimonials = [
    {
      q: 'Winning felt amazing — but it’s being part of a team that believes in you that means the most.',
      a: 'Connect ATX Elite Player, Class of 2030'
    },
    {
      q: 'Being part of Connect ATX Elite helps me stay focused in school and basketball. I want to make my family proud.',
      a: 'Honor-Roll Scholar-Athlete'
    },
    {
      q: 'I’ve seen real changes in my son — he’s more disciplined, focused, and confident in class and in life.',
      a: 'Team Parent'
    }
  ];

  let idx = 0, autoTimer;
  const quoteEl = document.getElementById('quoteText');
  const authorEl = document.getElementById('quoteAuthor');
  const dots = Array.from(document.querySelectorAll('.carousel-dot'));
  const emoji = document.getElementById('confettiEmoji');
  const box = document.getElementById('quoteBox');

  function show(i, animate = true) {
    idx = (i + testimonials.length) % testimonials.length;
    quoteEl.textContent = `“${testimonials[idx].q}”`;
    authorEl.textContent = `— ${testimonials[idx].a}`;
    dots.forEach((d, j) => {
      d.classList.toggle('bg-amber-400', j === idx);
      d.classList.toggle('scale-110', j === idx);
      d.classList.toggle('bg-zinc-700', j !== idx);
    });
    if (animate && !prefersReduced) {
      box.style.opacity = 0;
      setTimeout(() => (box.style.opacity = 1), 50);
    }
  }

  dots.forEach((d) =>
    d.addEventListener('click', () => {
      clearInterval(autoTimer);
      show(+d.dataset.idx);
      startAuto();
    })
  );

  box.addEventListener('keydown', (e) => {
    if (['ArrowRight', 'ArrowDown'].includes(e.key)) show(idx + 1);
    if (['ArrowLeft', 'ArrowUp'].includes(e.key)) show(idx - 1);
  });

  let startX = null;
  box.addEventListener('touchstart', (e) => (startX = e.touches[0].clientX), { passive: true });
  box.addEventListener(
    'touchend',
    (e) => {
      if (startX === null) return;
      const delta = e.changedTouches[0].clientX - startX;
      if (Math.abs(delta) > 50) show(delta < 0 ? idx + 1 : idx - 1);
      startX = null;
    },
    { passive: true }
  );

  document.getElementById('copyQuoteBtn').addEventListener('click', async () => {
    await navigator.clipboard.writeText(`${testimonials[idx].q} — ${testimonials[idx].a}`);
    if (prefersReduced) return;
    emoji.style.opacity = 1;
    confetti({
      particleCount: 140,
      spread: 60,
      origin: { y: 0.7 },
      colors: ['#facc15', '#fde68a', '#0a0a0a'],
      disableForReducedMotion: true
    });
    setTimeout(() => (emoji.style.opacity = 0), 1200);
  });

  function startAuto() {
    if (prefersReduced) return;
    autoTimer = setInterval(() => show(idx + 1, false), 8000);
  }
  box.addEventListener('mouseenter', () => clearInterval(autoTimer));
  box.addEventListener('mouseleave', startAuto);
  box.addEventListener('focusin', () => clearInterval(autoTimer));
  box.addEventListener('focusout', startAuto);

  show(0, false);
  startAuto();
</script>

{# templates/partials/hero_overlay_quote.html #}
<div
  class="absolute bottom-8 left-1/2 -translate-x-1/2 max-w-xl px-6 py-4 bg-black/60 backdrop-blur-md rounded-xl text-center text-amber-300 text-lg sm:text-xl font-semibold tracking-wide shadow-glow select-none pointer-events-none"
  aria-hidden="true"
  data-aos="fade-up"
  data-aos-delay="350"
>
  “Building champions on and off the court — together, we rise.”
</div>

<section
  id="hero"
  class="relative isolate w-full min-h-[90vh] md:min-h-screen overflow-hidden bg-gradient-to-br from-cyber-night to-prestige-black rounded-3xl shadow-gold"
  aria-labelledby="hero-heading"
  tabindex="-1"
  data-aos="fade-in"
>
  <!-- 🔥 Ken Burns Background Image -->
  <div class="absolute inset-0 -z-10 overflow-hidden">
    <img
      src="{{ url_for('static', filename='connect-atx-team.jpg') }}"
      alt="Connect ATX Elite team after a great Championship Tournament"
      class="h-full w-full object-cover brightness-95 saturate-110 motion-safe:animate-kenburns"
      loading="eager"
      decoding="async"
      fetchpriority="high"
    />
  </div>

  <!-- ✨ Luxe animated overlay -->
  <div class="absolute inset-0 bg-gradient-to-b from-black/30 to-black/90 -z-10 animate-gradient-xy"></div>

  <!-- 🟨 Scrollbar Progress HUD -->
  <div
    id="scrollbar"
    class="fixed left-0 top-0 z-[999] h-1 w-0 bg-amber-400 origin-left transition-[width] duration-150 ease-out"
  ></div>

  <!-- 💎 Hero Core Content -->
  <div
    class="relative z-20 flex flex-col items-center justify-center h-full text-center px-6 py-32 md:py-40 max-w-7xl mx-auto"
  >
    <!-- Logo larger + hover scale + glow -->
    <img
      src="{{ url_for('static', filename='images/logo-hero.png') }}"
      alt="Connect ATX Elite Logo"
      class="w-40 md:w-48 drop-shadow-gold animate-glow gsap-logo cursor-pointer transition-transform duration-500 hover:scale-105"
      style="filter: drop-shadow(0 0 1rem #facc15);"
      loading="lazy"
      decoding="async"
      data-aos="zoom-in"
      data-aos-delay="50"
    />

    <!-- Amplified Tagline -->
    <p
      id="hero-heading"
      class="mt-6 text-2xl md:text-4xl font-extrabold text-amber-400 max-w-3xl leading-snug drop-shadow-lg animate-fade-up delay-150"
      data-aos="fade-up"
      data-aos-delay="150"
    >
      Empowering Youth Through Basketball, Brotherhood &amp; Academics
    </p>

    <!-- Upgraded CTAs -->
    <div class="mt-10 flex flex-col sm:flex-row gap-6 justify-center" data-aos="fade-up" data-aos-delay="200">
      <a
        href="#tiers"
        class="inline-block bg-amber-400 hover:bg-amber-300 text-black font-extrabold px-12 py-4 rounded-2xl shadow-[0_0_20px_#facc15] focus-visible:ring-6 ring-amber-300 transition-transform transform-gpu hover:scale-105 animate-pulse-slow"
      >
        Become a Sponsor
      </a>
      <a
        href="#about"
        class="inline-block border-2 border-amber-400 text-amber-400 font-bold px-12 py-4 rounded-2xl shadow-inner hover:bg-amber-400 hover:text-black transition"
      >
        Learn More
      </a>
    </div>

    <!-- Elevated Fundraising HUD -->
    <div
      class="mt-8 font-mono text-lg md:text-xl text-white/90 bg-black/40 backdrop-blur-sm px-6 py-2 rounded-full inline-flex items-center space-x-3 shadow-glow animate-fade-up delay-250"
      aria-live="polite"
      data-aos="fade-up"
      data-aos-delay="250"
    >
      <span>💰</span>
      <span class="font-semibold text-amber-400 tracking-wider">${{ config.get('RAISED_AMOUNT', 7900) }}</span>
      <span>raised of</span>
      <span class="font-semibold text-amber-400 tracking-wider">${{ config.get('GOAL_AMOUNT', 10000) }}</span>
      <span>goal</span>
    </div>
  </div>

  <!-- ⬇️ Larger Chevron Scroll Hint with pulse -->
  <button
    id="scroll-hint"
    class="absolute bottom-12 left-1/2 -translate-x-1/2 text-amber-300 animate-bounce-slow hover:text-amber-200 focus:outline-none scale-110"
    aria-label="Scroll down"
    data-aos="fade-up"
    data-aos-delay="300"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="w-10 h-10"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
      stroke-width="2"
    >
      <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
    </svg>
  </button>

  {% include "partials/hero_overlay_quote.html" ignore missing %}
</section>

<section
  id="cta"
  role="region"
  aria-labelledby="cta-heading"
  class="relative py-28 bg-gradient-to-b from-black via-zinc-900 to-black text-white text-center px-6"
  tabindex="-1"
>
  <div class="max-w-3xl mx-auto space-y-10">

    <!-- 1. Headline & Sub-Headline -->
    <h2
      id="cta-heading"
      class="text-4xl sm:text-5xl font-extrabold text-amber-400 drop-shadow-xl tracking-tight"
      data-aos="zoom-in"
    >
      Ready to Join Our Mission?
    </h2>
    <p
      class="text-white/85 text-lg sm:text-xl leading-relaxed"
      data-aos="fade-up" data-aos-delay="100"
    >
      Help us secure gym time, fund travel, and empower our student-athletes for life beyond the court.
    </p>

    <!-- 2. Live Progress Bar -->
    {% set raised = config.RAISED_AMOUNT %}
    {% set goal   = config.GOAL_AMOUNT %}
    <div class="w-full bg-zinc-800 rounded-full h-4 overflow-hidden" data-aos="fade-up" data-aos-delay="200" aria-hidden="true">
      <div
        class="h-4 bg-gradient-to-r from-amber-400 to-yellow-300 shadow-gold animate-pulse"
        style="width: {{ (raised/goal*100)|round(0) }}%"
        aria-valuemin="0"
        aria-valuemax="100"
        role="progressbar"
        aria-valuenow="{{ (raised/goal*100)|round(0) }}"
      ></div>
    </div>
    <div
      class="flex justify-center items-center gap-2 font-mono text-sm text-white/80"
      aria-live="polite"
      data-aos="fade-up" data-aos-delay="300"
    >
      <span role="img" aria-label="Fundraiser">💰</span>
      <span>
        <span class="font-bold text-amber-400">${{ "{:,}".format(raised) }}</span> of
        <span class="font-bold text-amber-400">${{ "{:,}".format(goal) }}</span> goal
      </span>
    </div>

    <!-- 3. Urgency Countdown -->
    <div
      id="countdown"
      class="text-amber-300 font-semibold tracking-wide text-sm sm:text-base"
      data-aos="fade-up" data-aos-delay="400"
      aria-live="polite"
    >
      <span id="cd-days">--</span>d
      <span id="cd-hours">--</span>h
      <span id="cd-mins">--</span>m left to hit our goal!
    </div>

    <!-- 4. Preset Gift Buttons + Custom Amount -->
    <div class="flex flex-wrap justify-center gap-3" data-aos="fade-up" data-aos-delay="500">
      {% for amt in [25,50,100,250] %}
      <button
        type="button"
        class="preset-amt bg-zinc-700 hover:bg-zinc-600 px-4 py-2 rounded-full font-semibold text-white transition-shadow shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-amber-400"
        data-amt="{{ amt }}"
        aria-label="Select ${{ amt }} donation amount"
      >
        ${{ amt }}
      </button>
      {% endfor %}
      <input
        id="customAmt"
        type="number" min="1" max="999"
        placeholder="Custom"
        aria-label="Custom donation amount"
        class="w-20 bg-zinc-800 text-white text-center rounded-full px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-400 border border-zinc-600"
      />
    </div>

    <!-- 5. Donate Button → Modal + Confetti -->
    <button
      id="donateBtn"
      class="mt-4 inline-block bg-amber-400 text-black font-semibold text-lg px-8 py-3 rounded-full shadow-gold hover:scale-105 hover:bg-amber-300 focus-visible:ring-4 focus-visible:ring-amber-300 transition-transform duration-300 animate-glow"
      data-aos="zoom-in" data-aos-delay="600"
      aria-haspopup="dialog"
      aria-controls="donateDialog"
    >
      Donate Now
    </button>

    <!-- QR code fallback -->
    <div class="pt-6 flex flex-col items-center gap-1" data-aos="fade-up" data-aos-delay="700">
      <img
        src="{{ url_for('static', filename='qr-website.png') }}"
        alt="Donate via QR Code"
        width="128" height="128"
        class="rounded-lg shadow-lg opacity-75 hover:opacity-100 transition"
        loading="lazy"
      >
      <p class="text-xs text-white/60">Scan: CashApp / PayPal / Venmo</p>
    </div>

    <p class="pt-6 text-sm text-white/60" data-aos="fade-up" data-aos-delay="800">
      Or contact <a href="mailto:arodgps@gmail.com" class="underline hover:text-amber-300">arodgps@gmail.com</a>
      &nbsp;| 📞 (512) 820-0475
    </p>
  </div>

  {# ——— Modal (using native <dialog>) ——— #}
  <dialog id="donateDialog" class="w-full max-w-md p-0 rounded-2xl overflow-hidden" role="dialog" aria-modal="true" aria-labelledby="donateDialogTitle">
    <form id="donateForm" method="dialog" class="bg-zinc-950 text-white p-6 space-y-4" aria-describedby="donateDialogDesc">
      <h3 id="donateDialogTitle" class="text-2xl font-bold text-amber-400">Enter Donation Amount</h3>
      <input name="amount" id="formAmt" type="number" min="1" max="999" required
             class="w-full bg-zinc-800 rounded-full px-4 py-2 text-center focus:outline-none border border-zinc-700"
             aria-label="Donation amount input" />
      <div class="flex justify-end gap-2">
        <button type="reset" class="px-4 py-2 rounded-full bg-zinc-700 hover:bg-zinc-600">Cancel</button>
        <button type="submit"
                class="px-6 py-2 rounded-full bg-amber-400 text-black font-bold hover:bg-amber-300">
          Donate
        </button>
      </div>
    </form>
  </dialog>
</section>

<script defer type="module">
import confetti from "https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/+esm";
import { loadStripe } from "https://js.stripe.com/v3";
const stripe = await loadStripe("{{ stripe_publishable }}");

// Countdown Timer
(function() {
  const target = new Date("{{ config.CAMPAIGN_END_ISO }}");
  const days = document.getElementById("cd-days"),
        hours = document.getElementById("cd-hours"),
        mins = document.getElementById("cd-mins");

  function tick() {
    const diff = target - new Date();
    if (diff <= 0) { clearInterval(timer); return; }
    const d = Math.floor(diff/86400000),
          h = Math.floor((diff%86400000)/3600000),
          m = Math.floor((diff%3600000)/60000);
    days.textContent = d; hours.textContent = h; mins.textContent = m;
  }
  const timer = setInterval(tick, 1000);
  tick();
})();

// Preset amount buttons click handler
document.querySelectorAll(".preset-amt").forEach(btn => {
  btn.addEventListener("click", () => {
    document.getElementById("formAmt").value = btn.dataset.amt;
  });
});

// Open dialog and confetti animation
const opener = document.getElementById("donateBtn");
const dialog = document.getElementById("donateDialog");
opener.addEventListener("click", () => {
  dialog.showModal();
  confetti({ particleCount: 120, spread: 70, origin: { y: 0.6 }, colors: ["#facc15", "#fef3c7"] });
});

// Handle form submission → Stripe checkout
document.getElementById("donateForm").addEventListener("submit", async e => {
  e.preventDefault();
  const amount = parseInt(document.getElementById("formAmt").value, 10);
  if (!amount || amount < 1 || amount > 999) {
    alert("Please enter a donation amount between $1 and $999.");
    return;
  }
  const res = await fetch("/api/create-checkout", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ amount }),
  });
  const { session_id } = await res.json();
  await stripe.redirectToCheckout({ sessionId: session_id });
});
</script>

{# templates/index.html — Elite-Grade Homepage (Prestige Theme) #}
{% extends "base.html" %}

{% block title %}
  Home · Connect ATX Elite
{% endblock %}

{% block extra_styles %}
  <style>
    /* ✅ Scroll-Reveal Animation */
    [data-reveal] {
      opacity: 0;
      transform: translateY(32px);
      transition:
        opacity 0.7s cubic-bezier(.22,.61,.36,1),
        transform 0.7s cubic-bezier(.22,.61,.36,1);
      will-change: opacity, transform;
    }
    [data-reveal].in-view {
      opacity: 1;
      transform: translateY(0);
    }

    /* ✨ Focus ring for accessibility */
    :focus-visible {
      outline: 3px solid #facc15;
      outline-offset: 3px;
      border-radius: 0.375rem;
    }

    /* Footer breathing room */
    section.mb-16:last-of-type {
      margin-bottom: 5rem;
    }
  </style>
{% endblock %}

{% block content %}
  <h1 id="page-title" class="sr-only">Home · Connect ATX Elite</h1>

  <main role="main" id="main-content" tabindex="-1" aria-label="Main content" class="overflow-x-hidden">

    <!-- 🏀 Hero Section -->
    <section
      id="hero"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-label="Hero Section"
      tabindex="0"
      aria-describedby="hero-desc"
    >
      {% include "partials/hero.html" %}
      <p id="hero-desc" class="sr-only">
        Empowering youth through basketball, mentorship, and academic excellence.
      </p>
    </section>

    <!-- 🥇 Sponsorship Tiers -->
    <section
      id="tiers"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-labelledby="tiers-title"
      tabindex="0"
    >
      <h2 id="tiers-title" class="sr-only">Sponsorship Tiers</h2>
      {% include "partials/tiers.html" %}
    </section>

    <!-- 💬 Testimonials -->
    <section
      id="testimonials"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-labelledby="testimonials-title"
      tabindex="0"
    >
      <h2 id="testimonials-title" class="sr-only">Testimonials</h2>
      {% include "partials/testimonials.html" %}
    </section>

    <!-- 📣 Call to Action -->
    <section
      id="ctaSection"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-labelledby="cta-title"
      tabindex="0"
    >
      <h2 id="cta-title" class="sr-only">Call To Action</h2>
      {% include "partials/cta.html" %}
    </section>

    <!-- 🌟 Sponsor Wall -->
    <section
      id="sponsor-wall"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-labelledby="sponsor-wall-title"
      tabindex="0"
    >
      <h2 id="sponsor-wall-title" class="sr-only">Sponsor Wall</h2>
      {% include "partials/sponsor_wall.html" %}
    </section>

  </main>

  <!-- 🌐 Modals and UI Widgets -->
  {% include "partials/donation_modal.html" %}
  {% include "partials/newsletter_popup.html" %}
  {% include "partials/back_to_top_ball.html" %}
  {% include "partials/toast_notifications.html" %}
  {% include "partials/vip_leaderboard.html" %}
  {% include "partials/chat_widget.html" %}
  {% include "partials/accessibility_toolbar.html" %}
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script>
    // 🚀 Scroll-Reveal Intersection Observer
    (() => {
      const elements = document.querySelectorAll('[data-reveal]');
      if (!('IntersectionObserver' in window)) return;

      const observer = new IntersectionObserver((entries, obs) => {
        for (const { isIntersecting, target } of entries) {
          if (isIntersecting) {
            target.classList.add('in-view');
            obs.unobserve(target);
          }
        }
      }, { threshold: 0.35 });

      elements.forEach(el => observer.observe(el));
    })();
  </script>
{% endblock %}

<!-- Replace your existing templates/base.html with this full version -->

<!DOCTYPE html>
<html lang="en" class="scroll-smooth dark" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <title>{% block title %}Connect ATX Elite · Empowering Youth Through Basketball{% endblock %}</title>
  <meta name="description" content="Empowering youth in Austin, TX through basketball, mentorship, and academic excellence. Sponsor our 12U AAU team today!" />
  <meta name="theme-color" content="#facc15" media="(prefers-color-scheme: light)" />
  <meta name="theme-color" content="#111827" media="(prefers-color-scheme: dark)" />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="https://www.connectatxelite.com/" />

  <!-- Open Graph / Twitter Meta -->
  <meta property="og:title" content="Connect ATX Elite" />
  <meta property="og:description" content="Sponsor our 12U AAU basketball team—invest in the next generation in Austin, TX." />
  <meta property="og:image" content="{{ url_for('static', filename='connect-atx-team.jpg') }}" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://www.connectatxelite.com/" />
  <meta property="og:site_name" content="Connect ATX Elite" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Connect ATX Elite" />
  <meta name="twitter:description" content="Join our mission to uplift youth through basketball, mentorship, and community." />
  <meta name="twitter:image" content="{{ url_for('static', filename='connect-atx-team.jpg') }}" />

  <!-- Favicon / Touch -->
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" sizes="32x32" type="image/png" />
  <link rel="apple-touch-icon" href="{{ url_for('static', filename='images/apple-touch.png') }}" sizes="180x180" />

  <!-- Stylesheets -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/tailwind.min.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/globals.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/base/back_to_top_ball.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" />
  {% block extra_styles %}{% endblock %}

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SportsTeam",
    "name": "Connect ATX Elite",
    "sport": "Basketball",
    "url": "https://www.connectatxelite.com",
    "location": {
      "@type": "Place",
      "name": "Austin, TX"
    },
    "memberOf": {
      "@type": "Organization",
      "name": "AAU"
    }
  }
  </script>
</head>

<body class="bg-white text-gray-900 antialiased dark:bg-gray-900 dark:text-white selection:bg-yellow-300/80">
  <a href="#main-content" class="sr-only focus:not-sr-only absolute top-2 left-2 bg-yellow-300 text-black px-4 py-1 rounded shadow z-50">Skip to content</a>

  {% include "partials/header.html" %}

  <main id="main-content" role="main" tabindex="-1" aria-label="Main Content">
    {% block content %}{% endblock %}
  </main>

  {% include "partials/footer.html" %}
  {% include "partials/newsletter_popup.html" %}

  <!-- 🔼 Back to Top Ball (Hardcoded) -->
  <button
    id="back-to-top-ball"
    type="button"
    aria-label="Back to top"
    class="fixed bottom-6 right-6 w-14 h-14 z-[60] rounded-full bg-amber-400/90 backdrop-blur-sm shadow-xl opacity-0 pointer-events-none scale-95 translate-y-6 transition-all duration-300 ease-out hover:scale-110 hover:shadow-2xl focus:outline-none focus-visible:ring-4 focus-visible:ring-amber-300"
  >
    <img
      src="{{ url_for('static', filename='images/ball.png') }}"
      alt=""
      aria-hidden="true"
      class="w-9 h-9 mx-auto pointer-events-none select-none"
      loading="lazy"
    />
    <span class="sr-only">Back to top</span>
  </button>

  <!-- JS Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
  <script>AOS.init({ once: true, duration: 700, easing: 'ease-out-quart' });</script>

  <script src="{{ url_for('static', filename='js/bundle.min.js') }}" defer></script>

  <!-- 🔁 Back to Top Ball Script -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const btn = document.getElementById('back-to-top-ball');
      if (!btn) return;

      btn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });

      const toggleVisibility = () => {
        if (window.scrollY > 220) {
          btn.classList.add('opacity-100', 'pointer-events-auto', 'translate-y-0', 'scale-100');
          btn.classList.remove('opacity-0', 'pointer-events-none', 'translate-y-6', 'scale-95');
        } else {
          btn.classList.add('opacity-0', 'pointer-events-none', 'translate-y-6', 'scale-95');
          btn.classList.remove('opacity-100', 'pointer-events-auto', 'translate-y-0', 'scale-100');
        }
      };

      window.addEventListener('scroll', toggleVisibility, { passive: true });
      toggleVisibility();
    });
  </script>

  {% block scripts %}{% endblock %}
</body>
</html>

<footer
  id="site-footer"
  role="contentinfo"
  class="relative bg-zinc-950 text-white py-12 px-6 border-t border-zinc-800 shadow-inner"
  data-aos="fade-up"
  data-aos-delay="200"
>
  <div class="max-w-6xl mx-auto grid gap-12 md:grid-cols-3 text-center md:text-left">

    <!-- Branding & Year -->
    <div class="space-y-2">
      <span class="block text-xs text-amber-400 font-semibold tracking-wide">AAU 12U | Austin, TX</span>
      <p class="text-sm text-white/60">© {{ now().year }} Connect ATX Elite. All rights reserved.</p>

      <!-- Newsletter capture -->
      <form
        id="newsletter-form"
        class="mt-4 flex flex-col sm:flex-row gap-2 justify-center md:justify-start"
        onsubmit="handleNewsletterSignup(event)"
        aria-label="Subscribe to newsletter"
      >
        <input
          type="email"
          name="newsletter_email"
          required
          placeholder="Your email"
          aria-required="true"
          aria-describedby="newsletterHelp"
          class="w-full sm:w-auto flex-grow px-3 py-2 rounded-lg bg-zinc-900 border border-zinc-700 focus:outline-none focus:ring-2 focus:ring-amber-400"
        />
        <button
          type="submit"
          class="px-4 py-2 bg-amber-400 text-black font-semibold rounded-lg hover:bg-amber-300 transition focus:ring-4 focus:ring-amber-400"
        >
          Subscribe
        </button>
      </form>
      <p id="newsletterHelp" class="sr-only">Enter your email to subscribe to our newsletter</p>
    </div>

    <!-- Fundraising Progress + Quick Links -->
    <div class="space-y-4 flex flex-col items-center">
      {% set raised = config.get('RAISED_AMOUNT', 0) %}
      {% set goal   = config.get('GOAL_AMOUNT', 10000) %}
      <div class="w-full max-w-xs" aria-label="Fundraising progress bar">
        <div class="flex justify-between text-xs font-mono text-amber-200 mb-1">
          <span>Raised</span>
          <span>${{ "{:,}".format(raised) }} / ${{ "{:,}".format(goal) }}</span>
        </div>
        <div
          class="relative w-full h-3 rounded-lg bg-zinc-800 overflow-hidden"
          role="progressbar"
          aria-valuemin="0"
          aria-valuemax="{{ goal }}"
          aria-valuenow="{{ raised }}"
          aria-label="Amount raised towards goal"
        >
          <div
            class="absolute inset-y-0 left-0 bg-amber-400 shadow-gold transition-all duration-700"
            style="width: {{ (raised / goal * 100)|round(0, 'floor') }}%;"
          ></div>
        </div>
      </div>

      <nav class="flex flex-wrap justify-center gap-3" role="navigation" aria-label="Footer quick links">
        <a
          href="mailto:arodgps@gmail.com"
          class="px-3 py-1 rounded bg-amber-400/10 text-amber-300 hover:bg-amber-400 hover:text-black transition focus:ring-2 focus:ring-amber-300"
          aria-label="Email Connect ATX Elite"
        >📧 Email</a>
        <a
          href="https://www.connectatxelite.com"
          target="_blank" rel="noopener"
          class="px-3 py-1 rounded bg-amber-400/10 text-amber-300 hover:bg-amber-400 hover:text-black transition focus:ring-2 focus:ring-amber-300"
          aria-label="Visit official site"
        >🌐 Site</a>
        <a
          href="https://www.paypal.com/donate/your-link"
          target="_blank" rel="noopener"
          class="px-3 py-1 rounded bg-green-400/20 text-green-200 hover:bg-green-300 hover:text-black transition focus:ring-2 focus:ring-green-200"
          aria-label="Donate via PayPal"
        >💸 Donate</a>
      </nav>
    </div>

    <!-- Contact, Countdown, and Accessible Back-to-Top -->
    <div class="space-y-4 flex flex-col items-center md:items-end">
      <address class="not-italic text-xs text-white/70 space-y-1">
        <div>
          Contact: <a href="mailto:arodgps@gmail.com" class="underline hover:text-amber-300">arodgps@gmail.com</a>
        </div>
        <div>
          Phone: <a href="tel:+15128200475" class="underline hover:text-amber-300">(512) 820-0475</a>
        </div>
      </address>

      <!-- Live countdown -->
      <div
        id="next-game-countdown"
        class="text-sm text-amber-300 font-mono"
        aria-live="polite"
        aria-atomic="true"
      >
        Next Tournament in: <span id="countdown-timer">00d 00h 00m 00s</span>
      </div>

      <!-- Accessible Back-to-Top anchor -->
      <a
        href="#main-content"
        class="mt-2 text-amber-400 underline hover:text-amber-200"
        aria-label="Back to top"
      >↑ Back to Top</a>
    </div>
  </div>

  <!-- Optional social-proof ticker -->
  <div class="mt-8 text-center text-xs text-white/50 font-mono" aria-live="polite" aria-atomic="true">
    Recent Supporters: {{ ['Acme Corp', 'Jane D.', 'Smith & Co', 'Austin Hoops', 'Elite Donor'] | join(' • ') }}
  </div>
</footer>

<script>
  // Newsletter subscription handler (stub)
  function handleNewsletterSignup(e) {
    e.preventDefault();
    const email = e.target.newsletter_email.value.trim();
    if (!email) {
      alert("Please enter a valid email address.");
      return;
    }
    alert(`🎉 Thanks! We'll keep you updated at ${email}`);
    e.target.reset();
  }

  // Countdown timer script
  const target = new Date('2025-07-01T10:00:00Z');
  function updateCountdown() {
    const now  = Date.now();
    const diff = target - now;
    if (diff <= 0) {
      document.getElementById('countdown-timer').textContent = 'Tournament started!';
      return;
    }
    const d = Math.floor(diff / 86400000),
          h = Math.floor((diff % 86400000) / 3600000),
          m = Math.floor((diff % 3600000) / 60000),
          s = Math.floor((diff % 60000) / 1000);
    document.getElementById('countdown-timer').textContent = `${d}d ${h}h ${m}m ${s}s`;
  }
  setInterval(updateCountdown, 1000);
  updateCountdown();
</script>

{# templates/partials/tiers.html — Enhanced Sponsor Tiers #}
<section
  id="tiers"
  class="py-24 bg-zinc-900 text-white px-6"
  role="region"
  aria-labelledby="tiers-heading"
  tabindex="-1"
  data-aos="fade-up"
  data-aos-duration="800"
>
  <div class="max-w-6xl mx-auto space-y-16">
    <!-- ① QR sponsor call-out -->
    <div
      class="p-6 rounded-2xl bg-gradient-to-r from-amber-400/70 to-amber-200/60 text-black flex flex-col md:flex-row items-center justify-between gap-6 shadow-gold"
      aria-label="Sponsor now call-out"
      data-aos="zoom-in"
      data-aos-delay="200"
    >
      <div>
        <p class="font-bold text-2xl sm:text-3xl">Want to make the biggest impact?</p>
        <p class="text-lg text-amber-800/80">
          Contact us at
          <a href="mailto:arodgps@gmail.com" class="underline hover:text-amber-700">
            arodgps@gmail.com
          </a>
          or scan to sponsor instantly.
        </p>
      </div>
      <img
        src="{{ url_for('static', filename='qr-sponsorship-deck.png') }}"
        alt="Sponsor via QR code"
        width="90"
        height="90"
        class="rounded-lg shadow-lg border border-amber-400 bg-white"
      />
    </div>

    <!-- ② Live progress bar -->
    {% set goal = goal_amount or 10000 %}
    {% set raised = raised_amount or 7850 %}
    <div
      class="w-full max-w-xl mx-auto text-center space-y-2"
      aria-label="{{ '$%s raised of $%s goal'|format(raised, goal) }}"
      data-aos="fade-up"
      data-aos-delay="400"
    >
      <div class="w-full bg-zinc-800 h-5 rounded-full border border-amber-400/30 overflow-hidden relative">
        <div
          id="tiersProgress"
          class="bg-amber-400 h-5 rounded-full shadow-gold transition-all duration-1000 ease-out"
          style="width: {{ (raised/goal*100)|round(1,'ceil') }}%;"
        >
          <span class="pl-2 text-black font-bold">
            {{ '$%s'|format('{:,}'.format(raised)) }}
          </span>
        </div>
      </div>
      <span class="text-sm text-amber-200">Goal: ${{ '{:,}'.format(goal) }}</span>
    </div>

    <!-- ③ Section heading -->
    <h2
      id="tiers-heading"
      class="text-4xl font-bold text-amber-400 text-center"
      data-aos="fade-up"
      data-aos-delay="600"
    >
      Sponsorship Tiers
    </h2>

    <!-- ④ Tier cards with flip effect -->
    {% set tiers = [
      ('Platinum','$5,000+','heroicons-solid:crown',['Logo on jerseys','Shout-outs on social','VIP invites'],'from-amber-500 to-amber-300',True),
      ('Gold','$2,500','heroicons-solid:currency-dollar',['Warm-ups logo','Social features','Appreciation invites'],'from-amber-400 to-amber-200',False),
      ('Silver','$1,000','heroicons-solid:medal',['Social shout-outs','Thank-you certificate','Board listing'],'from-gray-300 to-slate-100',False),
      ('Bronze','$500','heroicons-solid:trophy',['Public thank-you','Board listing'],'from-orange-400 to-amber-200',False),
      ('Custom','Any Amount','heroicons-solid:star',['Tailored benefits','Personalized impact'],'from-purple-500 to-pink-400',False)
    ] %}
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10">
      {% for title, amount, icon, benefits, gradient, highlight in tiers %}
      <div
        class="flip-card perspective"
        tabindex="0"
        data-aos="fade-up"
        data-aos-delay="{{ 700 + loop.index0 * 100 }}"
      >
        <div class="relative w-full h-full transition-transform duration-500 preserve-3d group hover:rotate-y-180 focus-within:rotate-y-180">
          <!-- Front -->
          <div class="card-face card-front p-6 rounded-2xl bg-gradient-to-br {{ gradient }} shadow-2xl text-black flex flex-col items-center justify-start space-y-4">
            {% if highlight %}
            <span class="absolute top-4 right-4 bg-black/80 text-amber-300 text-xs px-3 py-1 rounded-full font-semibold shadow">
              Top&nbsp;Tier
            </span>
            {% endif %}
            <div class="text-5xl">
              <i data-feather="{{ icon }}"></i>
            </div>
            <h3 class="text-2xl font-bold">{{ title }}</h3><span class="sr-only">Secure this tier now</span>
            <p class="text-lg font-semibold">{{ amount }}</p>
            <ul class="list-disc list-inside text-sm space-y-1">
              {% for item in benefits %}
              <li>{{ item }}</li>
              {% endfor %}
            </ul>
          </div>
          <!-- Back -->
          <div class="card-face card-back absolute inset-0 p-6 rounded-2xl bg-zinc-800 text-white flex flex-col items-center justify-center backface-hidden shadow-lg">
            <p class="mb-4 font-semibold">Secure this tier now:</p>
            <button
              class="tier-cta inline-block bg-amber-400 text-black font-bold px-6 py-2 rounded-full shadow-gold hover:scale-105 focus-visible:ring-4 focus-visible:ring-amber-300 transition"
              data-amount="{{ amount | replace('$','') | replace(',','') | default('') }}"
            >
              Sponsor {{ title }}
            </button>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- ⑤ FAQ accordion -->
    <div class="max-w-3xl mx-auto pt-10 border-t border-zinc-800" data-aos="fade-up" data-aos-delay="1100">
      <button
        id="faqToggleTiers"
        class="flex items-center gap-2 text-amber-400 font-bold text-lg hover:underline transition"
        aria-expanded="false"
        aria-controls="faqBodyTiers"
      >
        ▶ Frequently Asked Questions
      </button>
      <div
        id="faqBodyTiers"
        class="hidden mt-4 bg-zinc-900 border border-amber-400/20 rounded-xl p-6 space-y-4"
      >
        <div><b>Can I sponsor anonymously?</b><p class="text-sm text-white/80">Yes — just let us know in your message or donation form.</p></div>
        <div><b>Where does my sponsorship go?</b><p class="text-sm text-white/80">100% supports gym rental, travel, academic programs, and gear.</p></div>
        <div><b>How do I become a sponsor?</b><p class="text-sm text-white/80">Click any “Sponsor” button or email us—we’ll personalize your impact!</p></div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    feather.replace();
    document.getElementById('faqToggleTiers')?.addEventListener('click', (e) => {
      const btn = e.currentTarget;
      const body = document.getElementById('faqBodyTiers');
      const open = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!open));
      btn.textContent = (open ? '▶' : '▼') + ' Frequently Asked Questions';
      body.classList.toggle('hidden', open);
    });

    document.querySelectorAll('.tier-cta').forEach((btn) => {
      btn.addEventListener('click', () => {
        const amt = btn.dataset.amount;
        const dlg = document.getElementById('donateDialog');
        if (dlg) {
          dlg.querySelector('input[name="amount"]').value = amt;
          dlg.showModal();
        }
      });
    });
  });
</script>

<style>
  .perspective { perspective: 1000px; }
  .preserve-3d { transform-style: preserve-3d; }
  .rotate-y-180 { transform: rotateY(180deg); }
  .card-face { backface-visibility: hidden; }
  .card-front { position: relative; }
  .card-back { transform: rotateY(180deg); }
  .backface-hidden { backface-visibility: hidden; }
</style>

<section
  id="challenge"
  class="relative overflow-hidden py-16 px-6 bg-gradient-to-br from-zinc-900 via-black to-zinc-950 border-l-4 border-red-400/80"
  aria-labelledby="challenge-heading"
  tabindex="-1"
>
  <!-- 1. Parallax background image -->
  <div
    class="absolute inset-0 -z-10 bg-[url('/static/images/gym-chutes.jpg')] bg-center bg-cover motion-safe:animate-kenburns"
    style="background-attachment: fixed"
    aria-hidden="true"
  ></div>

  <h2
    id="challenge-heading"
    class="text-2xl md:text-3xl font-bold text-red-400 mb-6 drop-shadow-lg"
    data-aos="fade-up"
    data-aos-delay="100"
  >
    The Challenge We Face
  </h2>

  <p
    class="text-lg text-white/80 max-w-3xl mx-auto mb-8 leading-relaxed"
    data-aos="fade-up"
    data-aos-delay="200"
  >
    Despite the love and energy behind our program, we struggle with consistent access to gym space
    and the high cost of tournament travel across states. These financial barriers place a heavy
    strain on our volunteer coaches and passionate parents — limiting the full potential of our kids
    to grow, bond, and succeed together.
  </p>

  <!-- 2. Impact metrics badges -->
  <div
    class="flex flex-wrap justify-center gap-6 mb-8"
    data-aos="fade-up"
    data-aos-delay="300"
    role="list"
  >
    <div
      class="flex flex-col items-center bg-zinc-800/70 px-6 py-4 rounded-xl shadow-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-red-400"
      tabindex="0"
      role="listitem"
      aria-label="120 plus hours of gym time lost"
    >
      <span class="text-3xl font-extrabold text-red-400" data-count="120">0</span>
      <span class="text-white/80 text-sm">Hours of Gym Time Lost</span>
    </div>
    <div
      class="flex flex-col items-center bg-zinc-800/70 px-6 py-4 rounded-xl shadow-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-red-400"
      tabindex="0"
      role="listitem"
      aria-label="800 tournament miles traveled"
    >
      <span class="text-3xl font-extrabold text-red-400" data-count="800">0</span>
      <span class="text-white/80 text-sm">Tournament Miles Traveled</span>
    </div>
  </div>

  <!-- 3. Animated progress bar -->
  <div
    class="max-w-2xl mx-auto mb-8"
    data-aos="fade-up"
    data-aos-delay="400"
    role="region"
    aria-labelledby="gym-rental-label"
  >
    <div id="gym-rental-label" class="text-sm text-white/70 mb-1 flex justify-between">
      <span>Gym Rental Funding</span>
      <span><strong id="gym-funded" aria-live="polite">45%</strong> funded</span>
    </div>
    <div
      class="w-full h-2 bg-zinc-800 rounded-full overflow-hidden"
      role="progressbar"
      aria-valuemin="0"
      aria-valuemax="100"
      aria-valuenow="45"
      aria-label="Gym Rental Funding progress bar"
    >
      <div
        id="gym-progress-bar-fill"
        class="h-full bg-red-400 transition-all duration-1000 ease-out"
        style="width: 0%"
      ></div>
    </div>
  </div>

  <!-- 4. Sponsor CTA -->
  <div class="text-center mb-12" data-aos="fade-up" data-aos-delay="500">
    <a
      href="mailto:arodgps@gmail.com?subject=Gym%20Space%20Sponsorship"
      class="inline-block bg-red-400 hover:bg-red-300 text-black font-bold px-8 py-3 rounded-full shadow-lg transition-transform hover:scale-105 focus-visible:ring-4 focus-visible:ring-red-300 focus:outline-none"
    >
      Sponsor a Practice
    </a>
  </div>

  <!-- 5. Parent testimonial pop-over -->
  <div
    class="relative max-w-3xl mx-auto"
    data-aos="fade-up"
    data-aos-delay="600"
  >
    <p class="text-xs text-white/60 italic">
      “Without enough court time, my son lost valuable training hours this season.”
    </p>
    <button
      type="button"
      class="absolute top-0 right-0 p-2 text-white/70 hover:text-white transition focus:outline-none focus:ring-2 focus:ring-red-400 rounded"
      aria-describedby="testimonial-pop"
      aria-expanded="false"
      aria-controls="testimonial-pop"
      id="testimonial-toggle"
      onmouseenter="showTestimonial(true)"
      onmouseleave="showTestimonial(false)"
      onfocus="showTestimonial(true)"
      onblur="showTestimonial(false)"
    >
      ℹ️
    </button>
    <div
      id="testimonial-pop"
      class="hidden absolute right-0 mt-10 w-64 p-4 bg-zinc-900/90 text-white text-sm rounded-lg shadow-lg"
      role="tooltip"
      aria-live="polite"
    >
      <strong>Team Parent, Class of 2030</strong><br />
      “We missed 8 practices this year due to no gym—every donation helps keep us on court!”
    </div>
  </div>
</section>

<script>
  // Animate count-up for badges
  document.addEventListener('DOMContentLoaded', () => {
    const counters = document.querySelectorAll('[data-count]');
    counters.forEach((el) => {
      const target = +el.getAttribute('data-count');
      let count = 0;
      const step = Math.max(1, Math.floor(target / 50));
      const interval = setInterval(() => {
        count += step;
        if (count >= target) {
          el.textContent = target;
          clearInterval(interval);
        } else {
          el.textContent = count;
        }
      }, 30);
    });

    // Animate progress bar fill
    const progressBarFill = document.getElementById('gym-progress-bar-fill');
    if (progressBarFill) {
      setTimeout(() => {
        progressBarFill.style.width = '45%';
      }, 500); // Delay to sync with AOS animation
    }
  });

  function showTestimonial(show) {
    const pop = document.getElementById('testimonial-pop');
    const toggle = document.getElementById('testimonial-toggle');
    if (show) {
      pop.classList.remove('hidden');
      toggle.setAttribute('aria-expanded', 'true');
    } else {
      pop.classList.add('hidden');
      toggle.setAttribute('aria-expanded', 'false');
    }
  }
</script>

{# templates/partials/sponsor_wall.html #}
<section
  id="sponsor-wall"
  role="region"
  aria-labelledby="sponsor-heading"
  class="bg-zinc-950/95 py-12 border-t border-zinc-800 text-center text-white"
  data-aos="fade-up"
  data-aos-delay="300"
>
  <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 space-y-8">

    <!-- Funding HUD -->
    <div id="funding-hud" class="w-full max-w-xl mx-auto">
      <div class="flex justify-between text-sm font-mono text-amber-200 mb-1">
        <span>Raised</span>
        <span>
          <span id="funding-raised-amount" aria-live="polite">${{ funding_raised or 0 }}</span> /
          <span id="funding-goal-amount">${{ funding_goal or 10000 }}</span>
        </span>
      </div>
      <div class="relative w-full h-4 rounded-full bg-zinc-800 overflow-hidden">
        <div 
          id="funding-progress-bar"
          class="absolute inset-y-0 left-0 bg-amber-400 shadow-gold transition-all duration-700"
          data-raised="{{ funding_raised or 0 }}"
          data-goal="{{ funding_goal or 10000 }}"
          role="progressbar"
          aria-valuemin="0"
          aria-valuemax="{{ funding_goal or 10000 }}"
          aria-valuenow="{{ funding_raised or 0 }}"
          style="width: {{ ((funding_raised or 0) / (funding_goal or 10000) * 100) | round(1) }}%;"
        ></div>
      </div>
    </div>

    <!-- Sponsor Section Header -->
    <header class="space-y-2">
      <h2
        id="sponsor-heading"
        class="text-2xl sm:text-3xl font-extrabold text-amber-400 tracking-tight"
      >
        Our Generous Sponsors
      </h2>
      <p class="text-sm sm:text-base text-amber-200">
        Every logo below represents a family or company that keeps our kids on the court—thank you!
      </p>
      <p id="sponsor-count" class="text-xs text-white/70 italic" aria-live="polite">
        {{ sponsors|length }} Sponsor{{ sponsors|length != 1 and 's' or '' }} and counting!
      </p>
    </header>

    {% if sponsors %}
    <div class="relative overflow-x-auto vendor-marquee">
      <ul class="inline-flex items-center gap-8 whitespace-nowrap py-4" aria-label="Sponsor logos">
        {% for sponsor in sponsors %}
        <li class="relative shrink-0">
          <a
            href="{{ sponsor.website or '#' }}"
            target="_blank"
            rel="noopener noreferrer"
            class="group inline-block"
            aria-label="Visit {{ sponsor.name }}"
          >
            <img
              src="{{ sponsor.logo_url }}"
              alt="{{ sponsor.name }} logo"
              class="h-16 sm:h-20 grayscale group-hover:grayscale-0 transition duration-300"
              loading="lazy"
              width="160"
              height="80"
            />
            {% if sponsor.tier == 'Platinum' %}
            <span class="absolute top-0 right-0 bg-amber-400 text-black text-xs font-bold px-1 rounded-bl">PLATINUM</span>
            {% endif %}
          </a>
        </li>
        {% endfor %}
      </ul>
    </div>
    {% else %}
    <ul class="grid grid-cols-3 sm:grid-cols-5 gap-6">
      {% for _ in range(5) %}
      <li class="h-16 sm:h-20 bg-zinc-800 animate-pulse rounded-lg"></li>
      {% endfor %}
    </ul>
    <p class="text-sm text-gray-400 mb-4">
      Your logo could be here—become a founding sponsor today!
    </p>
    {% endif %}

    <div>
      <a
        href="#donateModal"
        hx-get="/modal/sponsor"
        class="inline-flex items-center gap-2 rounded-lg bg-amber-400/90 px-6 py-2 text-sm font-semibold text-zinc-900 shadow-md hover:bg-amber-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 transition"
        aria-label="Become a Sponsor"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-4 w-4"
          fill="currentColor"
          viewBox="0 0 16 16"
          aria-hidden="true"
        >
          <path d="M8 0a8 8 0 100 16A8 8 0 008 0zM4 7.5h8v1H4v-1z" />
        </svg>
        Become a Sponsor
      </a>
    </div>
  </div>
</section>

<style>
  @keyframes m-arquee {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(calc(-1 * (100% - 100vw)));
    }
  }
  .vendor-marquee ul {
    animation: m-arquee 30s linear infinite;
  }
  .vendor-marquee:hover ul {
    animation-play-state: paused;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const marquee = document.querySelector('.vendor-marquee ul');
    if (!marquee) return;
    const totalW = marquee.scrollWidth;
    const viewport = document.documentElement.clientWidth;
    const duration = Math.max(20, (totalW / viewport) * 30);
    marquee.style.animationDuration = duration + 's';
  });
</script>

<div
  id="newsletterPopup"
  class="fixed inset-0 z-[9999] flex items-center justify-center bg-black bg-opacity-80 opacity-0 pointer-events-none transition-opacity duration-300"
  role="dialog"
  aria-modal="true"
  aria-labelledby="newsletterTitle"
  aria-describedby="newsletterDesc"
>
  <div
    class="bg-zinc-900 text-white rounded-lg shadow-xl max-w-sm w-full p-6 relative"
    role="document"
  >
    <button
      id="newsletterCloseBtn"
      aria-label="Close newsletter popup"
      class="absolute top-3 right-3 text-amber-400 hover:text-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-400 rounded"
      type="button"
    >
      &times;
    </button>
    <h2 id="newsletterTitle" class="text-2xl font-bold mb-2">Join Our Newsletter</h2>
    <p id="newsletterDesc" class="mb-4 text-white/80">
      Stay updated on our latest news and events.
    </p>
    <form id="newsletterForm" class="space-y-4" novalidate>
      <input
        type="email"
        aria-label="Email address"
        name="email"
        required
        placeholder="Your email"
        class="w-full rounded px-3 py-2 bg-zinc-800 text-white focus:outline-none focus:ring-2 focus:ring-amber-400"
      />
      <button
        type="submit"
        class="w-full bg-amber-400 text-black font-semibold rounded py-2 hover:bg-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-400 transition"
      >
        Subscribe
      </button>
    </form>
  </div>
</div>

<style>
  /* Visible popup */
  #newsletterPopup.show {
    opacity: 1 !important;
    pointer-events: auto !important;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const popup = document.getElementById("newsletterPopup");
    const closeBtn = document.getElementById("newsletterCloseBtn");
    const form = document.getElementById("newsletterForm");

    // Show popup after 5 seconds with fade-in
    setTimeout(() => {
      popup.classList.add("show");
      // Focus first input for accessibility
      form.email.focus();
    }, 5000);

    // Close popup handler
    closeBtn.addEventListener("click", () => {
      popup.classList.remove("show");
    });

    // Close on click outside content
    popup.addEventListener("click", (e) => {
      if (e.target === popup) {
        popup.classList.remove("show");
      }
    });

    // Trap focus inside popup for accessibility
    popup.addEventListener("keydown", (e) => {
      if (e.key === "Tab") {
        const focusableElements = popup.querySelectorAll(
          'a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])'
        );
        const firstElem = focusableElements[0];
        const lastElem = focusableElements[focusableElements.length - 1];
        if (e.shiftKey) {
          if (document.activeElement === firstElem) {
            lastElem.focus();
            e.preventDefault();
          }
        } else {
          if (document.activeElement === lastElem) {
            firstElem.focus();
            e.preventDefault();
          }
        }
      } else if (e.key === "Escape") {
        popup.classList.remove("show");
      }
    });

    // Handle form submission (stub)
    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const email = form.email.value.trim();
      if (email) {
        alert(`Thanks for subscribing, ${email}!`);
        form.reset();
        popup.classList.remove("show");
      } else {
        alert("Please enter a valid email address.");
      }
    });
  });
</script>

<body id="bodyRoot" class="bg-zinc-950 text-white font-sans antialiased fade-in dark:bg-black" aria-live="polite">
  <!-- 🔗 Accessible Skip Link -->
  <a
    href="#main-content"
    class="sr-only focus:not-sr-only fixed top-4 left-4 z-[9999] bg-amber-400 text-black font-bold px-4 py-2 rounded shadow-lg focus:outline-none focus-visible:ring-2 ring-black transition"
  >
    ⤵ Skip to Content
  </a>

  <!-- ─── Header ────────────────────────────── -->
  <header
    role="banner"
    class="sticky top-0 z-50 w-full bg-black/95 backdrop-blur-sm border-b border-amber-500/20 shadow-xl transition-all duration-300 ease-in-out"
  >
    <div class="max-w-7xl mx-auto flex items-center justify-between px-4 py-4 md:px-8">
      <!-- 🔰 Logo + Brand -->
      <a
        href="{{ url_for('main.index') }}"
        class="flex items-center gap-3 group focus:outline-none focus-visible:ring-2 ring-amber-400"
      >
        <img
          src="{{ url_for('static', filename='logo-atx-elite.png') }}"
          class="w-12 h-12 rounded-full shadow-md ring-2 ring-amber-400 group-hover:scale-105 transition-transform duration-200"
          loading="lazy"
          decoding="async"
          alt="Connect ATX Elite Logo"
        />
        <span
          class="text-2xl font-extrabold tracking-tight text-amber-400 drop-shadow-[0_2px_4px_rgba(250,204,21,0.25)] select-none"
          aria-label="Connect ATX Elite"
        >
          Connect ATX Elite
        </span>
      </a>

      <!-- 🧭 Desktop Nav -->
      <nav aria-label="Primary navigation" class="hidden md:flex items-center gap-8 text-lg font-medium">
        {% for link in ['about', 'tiers', 'testimonials', 'faq', 'contact'] %}
          <a
            href="#{{ link }}"
            class="text-white hover:text-amber-400 focus:text-amber-400 transition-colors duration-150"
          >
            {{ link.capitalize() }}
          </a>
        {% endfor %}
      </nav>

      <!-- 🟨 Sponsor CTA (Desktop) -->
      <div class="hidden md:block">
        <a
          href="#tiers"
          class="px-6 py-2 rounded-full bg-amber-400 text-black font-bold shadow-lg hover:bg-amber-300 focus-visible:ring-4 ring-amber-400 transition animate-glow"
        >
          Become a Sponsor
        </a>
      </div>

      <!-- 🌙 Dark Mode Toggle Button -->
      <button
        id="themeToggle"
        type="button"
        class="ml-4 rounded-full p-2 bg-zinc-800/80 backdrop-blur hover:bg-zinc-700 text-amber-400 shadow-lg focus-visible:ring-4 focus-visible:ring-amber-200 transition"
        aria-label="Toggle dark mode"
        title="Toggle light/dark mode"
      >
        🌙
      </button>

      <!-- 📱 Mobile Menu Button -->
      <button
        id="mobileMenuButton"
        type="button"
        class="md:hidden flex items-center text-amber-400 focus:outline-none focus-visible:ring-2 ring-amber-400 ml-2"
        aria-label="Open mobile navigation menu"
        aria-controls="mobile-menu"
        aria-expanded="false"
      >
        <svg class="w-8 h-8" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 8h16M4 16h16" />
        </svg>
      </button>
    </div>

    <!-- 📱 Mobile Menu -->
    <nav
      id="mobile-menu"
      class="md:hidden hidden px-4 pb-4 bg-black/95 border-t border-amber-500/20 animate-fade-in-down"
      aria-label="Mobile navigation"
      tabindex="-1"
    >
      {% for link in ['about', 'tiers', 'testimonials', 'faq', 'contact'] %}
        <a
          href="#{{ link }}"
          class="block py-2 text-lg text-white hover:text-amber-400 focus:text-amber-400 transition"
        >
          {{ link.capitalize() }}
        </a>
      {% endfor %}
      <a
        href="#tiers"
        class="block mt-4 py-2 px-6 text-center rounded-full bg-amber-400 text-black font-bold shadow-md hover:bg-amber-300 focus-visible:ring-2 ring-amber-400 transition"
      >
        Become a Sponsor
      </a>
    </nav>
  </header>

  <!-- ─── Scripts ───────────────────────────── -->
  <script>
    // Dark mode toggle logic
    (() => {
      const root = document.documentElement;
      const btn = document.getElementById('themeToggle');
      const stored = localStorage.getItem('theme');

      // Initialize button icon & theme on page load
      if (stored === 'dark' || (!stored && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        root.classList.add('dark');
        btn.textContent = '☀️';
      } else {
        btn.textContent = '🌙';
      }

      // Toggle theme on button click
      btn.addEventListener('click', () => {
        root.classList.toggle('dark');
        const isDark = root.classList.contains('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        btn.textContent = isDark ? '☀️' : '🌙';
      });
    })();

    // Mobile menu toggle logic
    (() => {
      const mobileBtn = document.getElementById('mobileMenuButton');
      const mobileMenu = document.getElementById('mobile-menu');

      mobileBtn.addEventListener('click', () => {
        const expanded = mobileBtn.getAttribute('aria-expanded') === 'true';
        mobileBtn.setAttribute('aria-expanded', String(!expanded));
        mobileMenu.classList.toggle('hidden');
        if (!expanded) {
          mobileMenu.focus();
        }
      });
    })();
  </script>

{# templates/partials/back_to_top_ball.html #}
<button
  id="back-to-top-ball"
  type="button"
  aria-label="Back to top"
  class="fixed bottom-6 right-6 w-14 h-14 z-[60] rounded-full bg-amber-400/90 backdrop-blur-sm shadow-xl opacity-0 pointer-events-none scale-95 translate-y-6 transition-all duration-300 ease-out hover:scale-110 hover:shadow-2xl focus:outline-none focus-visible:ring-4 focus-visible:ring-amber-300"
>
  <img
    src="{{ url_for('static', filename='images/ball.png') }}"
    alt=""
    aria-hidden="true"
    class="w-9 h-9 mx-auto pointer-events-none select-none"
    loading="lazy"
  />
  <span class="sr-only">Back to top</span>
</button>

<section
  id="faq"
  class="bg-black py-12 text-white"
  aria-labelledby="faq-heading"
  data-aos="fade-up"
  data-aos-delay="100"
>
  <div class="max-w-2xl mx-auto px-4">
    <h2 id="faq-heading" class="text-2xl font-bold text-amber-400 mb-6 text-center">
      Frequently Asked Questions
    </h2>

    <!-- 1. Search filter -->
    <div class="mb-6">
      <label for="faq-search" class="sr-only">Search FAQs</label>
      <input
        id="faq-search"
        type="search"
        placeholder="Search questions…"
        aria-label="Search FAQs"
        class="w-full bg-zinc-800 rounded-full px-4 py-2 placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-amber-400"
      />
    </div>

    <ul class="divide-y divide-zinc-700" id="faq-list">
      {% set faqs = [
        {"q":"Can I sponsor anonymously?","a":"Absolutely — just let us know in your message or donation form."},
        {"q":"How are donations used?","a":"100% supports gym rental, tournament fees, travel costs, academic programs, and gear for our student-athletes."},
        {"q":"How do I become a sponsor?","a":"Use the “Become a Sponsor” button or email us — we’ll reach out to personalize your sponsorship!"}
      ] %}
      {% for faq in faqs %}
      <li class="py-4">
        <button
          type="button"
          class="faq-toggle flex w-full justify-between items-center text-left font-medium focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-400"
          aria-expanded="false"
          aria-controls="panel-{{ loop.index }}"
          id="panel-{{ loop.index }}-label"
          data-target="panel-{{ loop.index }}"
        >
          <span>{{ faq.q }}</span>
          <svg
            class="w-5 h-5 transform transition-transform"
            aria-hidden="true"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"
            />
          </svg>
        </button>
        <div
          id="panel-{{ loop.index }}"
          class="mt-2 pr-8 text-zinc-300 hidden"
          role="region"
          aria-labelledby="panel-{{ loop.index }}-label"
        >
          <p>{{ faq.a }}</p>
        </div>
      </li>
      {% endfor %}
    </ul>

    <!-- 5. Quick-help chat -->
    <div class="mt-8 text-center">
      <a
        href="https://wa.me/15128200475?text=Hi%20Connect%20ATX%20Elite!"
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center gap-2 bg-green-500 hover:bg-green-600 text-white font-semibold px-5 py-3 rounded-full shadow-md transition"
        aria-label="Chat with us on WhatsApp"
      >
        💬 Live Chat Help
      </a>
    </div>
  </div>
</section>

<script>
  // Accordion toggle behavior with aria updates
  document.querySelectorAll('.faq-toggle').forEach((btn) => {
    btn.addEventListener('click', () => {
      const expanded = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!expanded));
      btn.querySelector('svg').classList.toggle('rotate-180', !expanded);
      const panel = document.getElementById(btn.dataset.target);
      if (expanded) {
        panel.classList.add('hidden');
        panel.setAttribute('hidden', '');
      } else {
        panel.classList.remove('hidden');
        panel.removeAttribute('hidden');
      }
    });
  });

  // Live search filter for FAQ questions
  document.getElementById('faq-search').addEventListener('input', (e) => {
    const term = e.target.value.toLowerCase();
    document.querySelectorAll('#faq-list li').forEach((li) => {
      const question = li.querySelector('.faq-toggle span').textContent.toLowerCase();
      li.style.display = question.includes(term) ? '' : 'none';
    });
  });
</script>

{# templates/partials/donation_modal.html — Enhanced Donation Modal #}
<dialog
  id="donateDialog"
  aria-modal="true"
  aria-labelledby="donateDialogTitle"
  class="w-full max-w-md p-0 rounded-2xl overflow-hidden shadow-xl backdrop:bg-black/60 z-[45]"
>
  <form id="donateForm" method="dialog" class="bg-zinc-900 text-white">
    <header class="flex justify-between items-center px-6 py-4 bg-amber-400 text-black">
      <h3 id="donateDialogTitle" class="text-lg font-bold">Support the Team 🏀</h3>
      <button
        type="button"
        class="text-2xl leading-none focus:outline-none focus:ring-2 focus:ring-amber-500 rounded"
        aria-label="Close"
        tabindex="0"
      >
        &times;
      </button>
    </header>
    <div class="px-6 py-4 space-y-4">
      <p class="text-sm text-white/75">100% of proceeds cover gym time & travel.</p>

      <label class="block">
        <span class="text-sm">Your Email (receipt)</span>
        <input
          name="email"
          type="email"
          required
          class="mt-1 w-full px-3 py-2 bg-zinc-800 rounded focus:ring-2 focus:ring-amber-400"
          autocomplete="email"
        />
      </label>

      <label class="block">
        <span class="text-sm">Amount (USD)</span>
        <input
          name="amount"
          type="number"
          min="1"
          max="999"
          value="25"
          required
          class="mt-1 w-full px-3 py-2 bg-zinc-800 rounded focus:ring-2 focus:ring-amber-400"
          autocomplete="off"
          inputmode="numeric"
        />
      </label>

      <button
        id="stripeBtn"
        type="submit"
        class="w-full inline-block text-center bg-amber-400 text-black font-semibold py-2 rounded-lg shadow transition hover:bg-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-500"
        data-stripe
      >
        Donate with Card
      </button>

      <hr class="border-zinc-700" />

      <a
        href="{{ paypal_link or '#' }}"
        class="w-full block text-center bg-blue-600 text-white font-semibold py-2 rounded-lg shadow transition hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-400"
        target="_blank"
        rel="noopener noreferrer"
      >
        Donate with PayPal
      </a>
    </div>
  </form>
</dialog>

<style>
  /* Dialog z-index layering */
  #donateDialog {
    z-index: 100000 !important;
  }
  /* Native dialog backdrop styling */
  #donateDialog::backdrop {
    background: rgba(0, 0, 0, 0.55);
    z-index: 44 !important;
  }
  /* Responsive full width on small screens */
  @media (max-width: 500px) {
    #donateDialog {
      max-width: 98vw;
      border-radius: 1rem;
    }
  }
</style>

<script defer type="module">
  import confetti from 'https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/+esm';
  import { loadStripe } from 'https://js.stripe.com/v3/';

  (async () => {
    const stripe = await loadStripe('{{ stripe_publishable }}');
    const dialog = document.getElementById('donateDialog');
    const form = document.getElementById('donateForm');

    // Open dialog on any element with [data-open-donate] attribute
    document.querySelectorAll('[data-open-donate]').forEach(btn => {
      btn.addEventListener('click', () => {
        const amount = btn.dataset.amount || '25';
        dialog.querySelector('input[name=amount]').value = amount;
        dialog.showModal();
        confetti({ particleCount: 80, spread: 60, origin: { y: 0.6 } });
      });
    });

    // Close dialog on close button click
    dialog.querySelector('button[aria-label="Close"]').onclick = () => dialog.close();

    // Close dialog on outside click
    dialog.addEventListener('click', e => {
      if (e.target === dialog) dialog.close();
    });

    // Prevent dialog from closing on ESC (optional, can be removed if you want ESC to close)
    dialog.addEventListener('cancel', e => e.preventDefault());

    // Handle form submission and trigger Stripe Checkout
    form.addEventListener('submit', async e => {
      e.preventDefault();
      const email = form.email.value;
      const amount = parseInt(form.amount.value, 10);
      if (!amount || amount < 1 || amount > 999) {
        alert('Please enter a valid donation amount between $1 and $999.');
        return;
      }
      const res = await fetch('/api/create-checkout', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ amount, email }),
      });
      const { session_id } = await res.json();
      await stripe.redirectToCheckout({ sessionId: session_id });
    });

    // Trap focus within dialog for accessibility
    dialog.addEventListener('keydown', e => {
      if (e.key === 'Tab') {
        const focusable = Array.from(dialog.querySelectorAll('input, button, a'));
        const idx = focusable.indexOf(document.activeElement);
        let next = idx + (e.shiftKey ? -1 : 1);
        if (next < 0) next = focusable.length - 1;
        if (next >= focusable.length) next = 0;
        focusable[next].focus();
        e.preventDefault();
      }
    });
  })();
</script>

<section
  id="about"
  class="py-24 px-6 bg-zinc-950 text-white space-y-20"
  role="region"
  aria-labelledby="about-heading"
  tabindex="-1"
>
  <!-- 🎯 Our Mission -->
  <div class="max-w-5xl mx-auto space-y-6" data-aos="fade-up" data-aos-delay="100">
    <h2 id="about-heading" class="text-3xl sm:text-4xl font-bold text-amber-400">
      Our Mission
    </h2>
    <p class="text-lg sm:text-xl leading-relaxed text-white/90">
      Connect ATX Elite is a community‑powered, non‑profit <strong>12U AAU</strong> basketball program based
      in Austin, TX. We develop not only skilled athletes, but confident, disciplined, and
      academically driven young leaders.
    </p>
    <p class="text-lg sm:text-xl leading-relaxed text-white/70">
      Many of our boys are honor‑roll students thriving in a positive environment of teamwork,
      mentorship, and integrity. Through basketball we teach life lessons that extend far beyond the
      court.
    </p>
  </div>

  <!-- ⭐️ Impact Stats -->
  <div
    class="max-w-5xl mx-auto"
    data-aos="fade-up"
    data-aos-delay="300"
    aria-label="Program Impact Stats"
    role="list"
  >
    <div class="flex flex-wrap justify-center gap-8 md:gap-14 py-8">
      {% set impact = [
        {"label": "Players Enrolled", "value": 16},
        {"label": "Honor Roll Scholars", "value": 11},
        {"label": "Tournaments Played", "value": 12},
        {"label": "Years Running", "value": 3}
      ] %}
      {% for stat in impact %}
      <div
        class="bg-zinc-900/80 border border-amber-400/20 shadow-gold rounded-xl px-8 py-6 min-w-[150px] text-center focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-400"
        tabindex="0"
        role="listitem"
        aria-label="{{ stat.value }} {{ stat.label }}"
      >
        <div
          class="text-3xl font-extrabold text-amber-400"
          data-count="{{ stat.value }}"
          id="countup-{{ loop.index0 }}"
          >0</div>
        <div class="text-white/80 text-base font-medium">{{ stat.label }}</div>
      </div>
      {% endfor %}
    </div>
  </div>

  <!-- 🟧 Divider -->
  <div
    class="w-16 h-1 mx-auto rounded-full bg-gradient-to-r from-amber-400/60 to-amber-300/60"
    data-aos="fade-up"
    data-aos-delay="450"
    aria-hidden="true"
  ></div>

  <!-- ⚠️ Challenge with Tooltip Enhancement -->
  <div class="max-w-5xl mx-auto" data-aos="fade-up" data-aos-delay="550">
    <div
      class="group relative rounded-2xl shadow-lg bg-gradient-to-br from-zinc-900 via-black to-zinc-950 border-l-4 border-red-400/80 px-7 py-8 space-y-6 cursor-help focus:outline-none focus-visible:ring-2 focus-visible:ring-red-400"
      role="region"
      aria-labelledby="challenge-heading"
      tabindex="0"
      aria-describedby="challenge-tooltip"
    >
      <h3 id="challenge-heading" class="text-2xl sm:text-3xl font-semibold text-red-400">
        The Challenge We Face
      </h3>
      <p class="text-lg sm:text-xl leading-relaxed text-white/80">
        We struggle with consistent gym space and the high cost of tournament travel. These barriers
        strain our volunteer coaches and parents — limiting our kids’ ability to grow, bond, and
        succeed together.
      </p>

      <!-- Tooltip -->
      <div
        id="challenge-tooltip"
        role="tooltip"
        class="absolute left-1/2 bottom-full mb-3 w-72 rounded-md bg-black/90 px-4 py-3 text-sm text-amber-200 shadow-lg opacity-0 pointer-events-none transition-opacity duration-300 group-hover:opacity-100 group-focus:opacity-100 -translate-x-1/2"
      >
        Help us secure resources to expand gym access, reduce travel costs, and invest in our coaches.
      </div>
    </div>
  </div>

  <!-- 💡 Impact supporters can make -->
  <div class="max-w-5xl mx-auto space-y-6" data-aos="fade-up" data-aos-delay="700">
    <h3 class="text-2xl sm:text-3xl font-semibold text-green-400">The Impact You Can Make</h3>
    <ul class="list-disc list-inside space-y-2 text-lg sm:text-xl text-white/85 pl-4 md:pl-8" role="list">
      <li>Secure a consistent gym space for practices</li>
      <li>Support travel & lodging costs for tournaments</li>
      <li>Provide uniforms, gear, meals, and hydration</li>
      <li>Fund academic support and mentorship programs</li>
    </ul>
    <p class="pt-4 text-lg sm:text-xl font-semibold text-white">
      With your help, we can give these young athletes the foundation to become confident,
      accomplished leaders.
    </p>
  </div>

  <!-- ✨ Call to Action Button -->
  <div class="max-w-5xl mx-auto text-center" data-aos="fade-up" data-aos-delay="850">
    <a
      href="#tiers"
      class="inline-block bg-amber-400 hover:bg-amber-300 text-black font-extrabold px-12 py-4 rounded-3xl shadow-[0_0_25px_#facc15] focus-visible:ring-4 ring-amber-300 transition-transform transform-gpu hover:scale-105 animate-pulse-slow"
      aria-label="Become a Sponsor"
    >
      Become a Sponsor & Support Our Mission
    </a>
  </div>
</section>

<script>
  // Animated count-up for stats
  document.addEventListener('DOMContentLoaded', () => {
    const counters = document.querySelectorAll('[data-count]');
    counters.forEach((el) => {
      const target = +el.getAttribute('data-count');
      let count = 0;
      const step = Math.max(1, Math.floor(target / 50));
      const interval = setInterval(() => {
        count += step;
        if (count >= target) {
          el.textContent = target;
          clearInterval(interval);
        } else {
          el.textContent = count;
        }
      }, 30);
    });
  });
</script>

<section
  id="goal"
  class="relative isolate overflow-hidden rounded-3xl bg-luxe-night/90 p-6 text-center text-white shadow-2xl"
  data-aos="fade-up"
  data-aos-delay="300"
>
  <!-- 1. Radial gauge background -->
  <svg class="absolute inset-0 w-full h-full -z-10" viewBox="0 0 200 200" aria-hidden="true" focusable="false">
    <defs>
      <linearGradient id="gauge-gradient" x1="1" y1="0" x2="0" y2="1">
        <stop offset="0%" stop-color="#facc15" />
        <stop offset="100%" stop-color="#4ade80" />
      </linearGradient>
    </defs>
    <circle cx="100" cy="100" r="90" stroke="rgba(255,255,255,0.05)" stroke-width="20" fill="none" />
    <circle
      id="gauge-arc"
      cx="100"
      cy="100"
      r="90"
      stroke="url(#gauge-gradient)"
      stroke-width="20"
      stroke-dasharray="565.48"
      stroke-dashoffset="565.48"
      fill="none"
      transform="rotate(-90 100 100)"
    />
  </svg>

  <h2 class="text-xl font-bold mb-2">Season Goal</h2>

  <!-- 2. Dynamic percentage label -->
  <p class="text-3xl font-mono" id="goal-amount" aria-live="polite" aria-atomic="true">$7,900 / $10,000</p>

  <!-- 3. Animated progress bar -->
  <progress
    id="goal-bar"
    value="0"
    max="10000"
    class="w-full h-4 mt-4 rounded-full bg-zinc-800"
    aria-valuemin="0"
    aria-valuemax="10000"
    aria-valuenow="0"
    role="progressbar"
    aria-label="Progress towards season goal"
  ></progress>

  <!-- 4. Live donor ticker -->
  <div
    id="donor-ticker"
    class="mt-4 text-sm italic text-white/70 overflow-hidden whitespace-nowrap"
    style="mask-image: linear-gradient(to right, transparent, white 20%, white 80%, transparent)"
    aria-label="Latest donors ticker"
  >
    🚨 Latest donors: Alex M., Jamie R., Taylor S., Morgan L., …
  </div>
</section>

<script>
(() => {
  const totalGoal = 10000;
  let current = 7900; // initial funding amount

  // Animate numeric count in label
  function animateValue(el, start, end, duration) {
    const range = end - start;
    let startTime = null;
    function step(timestamp) {
      if (!startTime) startTime = timestamp;
      const progress = Math.min((timestamp - startTime) / duration, 1);
      el.textContent = `$${Math.floor(start + progress * range).toLocaleString()} / $${totalGoal.toLocaleString()}`;
      if (progress < 1) {
        requestAnimationFrame(step);
      }
    }
    requestAnimationFrame(step);
  }

  // Elements
  const section = document.getElementById('goal');
  const gaugeArc = document.getElementById('gauge-arc');
  const progressBar = document.getElementById('goal-bar');
  const label = document.getElementById('goal-amount');

  // IntersectionObserver to animate when in viewport
  const observer = new IntersectionObserver((entries, obs) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        // Animate radial gauge arc stroke
        const dashOffset = 565.48 * (1 - current / totalGoal);
        gaugeArc.style.transition = 'stroke-dashoffset 1.5s ease-out';
        gaugeArc.style.strokeDashoffset = dashOffset;

        // Animate progress bar
        progressBar.max = totalGoal;
        progressBar.value = 0;
        progressBar.style.transition = 'value 1.5s ease-out';
        setTimeout(() => (progressBar.value = current), 50);

        // Animate numeric label count up
        animateValue(label, 0, current, 1500);

        // Confetti celebration milestones
        [0.5, 0.75, 1].forEach(ratio => {
          if (current / totalGoal >= ratio) {
            import('https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/+esm').then(({ default: confetti }) => {
              confetti({
                particleCount: 50,
                spread: 40,
                origin: { y: 0.6 },
                colors: ['#facc15', '#4ade80', '#0a0a0a']
              });
            });
          }
        });

        obs.disconnect(); // animate only once
      }
    });
  }, { threshold: 0.4 });
  observer.observe(section);

  // Optional: Socket.IO live update listener for donations
  if (window.io) {
    const socket = window.io();
    socket.on('donation_update', ({ total }) => {
      current = total;
      progressBar.value = total;
      label.textContent = `$${total.toLocaleString()} / $${totalGoal.toLocaleString()}`;
      gaugeArc.style.strokeDashoffset = 565.48 * (1 - total / totalGoal);
    });
  }

  // Donor ticker scroll effect
  const ticker = document.getElementById('donor-ticker');
  let offset = 0;
  setInterval(() => {
    offset = (offset + 1) % ticker.scrollWidth;
    ticker.scrollLeft = offset;
  }, 50);
})();
</script>

{# templates/partials/testimonials.html #}
<section
  id="testimonials"
  class="relative isolate bg-gradient-to-br from-zinc-800 to-black py-24 px-6 text-white"
  role="region"
  aria-labelledby="testimonials-heading"
  tabindex="-1"
>
  <div class="max-w-5xl mx-auto text-center space-y-12">
    {# ⭐️ Social-proof badge #}
    <div
      class="flex justify-center items-center gap-1 text-2xl text-amber-400 animate-sparkle select-none"
      aria-hidden="true"
    >
      {% for _ in range(5) %}<span>★</span>{% endfor %}
      <span class="ml-2 text-base font-semibold text-amber-200">(5.0)</span>
    </div>

    <h2 id="testimonials-heading" class="text-3xl sm:text-4xl font-bold text-amber-400">
      What They’re Saying
    </h2>

    {# ── Carousel ──────────────────────────────── #}
    <div class="relative max-w-3xl mx-auto">
      <figure
        id="quoteBox"
        class="relative italic text-lg sm:text-xl text-white/90 rounded-xl p-8 bg-zinc-900/70 shadow-lg outline-none select-text transition-opacity duration-500"
        aria-live="polite"
        aria-atomic="true"
        tabindex="0"
      >
        <span
          id="confettiEmoji"
          class="absolute -top-4 left-1/2 -translate-x-1/2 opacity-0 transition-opacity duration-700 pointer-events-none"
          aria-hidden="true"
        >🎉🎊✨</span>

        <blockquote id="quoteText">Loading…</blockquote>
        <figcaption id="quoteAuthor" class="mt-4 text-sm font-medium text-amber-300"></figcaption>

        <button
          id="copyQuoteBtn"
          class="mt-4 text-xs text-amber-400 underline hover:text-amber-200 focus:outline-offset-4"
          aria-label="Copy testimonial to clipboard"
        >
          Copy Quote
        </button>
      </figure>

      <div class="flex justify-center mt-6 gap-2">
        {% for i in range(3) %}
        <button
          class="carousel-dot w-3 h-3 rounded-full border-2 border-amber-400 transition-transform duration-200 {% if i == 0 %}bg-amber-400 scale-110{% else %}bg-zinc-700{% endif %}"
          data-idx="{{ i }}"
          aria-label="Show testimonial {{ i + 1 }}"
        ></button>
        {% endfor %}
      </div>
    </div>

    <img
      src="https://static.wixstatic.com/media/2f0953_5d94082989fb4c4eb31f7f440de183c2~mv2.jpg/v1/fill/w_1100,h_1034,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/IMG_2031.jpg"
      alt="Team showing off championship rings"
      width="480"
      height="320"
      loading="lazy"
      class="rounded-2xl shadow-2xl ring-4 ring-amber-300/50 object-cover mx-auto"
    />
  </div>
</section>

<script defer type="module">
  import confetti from 'https://cdn.skypack.dev/canvas-confetti@1.6.0';

  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const testimonials = [
    {
      q: 'Winning felt amazing — but it’s being part of a team that believes in you that means the most.',
      a: 'Connect ATX Elite Player, Class of 2030'
    },
    {
      q: 'Being part of Connect ATX Elite helps me stay focused in school and basketball. I want to make my family proud.',
      a: 'Honor-Roll Scholar-Athlete'
    },
    {
      q: 'I’ve seen real changes in my son — he’s more disciplined, focused, and confident in class and in life.',
      a: 'Team Parent'
    }
  ];

  let idx = 0, autoTimer;
  const quoteEl = document.getElementById('quoteText');
  const authorEl = document.getElementById('quoteAuthor');
  const dots = Array.from(document.querySelectorAll('.carousel-dot'));
  const emoji = document.getElementById('confettiEmoji');
  const box = document.getElementById('quoteBox');

  function show(i, animate = true) {
    idx = (i + testimonials.length) % testimonials.length;
    quoteEl.textContent = `“${testimonials[idx].q}”`;
    authorEl.textContent = `— ${testimonials[idx].a}`;
    dots.forEach((d, j) => {
      d.classList.toggle('bg-amber-400', j === idx);
      d.classList.toggle('scale-110', j === idx);
      d.classList.toggle('bg-zinc-700', j !== idx);
    });
    if (animate && !prefersReduced) {
      box.style.opacity = 0;
      setTimeout(() => (box.style.opacity = 1), 50);
    }
  }

  dots.forEach((d) =>
    d.addEventListener('click', () => {
      clearInterval(autoTimer);
      show(+d.dataset.idx);
      startAuto();
    })
  );

  box.addEventListener('keydown', (e) => {
    if (['ArrowRight', 'ArrowDown'].includes(e.key)) show(idx + 1);
    if (['ArrowLeft', 'ArrowUp'].includes(e.key)) show(idx - 1);
  });

  let startX = null;
  box.addEventListener('touchstart', (e) => (startX = e.touches[0].clientX), { passive: true });
  box.addEventListener(
    'touchend',
    (e) => {
      if (startX === null) return;
      const delta = e.changedTouches[0].clientX - startX;
      if (Math.abs(delta) > 50) show(delta < 0 ? idx + 1 : idx - 1);
      startX = null;
    },
    { passive: true }
  );

  document.getElementById('copyQuoteBtn').addEventListener('click', async () => {
    await navigator.clipboard.writeText(`${testimonials[idx].q} — ${testimonials[idx].a}`);
    if (prefersReduced) return;
    emoji.style.opacity = 1;
    confetti({
      particleCount: 140,
      spread: 60,
      origin: { y: 0.7 },
      colors: ['#facc15', '#fde68a', '#0a0a0a'],
      disableForReducedMotion: true
    });
    setTimeout(() => (emoji.style.opacity = 0), 1200);
  });

  function startAuto() {
    if (prefersReduced) return;
    autoTimer = setInterval(() => show(idx + 1, false), 8000);
  }
  box.addEventListener('mouseenter', () => clearInterval(autoTimer));
  box.addEventListener('mouseleave', startAuto);
  box.addEventListener('focusin', () => clearInterval(autoTimer));
  box.addEventListener('focusout', startAuto);

  show(0, false);
  startAuto();
</script>

{# templates/partials/stat.html #}
<section
  id="testimonials"
  class="relative isolate bg-gradient-to-br from-zinc-800 to-black py-24 px-6 text-white"
  role="region"
  aria-labelledby="testimonials-heading"
  tabindex="-1"
>
  <div class="max-w-5xl mx-auto text-center space-y-12">
    {# ⭐️ Social-proof badge #}
    <div
      class="flex justify-center items-center gap-1 text-2xl text-amber-400 animate-sparkle select-none"
      aria-hidden="true"
    >
      {% for _ in range(5) %}<span>★</span>{% endfor %}
      <span class="ml-2 text-base font-semibold text-amber-200">(5.0)</span>
    </div>

    <h2 id="testimonials-heading" class="text-3xl sm:text-4xl font-bold text-amber-400">
      What They’re Saying
    </h2>

    {# ── Carousel ──────────────────────────────── #}
    <div class="relative max-w-3xl mx-auto">
      <figure
        id="quoteBox"
        class="relative italic text-lg sm:text-xl text-white/90 rounded-xl p-8 bg-zinc-900/70 shadow-lg outline-none select-text transition-opacity duration-500"
        aria-live="polite"
        aria-atomic="true"
        tabindex="0"
      >
        <span
          id="confettiEmoji"
          class="absolute -top-4 left-1/2 -translate-x-1/2 opacity-0 transition-opacity duration-700 pointer-events-none"
          aria-hidden="true"
        >🎉🎊✨</span>

        <blockquote id="quoteText">Loading…</blockquote>
        <figcaption id="quoteAuthor" class="mt-4 text-sm font-medium text-amber-300"></figcaption>

        <button
          id="copyQuoteBtn"
          class="mt-4 text-xs text-amber-400 underline hover:text-amber-200 focus:outline-offset-4"
          aria-label="Copy testimonial to clipboard"
        >
          Copy Quote
        </button>
      </figure>

      <div class="flex justify-center mt-6 gap-2">
        {% for i in range(3) %}
        <button
          class="carousel-dot w-3 h-3 rounded-full border-2 border-amber-400 transition-transform duration-200 {% if i == 0 %}bg-amber-400 scale-110{% else %}bg-zinc-700{% endif %}"
          data-idx="{{ i }}"
          aria-label="Show testimonial {{ i + 1 }}"
        ></button>
        {% endfor %}
      </div>
    </div>

    <img
      src="https://static.wixstatic.com/media/2f0953_5d94082989fb4c4eb31f7f440de183c2~mv2.jpg/v1/fill/w_1100,h_1034,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/IMG_2031.jpg"
      alt="Team showing off championship rings"
      width="480"
      height="320"
      loading="lazy"
      class="rounded-2xl shadow-2xl ring-4 ring-amber-300/50 object-cover mx-auto"
    />
  </div>
</section>

<section id="stats" class="py-24 px-6 bg-black text-white" role="region" aria-label="Team statistics">
  <div class="max-w-4xl mx-auto flex flex-wrap justify-center gap-10 text-center">
    {% set stats = [
      ('16', 'Players Enrolled'),
      ('11', 'Honor Roll Scholars'),
      ('12', 'Tournaments Played'),
      ('3', 'Years Running')
    ] %}
    {% for number, label in stats %}
    <div
      class="stat-card transform transition duration-300 hover:scale-105"
      data-aos="zoom-in"
      data-aos-delay="{{ loop.index0 * 100 }}"
      tabindex="0"
      role="group"
      aria-label="{{ number }} {{ label }}"
    >
      <div class="text-4xl font-extrabold text-amber-400 drop-shadow">{{ number }}</div>
      <div class="mt-1 text-base text-white/80 font-medium">{{ label }}</div>
    </div>
    {% endfor %}
  </div>
</section>

<script defer type="module">
  import confetti from 'https://cdn.skypack.dev/canvas-confetti@1.6.0';

  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const testimonials = [
    {
      q: 'Winning felt amazing — but it’s being part of a team that believes in you that means the most.',
      a: 'Connect ATX Elite Player, Class of 2030'
    },
    {
      q: 'Being part of Connect ATX Elite helps me stay focused in school and basketball. I want to make my family proud.',
      a: 'Honor-Roll Scholar-Athlete'
    },
    {
      q: 'I’ve seen real changes in my son — he’s more disciplined, focused, and confident in class and in life.',
      a: 'Team Parent'
    }
  ];

  let idx = 0,
    autoTimer;
  const quoteEl = document.getElementById('quoteText');
  const authorEl = document.getElementById('quoteAuthor');
  const dots = Array.from(document.querySelectorAll('.carousel-dot'));
  const emoji = document.getElementById('confettiEmoji');
  const box = document.getElementById('quoteBox');

  function show(i, animate = true) {
    idx = (i + testimonials.length) % testimonials.length;
    quoteEl.textContent = `“${testimonials[idx].q}”`;
    authorEl.textContent = `— ${testimonials[idx].a}`;
    dots.forEach((d, j) => {
      d.classList.toggle('bg-amber-400', j === idx);
      d.classList.toggle('scale-110', j === idx);
      d.classList.toggle('bg-zinc-700', j !== idx);
    });
    if (animate && !prefersReduced) {
      box.style.opacity = 0;
      setTimeout(() => (box.style.opacity = 1), 50);
    }
  }

  dots.forEach((d) =>
    d.addEventListener('click', () => {
      clearInterval(autoTimer);
      show(+d.dataset.idx);
      startAuto();
    })
  );

  box.addEventListener('keydown', (e) => {
    if (['ArrowRight', 'ArrowDown'].includes(e.key)) show(idx + 1);
    if (['ArrowLeft', 'ArrowUp'].includes(e.key)) show(idx - 1);
  });

  let startX = null;
  box.addEventListener('touchstart', (e) => (startX = e.touches[0].clientX), { passive: true });
  box.addEventListener(
    'touchend',
    (e) => {
      if (startX === null) return;
      const delta = e.changedTouches[0].clientX - startX;
      if (Math.abs(delta) > 50) show(delta < 0 ? idx + 1 : idx - 1);
      startX = null;
    },
    { passive: true }
  );

  document.getElementById('copyQuoteBtn').addEventListener('click', async () => {
    await navigator.clipboard.writeText(`${testimonials[idx].q} — ${testimonials[idx].a}`);
    if (prefersReduced) return;
    emoji.style.opacity = 1;
    confetti({
      particleCount: 140,
      spread: 60,
      origin: { y: 0.7 },
      colors: ['#facc15', '#fde68a', '#0a0a0a'],
      disableForReducedMotion: true
    });
    setTimeout(() => (emoji.style.opacity = 0), 1200);
  });

  function startAuto() {
    if (prefersReduced) return;
    autoTimer = setInterval(() => show(idx + 1, false), 8000);
  }
  box.addEventListener('mouseenter', () => clearInterval(autoTimer));
  box.addEventListener('mouseleave', startAuto);
  box.addEventListener('focusin', () => clearInterval(autoTimer));
  box.addEventListener('focusout', startAuto);

  show(0, false);
  startAuto();
</script>

<section
  id="testimonials"
  class="relative isolate bg-gradient-to-br from-zinc-800 to-black py-24 px-6 text-white"
  role="region"
  aria-labelledby="testimonials-heading"
  tabindex="-1"
>
  <div class="max-w-5xl mx-auto text-center space-y-12">
    {# ⭐️ Social-proof badge #}
    <div
      class="flex justify-center items-center gap-1 text-2xl text-amber-400 animate-sparkle select-none"
      aria-hidden="true"
    >
      {% for _ in range(5) %}<span>★</span>{% endfor %}
      <span class="ml-2 text-base font-semibold text-amber-200">(5.0)</span>
    </div>

    <h2 id="testimonials-heading" class="text-3xl sm:text-4xl font-bold text-amber-400">
      What They’re Saying
    </h2>

    {# ── Carousel ──────────────────────────────── #}
    <div class="relative max-w-3xl mx-auto">
      <figure
        id="quoteBox"
        class="relative italic text-lg sm:text-xl text-white/90 rounded-xl p-8 bg-zinc-900/70 shadow-lg outline-none select-text transition-opacity duration-500"
        aria-live="polite"
        aria-atomic="true"
        tabindex="0"
      >
        <span
          id="confettiEmoji"
          class="absolute -top-4 left-1/2 -translate-x-1/2 opacity-0 transition-opacity duration-700 pointer-events-none"
          aria-hidden="true"
        >🎉🎊✨</span>

        <blockquote id="quoteText">Loading…</blockquote>
        <figcaption id="quoteAuthor" class="mt-4 text-sm font-medium text-amber-300"></figcaption>

        <button
          id="copyQuoteBtn"
          class="mt-4 text-xs text-amber-400 underline hover:text-amber-200 focus:outline-offset-4"
          aria-label="Copy testimonial to clipboard"
        >
          Copy Quote
        </button>
      </figure>

      <div class="flex justify-center mt-6 gap-2">
        {% for i in range(3) %}
        <button
          class="carousel-dot w-3 h-3 rounded-full border-2 border-amber-400 transition-transform duration-200 {% if i == 0 %}bg-amber-400 scale-110{% else %}bg-zinc-700{% endif %}"
          data-idx="{{ i }}"
          aria-label="Show testimonial {{ i + 1 }}"
        ></button>
        {% endfor %}
      </div>
    </div>

    <img
      src="https://static.wixstatic.com/media/2f0953_5d94082989fb4c4eb31f7f440de183c2~mv2.jpg/v1/fill/w_1100,h_1034,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/IMG_2031.jpg"
      alt="Team showing off championship rings"
      width="480"
      height="320"
      loading="lazy"
      class="rounded-2xl shadow-2xl ring-4 ring-amber-300/50 object-cover mx-auto"
    />
  </div>
</section>

<script defer type="module">
  import confetti from 'https://cdn.skypack.dev/canvas-confetti@1.6.0';

  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const testimonials = [
    {
      q: 'Winning felt amazing — but it’s being part of a team that believes in you that means the most.',
      a: 'Connect ATX Elite Player, Class of 2030'
    },
    {
      q: 'Being part of Connect ATX Elite helps me stay focused in school and basketball. I want to make my family proud.',
      a: 'Honor-Roll Scholar-Athlete'
    },
    {
      q: 'I’ve seen real changes in my son — he’s more disciplined, focused, and confident in class and in life.',
      a: 'Team Parent'
    }
  ];

  let idx = 0, autoTimer;
  const quoteEl = document.getElementById('quoteText');
  const authorEl = document.getElementById('quoteAuthor');
  const dots = Array.from(document.querySelectorAll('.carousel-dot'));
  const emoji = document.getElementById('confettiEmoji');
  const box = document.getElementById('quoteBox');

  function show(i, animate = true) {
    idx = (i + testimonials.length) % testimonials.length;
    quoteEl.textContent = `“${testimonials[idx].q}”`;
    authorEl.textContent = `— ${testimonials[idx].a}`;
    dots.forEach((d, j) => {
      d.classList.toggle('bg-amber-400', j === idx);
      d.classList.toggle('scale-110', j === idx);
      d.classList.toggle('bg-zinc-700', j !== idx);
    });
    if (animate && !prefersReduced) {
      box.style.opacity = 0;
      setTimeout(() => (box.style.opacity = 1), 50);
    }
  }

  dots.forEach((d) =>
    d.addEventListener('click', () => {
      clearInterval(autoTimer);
      show(+d.dataset.idx);
      startAuto();
    })
  );

  box.addEventListener('keydown', (e) => {
    if (['ArrowRight', 'ArrowDown'].includes(e.key)) show(idx + 1);
    if (['ArrowLeft', 'ArrowUp'].includes(e.key)) show(idx - 1);
  });

  let startX = null;
  box.addEventListener('touchstart', (e) => (startX = e.touches[0].clientX), { passive: true });
  box.addEventListener(
    'touchend',
    (e) => {
      if (startX === null) return;
      const delta = e.changedTouches[0].clientX - startX;
      if (Math.abs(delta) > 50) show(delta < 0 ? idx + 1 : idx - 1);
      startX = null;
    },
    { passive: true }
  );

  document.getElementById('copyQuoteBtn').addEventListener('click', async () => {
    await navigator.clipboard.writeText(`${testimonials[idx].q} — ${testimonials[idx].a}`);
    if (prefersReduced) return;
    emoji.style.opacity = 1;
    confetti({
      particleCount: 140,
      spread: 60,
      origin: { y: 0.7 },
      colors: ['#facc15', '#fde68a', '#0a0a0a'],
      disableForReducedMotion: true
    });
    setTimeout(() => (emoji.style.opacity = 0), 1200);
  });

  function startAuto() {
    if (prefersReduced) return;
    autoTimer = setInterval(() => show(idx + 1, false), 8000);
  }
  box.addEventListener('mouseenter', () => clearInterval(autoTimer));
  box.addEventListener('mouseleave', startAuto);
  box.addEventListener('focusin', () => clearInterval(autoTimer));
  box.addEventListener('focusout', startAuto);

  show(0, false);
  startAuto();
</script>

{# templates/partials/hero_overlay_quote.html #}
<div
  class="absolute bottom-8 left-1/2 -translate-x-1/2 max-w-xl px-6 py-4 bg-black/60 backdrop-blur-md rounded-xl text-center text-amber-300 text-lg sm:text-xl font-semibold tracking-wide shadow-glow select-none pointer-events-none"
  aria-hidden="true"
  data-aos="fade-up"
  data-aos-delay="350"
>
  “Building champions on and off the court — together, we rise.”
</div>

<section
  id="hero"
  class="relative isolate w-full min-h-[90vh] md:min-h-screen overflow-hidden bg-gradient-to-br from-cyber-night to-prestige-black rounded-3xl shadow-gold"
  aria-labelledby="hero-heading"
  tabindex="-1"
  data-aos="fade-in"
>
  <!-- 🔥 Ken Burns Background Image -->
  <div class="absolute inset-0 -z-10 overflow-hidden">
    <img
      src="{{ url_for('static', filename='connect-atx-team.jpg') }}"
      alt="Connect ATX Elite team after a great Championship Tournament"
      class="h-full w-full object-cover brightness-95 saturate-110 motion-safe:animate-kenburns"
      loading="eager"
      decoding="async"
      fetchpriority="high"
    />
  </div>

  <!-- ✨ Luxe animated overlay -->
  <div class="absolute inset-0 bg-gradient-to-b from-black/30 to-black/90 -z-10 animate-gradient-xy"></div>

  <!-- 🟨 Scrollbar Progress HUD -->
  <div
    id="scrollbar"
    class="fixed left-0 top-0 z-[999] h-1 w-0 bg-amber-400 origin-left transition-[width] duration-150 ease-out"
  ></div>

  <!-- 💎 Hero Core Content -->
  <div
    class="relative z-20 flex flex-col items-center justify-center h-full text-center px-6 py-32 md:py-40 max-w-7xl mx-auto"
  >
    <!-- Logo larger + hover scale + glow -->
    <img
      src="{{ url_for('static', filename='images/logo-hero.png') }}"
      alt="Connect ATX Elite Logo"
      class="w-40 md:w-48 drop-shadow-gold animate-glow gsap-logo cursor-pointer transition-transform duration-500 hover:scale-105"
      style="filter: drop-shadow(0 0 1rem #facc15);"
      loading="lazy"
      decoding="async"
      data-aos="zoom-in"
      data-aos-delay="50"
    />

    <!-- Amplified Tagline -->
    <p
      id="hero-heading"
      class="mt-6 text-2xl md:text-4xl font-extrabold text-amber-400 max-w-3xl leading-snug drop-shadow-lg animate-fade-up delay-150"
      data-aos="fade-up"
      data-aos-delay="150"
    >
      Empowering Youth Through Basketball, Brotherhood &amp; Academics
    </p>

    <!-- Upgraded CTAs -->
    <div class="mt-10 flex flex-col sm:flex-row gap-6 justify-center" data-aos="fade-up" data-aos-delay="200">
      <a
        href="#tiers"
        class="inline-block bg-amber-400 hover:bg-amber-300 text-black font-extrabold px-12 py-4 rounded-2xl shadow-[0_0_20px_#facc15] focus-visible:ring-6 ring-amber-300 transition-transform transform-gpu hover:scale-105 animate-pulse-slow"
      >
        Become a Sponsor
      </a>
      <a
        href="#about"
        class="inline-block border-2 border-amber-400 text-amber-400 font-bold px-12 py-4 rounded-2xl shadow-inner hover:bg-amber-400 hover:text-black transition"
      >
        Learn More
      </a>
    </div>

    <!-- Elevated Fundraising HUD -->
    <div
      class="mt-8 font-mono text-lg md:text-xl text-white/90 bg-black/40 backdrop-blur-sm px-6 py-2 rounded-full inline-flex items-center space-x-3 shadow-glow animate-fade-up delay-250"
      aria-live="polite"
      data-aos="fade-up"
      data-aos-delay="250"
    >
      <span>💰</span>
      <span class="font-semibold text-amber-400 tracking-wider">${{ config.get('RAISED_AMOUNT', 7900) }}</span>
      <span>raised of</span>
      <span class="font-semibold text-amber-400 tracking-wider">${{ config.get('GOAL_AMOUNT', 10000) }}</span>
      <span>goal</span>
    </div>
  </div>

  <!-- ⬇️ Larger Chevron Scroll Hint with pulse -->
  <button
    id="scroll-hint"
    class="absolute bottom-12 left-1/2 -translate-x-1/2 text-amber-300 animate-bounce-slow hover:text-amber-200 focus:outline-none scale-110"
    aria-label="Scroll down"
    data-aos="fade-up"
    data-aos-delay="300"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="w-10 h-10"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
      stroke-width="2"
    >
      <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
    </svg>
  </button>

  {% include "partials/hero_overlay_quote.html" ignore missing %}
</section>

<section
  id="cta"
  role="region"
  aria-labelledby="cta-heading"
  class="relative py-28 bg-gradient-to-b from-black via-zinc-900 to-black text-white text-center px-6"
  tabindex="-1"
>
  <div class="max-w-3xl mx-auto space-y-10">

    <!-- 1. Headline & Sub-Headline -->
    <h2
      id="cta-heading"
      class="text-4xl sm:text-5xl font-extrabold text-amber-400 drop-shadow-xl tracking-tight"
      data-aos="zoom-in"
    >
      Ready to Join Our Mission?
    </h2>
    <p
      class="text-white/85 text-lg sm:text-xl leading-relaxed"
      data-aos="fade-up" data-aos-delay="100"
    >
      Help us secure gym time, fund travel, and empower our student-athletes for life beyond the court.
    </p>

    <!-- 2. Live Progress Bar -->
    {% set raised = config.RAISED_AMOUNT %}
    {% set goal   = config.GOAL_AMOUNT %}
    <div class="w-full bg-zinc-800 rounded-full h-4 overflow-hidden" data-aos="fade-up" data-aos-delay="200" aria-hidden="true">
      <div
        class="h-4 bg-gradient-to-r from-amber-400 to-yellow-300 shadow-gold animate-pulse"
        style="width: {{ (raised/goal*100)|round(0) }}%"
        aria-valuemin="0"
        aria-valuemax="100"
        role="progressbar"
        aria-valuenow="{{ (raised/goal*100)|round(0) }}"
      ></div>
    </div>
    <div
      class="flex justify-center items-center gap-2 font-mono text-sm text-white/80"
      aria-live="polite"
      data-aos="fade-up" data-aos-delay="300"
    >
      <span role="img" aria-label="Fundraiser">💰</span>
      <span>
        <span class="font-bold text-amber-400">${{ "{:,}".format(raised) }}</span> of
        <span class="font-bold text-amber-400">${{ "{:,}".format(goal) }}</span> goal
      </span>
    </div>

    <!-- 3. Urgency Countdown -->
    <div
      id="countdown"
      class="text-amber-300 font-semibold tracking-wide text-sm sm:text-base"
      data-aos="fade-up" data-aos-delay="400"
      aria-live="polite"
    >
      <span id="cd-days">--</span>d
      <span id="cd-hours">--</span>h
      <span id="cd-mins">--</span>m left to hit our goal!
    </div>

    <!-- 4. Preset Gift Buttons + Custom Amount -->
    <div class="flex flex-wrap justify-center gap-3" data-aos="fade-up" data-aos-delay="500">
      {% for amt in [25,50,100,250] %}
      <button
        type="button"
        class="preset-amt bg-zinc-700 hover:bg-zinc-600 px-4 py-2 rounded-full font-semibold text-white transition-shadow shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-amber-400"
        data-amt="{{ amt }}"
        aria-label="Select ${{ amt }} donation amount"
      >
        ${{ amt }}
      </button>
      {% endfor %}
      <input
        id="customAmt"
        type="number" min="1" max="999"
        placeholder="Custom"
        aria-label="Custom donation amount"
        class="w-20 bg-zinc-800 text-white text-center rounded-full px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-400 border border-zinc-600"
      />
    </div>

    <!-- 5. Donate Button → Modal + Confetti -->
    <button
      id="donateBtn"
      class="mt-4 inline-block bg-amber-400 text-black font-semibold text-lg px-8 py-3 rounded-full shadow-gold hover:scale-105 hover:bg-amber-300 focus-visible:ring-4 focus-visible:ring-amber-300 transition-transform duration-300 animate-glow"
      data-aos="zoom-in" data-aos-delay="600"
      aria-haspopup="dialog"
      aria-controls="donateDialog"
    >
      Donate Now
    </button>

    <!-- QR code fallback -->
    <div class="pt-6 flex flex-col items-center gap-1" data-aos="fade-up" data-aos-delay="700">
      <img
        src="{{ url_for('static', filename='qr-website.png') }}"
        alt="Donate via QR Code"
        width="128" height="128"
        class="rounded-lg shadow-lg opacity-75 hover:opacity-100 transition"
        loading="lazy"
      >
      <p class="text-xs text-white/60">Scan: CashApp / PayPal / Venmo</p>
    </div>

    <p class="pt-6 text-sm text-white/60" data-aos="fade-up" data-aos-delay="800">
      Or contact <a href="mailto:arodgps@gmail.com" class="underline hover:text-amber-300">arodgps@gmail.com</a>
      &nbsp;| 📞 (512) 820-0475
    </p>
  </div>

  {# ——— Modal (using native <dialog>) ——— #}
  <dialog id="donateDialog" class="w-full max-w-md p-0 rounded-2xl overflow-hidden" role="dialog" aria-modal="true" aria-labelledby="donateDialogTitle">
    <form id="donateForm" method="dialog" class="bg-zinc-950 text-white p-6 space-y-4" aria-describedby="donateDialogDesc">
      <h3 id="donateDialogTitle" class="text-2xl font-bold text-amber-400">Enter Donation Amount</h3>
      <input name="amount" id="formAmt" type="number" min="1" max="999" required
             class="w-full bg-zinc-800 rounded-full px-4 py-2 text-center focus:outline-none border border-zinc-700"
             aria-label="Donation amount input" />
      <div class="flex justify-end gap-2">
        <button type="reset" class="px-4 py-2 rounded-full bg-zinc-700 hover:bg-zinc-600">Cancel</button>
        <button type="submit"
                class="px-6 py-2 rounded-full bg-amber-400 text-black font-bold hover:bg-amber-300">
          Donate
        </button>
      </div>
    </form>
  </dialog>
</section>

<script defer type="module">
import confetti from "https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/+esm";
import { loadStripe } from "https://js.stripe.com/v3";
const stripe = await loadStripe("{{ stripe_publishable }}");

// Countdown Timer
(function() {
  const target = new Date("{{ config.CAMPAIGN_END_ISO }}");
  const days = document.getElementById("cd-days"),
        hours = document.getElementById("cd-hours"),
        mins = document.getElementById("cd-mins");

  function tick() {
    const diff = target - new Date();
    if (diff <= 0) { clearInterval(timer); return; }
    const d = Math.floor(diff/86400000),
          h = Math.floor((diff%86400000)/3600000),
          m = Math.floor((diff%3600000)/60000);
    days.textContent = d; hours.textContent = h; mins.textContent = m;
  }
  const timer = setInterval(tick, 1000);
  tick();
})();

// Preset amount buttons click handler
document.querySelectorAll(".preset-amt").forEach(btn => {
  btn.addEventListener("click", () => {
    document.getElementById("formAmt").value = btn.dataset.amt;
  });
});

// Open dialog and confetti animation
const opener = document.getElementById("donateBtn");
const dialog = document.getElementById("donateDialog");
opener.addEventListener("click", () => {
  dialog.showModal();
  confetti({ particleCount: 120, spread: 70, origin: { y: 0.6 }, colors: ["#facc15", "#fef3c7"] });
});

// Handle form submission → Stripe checkout
document.getElementById("donateForm").addEventListener("submit", async e => {
  e.preventDefault();
  const amount = parseInt(document.getElementById("formAmt").value, 10);
  if (!amount || amount < 1 || amount > 999) {
    alert("Please enter a donation amount between $1 and $999.");
    return;
  }
  const res = await fetch("/api/create-checkout", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ amount }),
  });
  const { session_id } = await res.json();
  await stripe.redirectToCheckout({ sessionId: session_id });
});
</script>

{# templates/index.html — Elite-Grade Homepage (Prestige Theme) #}
{% extends "base.html" %}

{% block title %}
  Home · Connect ATX Elite
{% endblock %}

{% block extra_styles %}
  <style>
    /* ✅ Scroll-Reveal Animation */
    [data-reveal] {
      opacity: 0;
      transform: translateY(32px);
      transition:
        opacity 0.7s cubic-bezier(.22,.61,.36,1),
        transform 0.7s cubic-bezier(.22,.61,.36,1);
      will-change: opacity, transform;
    }
    [data-reveal].in-view {
      opacity: 1;
      transform: translateY(0);
    }

    /* ✨ Focus ring for accessibility */
    :focus-visible {
      outline: 3px solid #facc15;
      outline-offset: 3px;
      border-radius: 0.375rem;
    }

    /* Footer breathing room */
    section.mb-16:last-of-type {
      margin-bottom: 5rem;
    }
  </style>
{% endblock %}

{% block content %}
  <h1 id="page-title" class="sr-only">Home · Connect ATX Elite</h1>

  <main role="main" id="main-content" tabindex="-1" aria-label="Main content" class="overflow-x-hidden">

    <!-- 🏀 Hero Section -->
    <section
      id="hero"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-label="Hero Section"
      tabindex="0"
      aria-describedby="hero-desc"
    >
      {% include "partials/hero.html" %}
      <p id="hero-desc" class="sr-only">
        Empowering youth through basketball, mentorship, and academic excellence.
      </p>
    </section>

    <!-- 🥇 Sponsorship Tiers -->
    <section
      id="tiers"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-labelledby="tiers-title"
      tabindex="0"
    >
      <h2 id="tiers-title" class="sr-only">Sponsorship Tiers</h2>
      {% include "partials/tiers.html" %}
    </section>

    <!-- 💬 Testimonials -->
    <section
      id="testimonials"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-labelledby="testimonials-title"
      tabindex="0"
    >
      <h2 id="testimonials-title" class="sr-only">Testimonials</h2>
      {% include "partials/testimonials.html" %}
    </section>

    <!-- 📣 Call to Action -->
    <section
      id="ctaSection"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-labelledby="cta-title"
      tabindex="0"
    >
      <h2 id="cta-title" class="sr-only">Call To Action</h2>
      {% include "partials/cta.html" %}
    </section>

    <!-- 🌟 Sponsor Wall -->
    <section
      id="sponsor-wall"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-labelledby="sponsor-wall-title"
      tabindex="0"
    >
      <h2 id="sponsor-wall-title" class="sr-only">Sponsor Wall</h2>
      {% include "partials/sponsor_wall.html" %}
    </section>

  </main>

  <!-- 🌐 Modals and UI Widgets -->
  {% include "partials/donation_modal.html" %}
  {% include "partials/newsletter_popup.html" %}
  {% include "partials/back_to_top_ball.html" %}
  {% include "partials/toast_notifications.html" %}
  {% include "partials/vip_leaderboard.html" %}
  {% include "partials/chat_widget.html" %}
  {% include "partials/accessibility_toolbar.html" %}
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script>
    // 🚀 Scroll-Reveal Intersection Observer
    (() => {
      const elements = document.querySelectorAll('[data-reveal]');
      if (!('IntersectionObserver' in window)) return;

      const observer = new IntersectionObserver((entries, obs) => {
        for (const { isIntersecting, target } of entries) {
          if (isIntersecting) {
            target.classList.add('in-view');
            obs.unobserve(target);
          }
        }
      }, { threshold: 0.35 });

      elements.forEach(el => observer.observe(el));
    })();
  </script>
{% endblock %}

<!-- Replace your existing templates/base.html with this full version -->

<!DOCTYPE html>
<html lang="en" class="scroll-smooth dark" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <title>{% block title %}Connect ATX Elite · Empowering Youth Through Basketball{% endblock %}</title>
  <meta name="description" content="Empowering youth in Austin, TX through basketball, mentorship, and academic excellence. Sponsor our 12U AAU team today!" />
  <meta name="theme-color" content="#facc15" media="(prefers-color-scheme: light)" />
  <meta name="theme-color" content="#111827" media="(prefers-color-scheme: dark)" />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="https://www.connectatxelite.com/" />

  <!-- Open Graph / Twitter Meta -->
  <meta property="og:title" content="Connect ATX Elite" />
  <meta property="og:description" content="Sponsor our 12U AAU basketball team—invest in the next generation in Austin, TX." />
  <meta property="og:image" content="{{ url_for('static', filename='connect-atx-team.jpg') }}" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://www.connectatxelite.com/" />
  <meta property="og:site_name" content="Connect ATX Elite" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Connect ATX Elite" />
  <meta name="twitter:description" content="Join our mission to uplift youth through basketball, mentorship, and community." />
  <meta name="twitter:image" content="{{ url_for('static', filename='connect-atx-team.jpg') }}" />

  <!-- Favicon / Touch -->
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" sizes="32x32" type="image/png" />
  <link rel="apple-touch-icon" href="{{ url_for('static', filename='images/apple-touch.png') }}" sizes="180x180" />

  <!-- Stylesheets -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/tailwind.min.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/globals.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/base/back_to_top_ball.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" />
  {% block extra_styles %}{% endblock %}

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SportsTeam",
    "name": "Connect ATX Elite",
    "sport": "Basketball",
    "url": "https://www.connectatxelite.com",
    "location": {
      "@type": "Place",
      "name": "Austin, TX"
    },
    "memberOf": {
      "@type": "Organization",
      "name": "AAU"
    }
  }
  </script>
</head>

<body class="bg-white text-gray-900 antialiased dark:bg-gray-900 dark:text-white selection:bg-yellow-300/80">
  <a href="#main-content" class="sr-only focus:not-sr-only absolute top-2 left-2 bg-yellow-300 text-black px-4 py-1 rounded shadow z-50">Skip to content</a>

  {% include "partials/header.html" %}

  <main id="main-content" role="main" tabindex="-1" aria-label="Main Content">
    {% block content %}{% endblock %}
  </main>

  {% include "partials/footer.html" %}
  {% include "partials/newsletter_popup.html" %}

  <!-- 🔼 Back to Top Ball (Hardcoded) -->
  <button
    id="back-to-top-ball"
    type="button"
    aria-label="Back to top"
    class="fixed bottom-6 right-6 w-14 h-14 z-[60] rounded-full bg-amber-400/90 backdrop-blur-sm shadow-xl opacity-0 pointer-events-none scale-95 translate-y-6 transition-all duration-300 ease-out hover:scale-110 hover:shadow-2xl focus:outline-none focus-visible:ring-4 focus-visible:ring-amber-300"
  >
    <img
      src="{{ url_for('static', filename='images/ball.png') }}"
      alt=""
      aria-hidden="true"
      class="w-9 h-9 mx-auto pointer-events-none select-none"
      loading="lazy"
    />
    <span class="sr-only">Back to top</span>
  </button>

  <!-- JS Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
  <script>AOS.init({ once: true, duration: 700, easing: 'ease-out-quart' });</script>

  <script src="{{ url_for('static', filename='js/bundle.min.js') }}" defer></script>

  <!-- 🔁 Back to Top Ball Script -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const btn = document.getElementById('back-to-top-ball');
      if (!btn) return;

      btn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });

      const toggleVisibility = () => {
        if (window.scrollY > 220) {
          btn.classList.add('opacity-100', 'pointer-events-auto', 'translate-y-0', 'scale-100');
          btn.classList.remove('opacity-0', 'pointer-events-none', 'translate-y-6', 'scale-95');
        } else {
          btn.classList.add('opacity-0', 'pointer-events-none', 'translate-y-6', 'scale-95');
          btn.classList.remove('opacity-100', 'pointer-events-auto', 'translate-y-0', 'scale-100');
        }
      };

      window.addEventListener('scroll', toggleVisibility, { passive: true });
      toggleVisibility();
    });
  </script>

  {% block scripts %}{% endblock %}
</body>
</html>

<footer
  id="site-footer"
  role="contentinfo"
  class="relative bg-zinc-950 text-white py-12 px-6 border-t border-zinc-800 shadow-inner"
  data-aos="fade-up"
  data-aos-delay="200"
>
  <div class="max-w-6xl mx-auto grid gap-12 md:grid-cols-3 text-center md:text-left">

    <!-- Branding & Year -->
    <div class="space-y-2">
      <span class="block text-xs text-amber-400 font-semibold tracking-wide">AAU 12U | Austin, TX</span>
      <p class="text-sm text-white/60">© {{ now().year }} Connect ATX Elite. All rights reserved.</p>

      <!-- Newsletter capture -->
      <form
        id="newsletter-form"
        class="mt-4 flex flex-col sm:flex-row gap-2 justify-center md:justify-start"
        onsubmit="handleNewsletterSignup(event)"
        aria-label="Subscribe to newsletter"
      >
        <input
          type="email"
          name="newsletter_email"
          required
          placeholder="Your email"
          aria-required="true"
          aria-describedby="newsletterHelp"
          class="w-full sm:w-auto flex-grow px-3 py-2 rounded-lg bg-zinc-900 border border-zinc-700 focus:outline-none focus:ring-2 focus:ring-amber-400"
        />
        <button
          type="submit"
          class="px-4 py-2 bg-amber-400 text-black font-semibold rounded-lg hover:bg-amber-300 transition focus:ring-4 focus:ring-amber-400"
        >
          Subscribe
        </button>
      </form>
      <p id="newsletterHelp" class="sr-only">Enter your email to subscribe to our newsletter</p>
    </div>

    <!-- Fundraising Progress + Quick Links -->
    <div class="space-y-4 flex flex-col items-center">
      {% set raised = config.get('RAISED_AMOUNT', 0) %}
      {% set goal   = config.get('GOAL_AMOUNT', 10000) %}
      <div class="w-full max-w-xs" aria-label="Fundraising progress bar">
        <div class="flex justify-between text-xs font-mono text-amber-200 mb-1">
          <span>Raised</span>
          <span>${{ "{:,}".format(raised) }} / ${{ "{:,}".format(goal) }}</span>
        </div>
        <div
          class="relative w-full h-3 rounded-lg bg-zinc-800 overflow-hidden"
          role="progressbar"
          aria-valuemin="0"
          aria-valuemax="{{ goal }}"
          aria-valuenow="{{ raised }}"
          aria-label="Amount raised towards goal"
        >
          <div
            class="absolute inset-y-0 left-0 bg-amber-400 shadow-gold transition-all duration-700"
            style="width: {{ (raised / goal * 100)|round(0, 'floor') }}%;"
          ></div>
        </div>
      </div>

      <nav class="flex flex-wrap justify-center gap-3" role="navigation" aria-label="Footer quick links">
        <a
          href="mailto:arodgps@gmail.com"
          class="px-3 py-1 rounded bg-amber-400/10 text-amber-300 hover:bg-amber-400 hover:text-black transition focus:ring-2 focus:ring-amber-300"
          aria-label="Email Connect ATX Elite"
        >📧 Email</a>
        <a
          href="https://www.connectatxelite.com"
          target="_blank" rel="noopener"
          class="px-3 py-1 rounded bg-amber-400/10 text-amber-300 hover:bg-amber-400 hover:text-black transition focus:ring-2 focus:ring-amber-300"
          aria-label="Visit official site"
        >🌐 Site</a>
        <a
          href="https://www.paypal.com/donate/your-link"
          target="_blank" rel="noopener"
          class="px-3 py-1 rounded bg-green-400/20 text-green-200 hover:bg-green-300 hover:text-black transition focus:ring-2 focus:ring-green-200"
          aria-label="Donate via PayPal"
        >💸 Donate</a>
      </nav>
    </div>

    <!-- Contact, Countdown, and Accessible Back-to-Top -->
    <div class="space-y-4 flex flex-col items-center md:items-end">
      <address class="not-italic text-xs text-white/70 space-y-1">
        <div>
          Contact: <a href="mailto:arodgps@gmail.com" class="underline hover:text-amber-300">arodgps@gmail.com</a>
        </div>
        <div>
          Phone: <a href="tel:+15128200475" class="underline hover:text-amber-300">(512) 820-0475</a>
        </div>
      </address>

      <!-- Live countdown -->
      <div
        id="next-game-countdown"
        class="text-sm text-amber-300 font-mono"
        aria-live="polite"
        aria-atomic="true"
      >
        Next Tournament in: <span id="countdown-timer">00d 00h 00m 00s</span>
      </div>

      <!-- Accessible Back-to-Top anchor -->
      <a
        href="#main-content"
        class="mt-2 text-amber-400 underline hover:text-amber-200"
        aria-label="Back to top"
      >↑ Back to Top</a>
    </div>
  </div>

  <!-- Optional social-proof ticker -->
  <div class="mt-8 text-center text-xs text-white/50 font-mono" aria-live="polite" aria-atomic="true">
    Recent Supporters: {{ ['Acme Corp', 'Jane D.', 'Smith & Co', 'Austin Hoops', 'Elite Donor'] | join(' • ') }}
  </div>
</footer>

<script>
  // Newsletter subscription handler (stub)
  function handleNewsletterSignup(e) {
    e.preventDefault();
    const email = e.target.newsletter_email.value.trim();
    if (!email) {
      alert("Please enter a valid email address.");
      return;
    }
    alert(`🎉 Thanks! We'll keep you updated at ${email}`);
    e.target.reset();
  }

  // Countdown timer script
  const target = new Date('2025-07-01T10:00:00Z');
  function updateCountdown() {
    const now  = Date.now();
    const diff = target - now;
    if (diff <= 0) {
      document.getElementById('countdown-timer').textContent = 'Tournament started!';
      return;
    }
    const d = Math.floor(diff / 86400000),
          h = Math.floor((diff % 86400000) / 3600000),
          m = Math.floor((diff % 3600000) / 60000),
          s = Math.floor((diff % 60000) / 1000);
    document.getElementById('countdown-timer').textContent = `${d}d ${h}h ${m}m ${s}s`;
  }
  setInterval(updateCountdown, 1000);
  updateCountdown();
</script>

{# templates/partials/tiers.html — Enhanced Sponsor Tiers #}
<section
  id="tiers"
  class="py-24 bg-zinc-900 text-white px-6"
  role="region"
  aria-labelledby="tiers-heading"
  tabindex="-1"
  data-aos="fade-up"
  data-aos-duration="800"
>
  <div class="max-w-6xl mx-auto space-y-16">
    <!-- ① QR sponsor call-out -->
    <div
      class="p-6 rounded-2xl bg-gradient-to-r from-amber-400/70 to-amber-200/60 text-black flex flex-col md:flex-row items-center justify-between gap-6 shadow-gold"
      aria-label="Sponsor now call-out"
      data-aos="zoom-in"
      data-aos-delay="200"
    >
      <div>
        <p class="font-bold text-2xl sm:text-3xl">Want to make the biggest impact?</p>
        <p class="text-lg text-amber-800/80">
          Contact us at
          <a href="mailto:arodgps@gmail.com" class="underline hover:text-amber-700">
            arodgps@gmail.com
          </a>
          or scan to sponsor instantly.
        </p>
      </div>
      <img
        src="{{ url_for('static', filename='qr-sponsorship-deck.png') }}"
        alt="Sponsor via QR code"
        width="90"
        height="90"
        class="rounded-lg shadow-lg border border-amber-400 bg-white"
      />
    </div>

    <!-- ② Live progress bar -->
    {% set goal = goal_amount or 10000 %}
    {% set raised = raised_amount or 7850 %}
    <div
      class="w-full max-w-xl mx-auto text-center space-y-2"
      aria-label="{{ '$%s raised of $%s goal'|format(raised, goal) }}"
      data-aos="fade-up"
      data-aos-delay="400"
    >
      <div class="w-full bg-zinc-800 h-5 rounded-full border border-amber-400/30 overflow-hidden relative">
        <div
          id="tiersProgress"
          class="bg-amber-400 h-5 rounded-full shadow-gold transition-all duration-1000 ease-out"
          style="width: {{ (raised/goal*100)|round(1,'ceil') }}%;"
        >
          <span class="pl-2 text-black font-bold">
            {{ '$%s'|format('{:,}'.format(raised)) }}
          </span>
        </div>
      </div>
      <span class="text-sm text-amber-200">Goal: ${{ '{:,}'.format(goal) }}</span>
    </div>

    <!-- ③ Section heading -->
    <h2
      id="tiers-heading"
      class="text-4xl font-bold text-amber-400 text-center"
      data-aos="fade-up"
      data-aos-delay="600"
    >
      Sponsorship Tiers
    </h2>

    <!-- ④ Tier cards with flip effect -->
    {% set tiers = [
      ('Platinum','$5,000+','heroicons-solid:crown',['Logo on jerseys','Shout-outs on social','VIP invites'],'from-amber-500 to-amber-300',True),
      ('Gold','$2,500','heroicons-solid:currency-dollar',['Warm-ups logo','Social features','Appreciation invites'],'from-amber-400 to-amber-200',False),
      ('Silver','$1,000','heroicons-solid:medal',['Social shout-outs','Thank-you certificate','Board listing'],'from-gray-300 to-slate-100',False),
      ('Bronze','$500','heroicons-solid:trophy',['Public thank-you','Board listing'],'from-orange-400 to-amber-200',False),
      ('Custom','Any Amount','heroicons-solid:star',['Tailored benefits','Personalized impact'],'from-purple-500 to-pink-400',False)
    ] %}
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10">
      {% for title, amount, icon, benefits, gradient, highlight in tiers %}
      <div
        class="flip-card perspective"
        tabindex="0"
        data-aos="fade-up"
        data-aos-delay="{{ 700 + loop.index0 * 100 }}"
      >
        <div class="relative w-full h-full transition-transform duration-500 preserve-3d group hover:rotate-y-180 focus-within:rotate-y-180">
          <!-- Front -->
          <div class="card-face card-front p-6 rounded-2xl bg-gradient-to-br {{ gradient }} shadow-2xl text-black flex flex-col items-center justify-start space-y-4">
            {% if highlight %}
            <span class="absolute top-4 right-4 bg-black/80 text-amber-300 text-xs px-3 py-1 rounded-full font-semibold shadow">
              Top&nbsp;Tier
            </span>
            {% endif %}
            <div class="text-5xl">
              <i data-feather="{{ icon }}"></i>
            </div>
            <h3 class="text-2xl font-bold">{{ title }}</h3><span class="sr-only">Secure this tier now</span>
            <p class="text-lg font-semibold">{{ amount }}</p>
            <ul class="list-disc list-inside text-sm space-y-1">
              {% for item in benefits %}
              <li>{{ item }}</li>
              {% endfor %}
            </ul>
          </div>
          <!-- Back -->
          <div class="card-face card-back absolute inset-0 p-6 rounded-2xl bg-zinc-800 text-white flex flex-col items-center justify-center backface-hidden shadow-lg">
            <p class="mb-4 font-semibold">Secure this tier now:</p>
            <button
              class="tier-cta inline-block bg-amber-400 text-black font-bold px-6 py-2 rounded-full shadow-gold hover:scale-105 focus-visible:ring-4 focus-visible:ring-amber-300 transition"
              data-amount="{{ amount | replace('$','') | replace(',','') | default('') }}"
            >
              Sponsor {{ title }}
            </button>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- ⑤ FAQ accordion -->
    <div class="max-w-3xl mx-auto pt-10 border-t border-zinc-800" data-aos="fade-up" data-aos-delay="1100">
      <button
        id="faqToggleTiers"
        class="flex items-center gap-2 text-amber-400 font-bold text-lg hover:underline transition"
        aria-expanded="false"
        aria-controls="faqBodyTiers"
      >
        ▶ Frequently Asked Questions
      </button>
      <div
        id="faqBodyTiers"
        class="hidden mt-4 bg-zinc-900 border border-amber-400/20 rounded-xl p-6 space-y-4"
      >
        <div><b>Can I sponsor anonymously?</b><p class="text-sm text-white/80">Yes — just let us know in your message or donation form.</p></div>
        <div><b>Where does my sponsorship go?</b><p class="text-sm text-white/80">100% supports gym rental, travel, academic programs, and gear.</p></div>
        <div><b>How do I become a sponsor?</b><p class="text-sm text-white/80">Click any “Sponsor” button or email us—we’ll personalize your impact!</p></div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    feather.replace();
    document.getElementById('faqToggleTiers')?.addEventListener('click', (e) => {
      const btn = e.currentTarget;
      const body = document.getElementById('faqBodyTiers');
      const open = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!open));
      btn.textContent = (open ? '▶' : '▼') + ' Frequently Asked Questions';
      body.classList.toggle('hidden', open);
    });

    document.querySelectorAll('.tier-cta').forEach((btn) => {
      btn.addEventListener('click', () => {
        const amt = btn.dataset.amount;
        const dlg = document.getElementById('donateDialog');
        if (dlg) {
          dlg.querySelector('input[name="amount"]').value = amt;
          dlg.showModal();
        }
      });
    });
  });
</script>

<style>
  .perspective { perspective: 1000px; }
  .preserve-3d { transform-style: preserve-3d; }
  .rotate-y-180 { transform: rotateY(180deg); }
  .card-face { backface-visibility: hidden; }
  .card-front { position: relative; }
  .card-back { transform: rotateY(180deg); }
  .backface-hidden { backface-visibility: hidden; }
</style>

<section
  id="challenge"
  class="relative overflow-hidden py-16 px-6 bg-gradient-to-br from-zinc-900 via-black to-zinc-950 border-l-4 border-red-400/80"
  aria-labelledby="challenge-heading"
  tabindex="-1"
>
  <!-- 1. Parallax background image -->
  <div
    class="absolute inset-0 -z-10 bg-[url('/static/images/gym-chutes.jpg')] bg-center bg-cover motion-safe:animate-kenburns"
    style="background-attachment: fixed"
    aria-hidden="true"
  ></div>

  <h2
    id="challenge-heading"
    class="text-2xl md:text-3xl font-bold text-red-400 mb-6 drop-shadow-lg"
    data-aos="fade-up"
    data-aos-delay="100"
  >
    The Challenge We Face
  </h2>

  <p
    class="text-lg text-white/80 max-w-3xl mx-auto mb-8 leading-relaxed"
    data-aos="fade-up"
    data-aos-delay="200"
  >
    Despite the love and energy behind our program, we struggle with consistent access to gym space
    and the high cost of tournament travel across states. These financial barriers place a heavy
    strain on our volunteer coaches and passionate parents — limiting the full potential of our kids
    to grow, bond, and succeed together.
  </p>

  <!-- 2. Impact metrics badges -->
  <div
    class="flex flex-wrap justify-center gap-6 mb-8"
    data-aos="fade-up"
    data-aos-delay="300"
    role="list"
  >
    <div
      class="flex flex-col items-center bg-zinc-800/70 px-6 py-4 rounded-xl shadow-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-red-400"
      tabindex="0"
      role="listitem"
      aria-label="120 plus hours of gym time lost"
    >
      <span class="text-3xl font-extrabold text-red-400" data-count="120">0</span>
      <span class="text-white/80 text-sm">Hours of Gym Time Lost</span>
    </div>
    <div
      class="flex flex-col items-center bg-zinc-800/70 px-6 py-4 rounded-xl shadow-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-red-400"
      tabindex="0"
      role="listitem"
      aria-label="800 tournament miles traveled"
    >
      <span class="text-3xl font-extrabold text-red-400" data-count="800">0</span>
      <span class="text-white/80 text-sm">Tournament Miles Traveled</span>
    </div>
  </div>

  <!-- 3. Animated progress bar -->
  <div
    class="max-w-2xl mx-auto mb-8"
    data-aos="fade-up"
    data-aos-delay="400"
    role="region"
    aria-labelledby="gym-rental-label"
  >
    <div id="gym-rental-label" class="text-sm text-white/70 mb-1 flex justify-between">
      <span>Gym Rental Funding</span>
      <span><strong id="gym-funded" aria-live="polite">45%</strong> funded</span>
    </div>
    <div
      class="w-full h-2 bg-zinc-800 rounded-full overflow-hidden"
      role="progressbar"
      aria-valuemin="0"
      aria-valuemax="100"
      aria-valuenow="45"
      aria-label="Gym Rental Funding progress bar"
    >
      <div
        id="gym-progress-bar-fill"
        class="h-full bg-red-400 transition-all duration-1000 ease-out"
        style="width: 0%"
      ></div>
    </div>
  </div>

  <!-- 4. Sponsor CTA -->
  <div class="text-center mb-12" data-aos="fade-up" data-aos-delay="500">
    <a
      href="mailto:arodgps@gmail.com?subject=Gym%20Space%20Sponsorship"
      class="inline-block bg-red-400 hover:bg-red-300 text-black font-bold px-8 py-3 rounded-full shadow-lg transition-transform hover:scale-105 focus-visible:ring-4 focus-visible:ring-red-300 focus:outline-none"
    >
      Sponsor a Practice
    </a>
  </div>

  <!-- 5. Parent testimonial pop-over -->
  <div
    class="relative max-w-3xl mx-auto"
    data-aos="fade-up"
    data-aos-delay="600"
  >
    <p class="text-xs text-white/60 italic">
      “Without enough court time, my son lost valuable training hours this season.”
    </p>
    <button
      type="button"
      class="absolute top-0 right-0 p-2 text-white/70 hover:text-white transition focus:outline-none focus:ring-2 focus:ring-red-400 rounded"
      aria-describedby="testimonial-pop"
      aria-expanded="false"
      aria-controls="testimonial-pop"
      id="testimonial-toggle"
      onmouseenter="showTestimonial(true)"
      onmouseleave="showTestimonial(false)"
      onfocus="showTestimonial(true)"
      onblur="showTestimonial(false)"
    >
      ℹ️
    </button>
    <div
      id="testimonial-pop"
      class="hidden absolute right-0 mt-10 w-64 p-4 bg-zinc-900/90 text-white text-sm rounded-lg shadow-lg"
      role="tooltip"
      aria-live="polite"
    >
      <strong>Team Parent, Class of 2030</strong><br />
      “We missed 8 practices this year due to no gym—every donation helps keep us on court!”
    </div>
  </div>
</section>

<script>
  // Animate count-up for badges
  document.addEventListener('DOMContentLoaded', () => {
    const counters = document.querySelectorAll('[data-count]');
    counters.forEach((el) => {
      const target = +el.getAttribute('data-count');
      let count = 0;
      const step = Math.max(1, Math.floor(target / 50));
      const interval = setInterval(() => {
        count += step;
        if (count >= target) {
          el.textContent = target;
          clearInterval(interval);
        } else {
          el.textContent = count;
        }
      }, 30);
    });

    // Animate progress bar fill
    const progressBarFill = document.getElementById('gym-progress-bar-fill');
    if (progressBarFill) {
      setTimeout(() => {
        progressBarFill.style.width = '45%';
      }, 500); // Delay to sync with AOS animation
    }
  });

  function showTestimonial(show) {
    const pop = document.getElementById('testimonial-pop');
    const toggle = document.getElementById('testimonial-toggle');
    if (show) {
      pop.classList.remove('hidden');
      toggle.setAttribute('aria-expanded', 'true');
    } else {
      pop.classList.add('hidden');
      toggle.setAttribute('aria-expanded', 'false');
    }
  }
</script>

{# templates/partials/sponsor_wall.html #}
<section
  id="sponsor-wall"
  role="region"
  aria-labelledby="sponsor-heading"
  class="bg-zinc-950/95 py-12 border-t border-zinc-800 text-center text-white"
  data-aos="fade-up"
  data-aos-delay="300"
>
  <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 space-y-8">

    <!-- Funding HUD -->
    <div id="funding-hud" class="w-full max-w-xl mx-auto">
      <div class="flex justify-between text-sm font-mono text-amber-200 mb-1">
        <span>Raised</span>
        <span>
          <span id="funding-raised-amount" aria-live="polite">${{ funding_raised or 0 }}</span> /
          <span id="funding-goal-amount">${{ funding_goal or 10000 }}</span>
        </span>
      </div>
      <div class="relative w-full h-4 rounded-full bg-zinc-800 overflow-hidden">
        <div 
          id="funding-progress-bar"
          class="absolute inset-y-0 left-0 bg-amber-400 shadow-gold transition-all duration-700"
          data-raised="{{ funding_raised or 0 }}"
          data-goal="{{ funding_goal or 10000 }}"
          role="progressbar"
          aria-valuemin="0"
          aria-valuemax="{{ funding_goal or 10000 }}"
          aria-valuenow="{{ funding_raised or 0 }}"
          style="width: {{ ((funding_raised or 0) / (funding_goal or 10000) * 100) | round(1) }}%;"
        ></div>
      </div>
    </div>

    <!-- Sponsor Section Header -->
    <header class="space-y-2">
      <h2
        id="sponsor-heading"
        class="text-2xl sm:text-3xl font-extrabold text-amber-400 tracking-tight"
      >
        Our Generous Sponsors
      </h2>
      <p class="text-sm sm:text-base text-amber-200">
        Every logo below represents a family or company that keeps our kids on the court—thank you!
      </p>
      <p id="sponsor-count" class="text-xs text-white/70 italic" aria-live="polite">
        {{ sponsors|length }} Sponsor{{ sponsors|length != 1 and 's' or '' }} and counting!
      </p>
    </header>

    {% if sponsors %}
    <div class="relative overflow-x-auto vendor-marquee">
      <ul class="inline-flex items-center gap-8 whitespace-nowrap py-4" aria-label="Sponsor logos">
        {% for sponsor in sponsors %}
        <li class="relative shrink-0">
          <a
            href="{{ sponsor.website or '#' }}"
            target="_blank"
            rel="noopener noreferrer"
            class="group inline-block"
            aria-label="Visit {{ sponsor.name }}"
          >
            <img
              src="{{ sponsor.logo_url }}"
              alt="{{ sponsor.name }} logo"
              class="h-16 sm:h-20 grayscale group-hover:grayscale-0 transition duration-300"
              loading="lazy"
              width="160"
              height="80"
            />
            {% if sponsor.tier == 'Platinum' %}
            <span class="absolute top-0 right-0 bg-amber-400 text-black text-xs font-bold px-1 rounded-bl">PLATINUM</span>
            {% endif %}
          </a>
        </li>
        {% endfor %}
      </ul>
    </div>
    {% else %}
    <ul class="grid grid-cols-3 sm:grid-cols-5 gap-6">
      {% for _ in range(5) %}
      <li class="h-16 sm:h-20 bg-zinc-800 animate-pulse rounded-lg"></li>
      {% endfor %}
    </ul>
    <p class="text-sm text-gray-400 mb-4">
      Your logo could be here—become a founding sponsor today!
    </p>
    {% endif %}

    <div>
      <a
        href="#donateModal"
        hx-get="/modal/sponsor"
        class="inline-flex items-center gap-2 rounded-lg bg-amber-400/90 px-6 py-2 text-sm font-semibold text-zinc-900 shadow-md hover:bg-amber-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 transition"
        aria-label="Become a Sponsor"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-4 w-4"
          fill="currentColor"
          viewBox="0 0 16 16"
          aria-hidden="true"
        >
          <path d="M8 0a8 8 0 100 16A8 8 0 008 0zM4 7.5h8v1H4v-1z" />
        </svg>
        Become a Sponsor
      </a>
    </div>
  </div>
</section>

<style>
  @keyframes m-arquee {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(calc(-1 * (100% - 100vw)));
    }
  }
  .vendor-marquee ul {
    animation: m-arquee 30s linear infinite;
  }
  .vendor-marquee:hover ul {
    animation-play-state: paused;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const marquee = document.querySelector('.vendor-marquee ul');
    if (!marquee) return;
    const totalW = marquee.scrollWidth;
    const viewport = document.documentElement.clientWidth;
    const duration = Math.max(20, (totalW / viewport) * 30);
    marquee.style.animationDuration = duration + 's';
  });
</script>

<div
  id="newsletterPopup"
  class="fixed inset-0 z-[9999] flex items-center justify-center bg-black bg-opacity-80 opacity-0 pointer-events-none transition-opacity duration-300"
  role="dialog"
  aria-modal="true"
  aria-labelledby="newsletterTitle"
  aria-describedby="newsletterDesc"
>
  <div
    class="bg-zinc-900 text-white rounded-lg shadow-xl max-w-sm w-full p-6 relative"
    role="document"
  >
    <button
      id="newsletterCloseBtn"
      aria-label="Close newsletter popup"
      class="absolute top-3 right-3 text-amber-400 hover:text-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-400 rounded"
      type="button"
    >
      &times;
    </button>
    <h2 id="newsletterTitle" class="text-2xl font-bold mb-2">Join Our Newsletter</h2>
    <p id="newsletterDesc" class="mb-4 text-white/80">
      Stay updated on our latest news and events.
    </p>
    <form id="newsletterForm" class="space-y-4" novalidate>
      <input
        type="email"
        aria-label="Email address"
        name="email"
        required
        placeholder="Your email"
        class="w-full rounded px-3 py-2 bg-zinc-800 text-white focus:outline-none focus:ring-2 focus:ring-amber-400"
      />
      <button
        type="submit"
        class="w-full bg-amber-400 text-black font-semibold rounded py-2 hover:bg-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-400 transition"
      >
        Subscribe
      </button>
    </form>
  </div>
</div>

<style>
  /* Visible popup */
  #newsletterPopup.show {
    opacity: 1 !important;
    pointer-events: auto !important;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const popup = document.getElementById("newsletterPopup");
    const closeBtn = document.getElementById("newsletterCloseBtn");
    const form = document.getElementById("newsletterForm");

    // Show popup after 5 seconds with fade-in
    setTimeout(() => {
      popup.classList.add("show");
      // Focus first input for accessibility
      form.email.focus();
    }, 5000);

    // Close popup handler
    closeBtn.addEventListener("click", () => {
      popup.classList.remove("show");
    });

    // Close on click outside content
    popup.addEventListener("click", (e) => {
      if (e.target === popup) {
        popup.classList.remove("show");
      }
    });

    // Trap focus inside popup for accessibility
    popup.addEventListener("keydown", (e) => {
      if (e.key === "Tab") {
        const focusableElements = popup.querySelectorAll(
          'a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])'
        );
        const firstElem = focusableElements[0];
        const lastElem = focusableElements[focusableElements.length - 1];
        if (e.shiftKey) {
          if (document.activeElement === firstElem) {
            lastElem.focus();
            e.preventDefault();
          }
        } else {
          if (document.activeElement === lastElem) {
            firstElem.focus();
            e.preventDefault();
          }
        }
      } else if (e.key === "Escape") {
        popup.classList.remove("show");
      }
    });

    // Handle form submission (stub)
    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const email = form.email.value.trim();
      if (email) {
        alert(`Thanks for subscribing, ${email}!`);
        form.reset();
        popup.classList.remove("show");
      } else {
        alert("Please enter a valid email address.");
      }
    });
  });
</script>

<body id="bodyRoot" class="bg-zinc-950 text-white font-sans antialiased fade-in dark:bg-black" aria-live="polite">
  <!-- 🔗 Accessible Skip Link -->
  <a
    href="#main-content"
    class="sr-only focus:not-sr-only fixed top-4 left-4 z-[9999] bg-amber-400 text-black font-bold px-4 py-2 rounded shadow-lg focus:outline-none focus-visible:ring-2 ring-black transition"
  >
    ⤵ Skip to Content
  </a>

  <!-- ─── Header ────────────────────────────── -->
  <header
    role="banner"
    class="sticky top-0 z-50 w-full bg-black/95 backdrop-blur-sm border-b border-amber-500/20 shadow-xl transition-all duration-300 ease-in-out"
  >
    <div class="max-w-7xl mx-auto flex items-center justify-between px-4 py-4 md:px-8">
      <!-- 🔰 Logo + Brand -->
      <a
        href="{{ url_for('main.index') }}"
        class="flex items-center gap-3 group focus:outline-none focus-visible:ring-2 ring-amber-400"
      >
        <img
          src="{{ url_for('static', filename='logo-atx-elite.png') }}"
          class="w-12 h-12 rounded-full shadow-md ring-2 ring-amber-400 group-hover:scale-105 transition-transform duration-200"
          loading="lazy"
          decoding="async"
          alt="Connect ATX Elite Logo"
        />
        <span
          class="text-2xl font-extrabold tracking-tight text-amber-400 drop-shadow-[0_2px_4px_rgba(250,204,21,0.25)] select-none"
          aria-label="Connect ATX Elite"
        >
          Connect ATX Elite
        </span>
      </a>

      <!-- 🧭 Desktop Nav -->
      <nav aria-label="Primary navigation" class="hidden md:flex items-center gap-8 text-lg font-medium">
        {% for link in ['about', 'tiers', 'testimonials', 'faq', 'contact'] %}
          <a
            href="#{{ link }}"
            class="text-white hover:text-amber-400 focus:text-amber-400 transition-colors duration-150"
          >
            {{ link.capitalize() }}
          </a>
        {% endfor %}
      </nav>

      <!-- 🟨 Sponsor CTA (Desktop) -->
      <div class="hidden md:block">
        <a
          href="#tiers"
          class="px-6 py-2 rounded-full bg-amber-400 text-black font-bold shadow-lg hover:bg-amber-300 focus-visible:ring-4 ring-amber-400 transition animate-glow"
        >
          Become a Sponsor
        </a>
      </div>

      <!-- 🌙 Dark Mode Toggle Button -->
      <button
        id="themeToggle"
        type="button"
        class="ml-4 rounded-full p-2 bg-zinc-800/80 backdrop-blur hover:bg-zinc-700 text-amber-400 shadow-lg focus-visible:ring-4 focus-visible:ring-amber-200 transition"
        aria-label="Toggle dark mode"
        title="Toggle light/dark mode"
      >
        🌙
      </button>

      <!-- 📱 Mobile Menu Button -->
      <button
        id="mobileMenuButton"
        type="button"
        class="md:hidden flex items-center text-amber-400 focus:outline-none focus-visible:ring-2 ring-amber-400 ml-2"
        aria-label="Open mobile navigation menu"
        aria-controls="mobile-menu"
        aria-expanded="false"
      >
        <svg class="w-8 h-8" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 8h16M4 16h16" />
        </svg>
      </button>
    </div>

    <!-- 📱 Mobile Menu -->
    <nav
      id="mobile-menu"
      class="md:hidden hidden px-4 pb-4 bg-black/95 border-t border-amber-500/20 animate-fade-in-down"
      aria-label="Mobile navigation"
      tabindex="-1"
    >
      {% for link in ['about', 'tiers', 'testimonials', 'faq', 'contact'] %}
        <a
          href="#{{ link }}"
          class="block py-2 text-lg text-white hover:text-amber-400 focus:text-amber-400 transition"
        >
          {{ link.capitalize() }}
        </a>
      {% endfor %}
      <a
        href="#tiers"
        class="block mt-4 py-2 px-6 text-center rounded-full bg-amber-400 text-black font-bold shadow-md hover:bg-amber-300 focus-visible:ring-2 ring-amber-400 transition"
      >
        Become a Sponsor
      </a>
    </nav>
  </header>

  <!-- ─── Scripts ───────────────────────────── -->
  <script>
    // Dark mode toggle logic
    (() => {
      const root = document.documentElement;
      const btn = document.getElementById('themeToggle');
      const stored = localStorage.getItem('theme');

      // Initialize button icon & theme on page load
      if (stored === 'dark' || (!stored && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        root.classList.add('dark');
        btn.textContent = '☀️';
      } else {
        btn.textContent = '🌙';
      }

      // Toggle theme on button click
      btn.addEventListener('click', () => {
        root.classList.toggle('dark');
        const isDark = root.classList.contains('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        btn.textContent = isDark ? '☀️' : '🌙';
      });
    })();

    // Mobile menu toggle logic
    (() => {
      const mobileBtn = document.getElementById('mobileMenuButton');
      const mobileMenu = document.getElementById('mobile-menu');

      mobileBtn.addEventListener('click', () => {
        const expanded = mobileBtn.getAttribute('aria-expanded') === 'true';
        mobileBtn.setAttribute('aria-expanded', String(!expanded));
        mobileMenu.classList.toggle('hidden');
        if (!expanded) {
          mobileMenu.focus();
        }
      });
    })();
  </script>

{# templates/partials/back_to_top_ball.html #}
<button
  id="back-to-top-ball"
  type="button"
  aria-label="Back to top"
  class="fixed bottom-6 right-6 w-14 h-14 z-[60] rounded-full bg-amber-400/90 backdrop-blur-sm shadow-xl opacity-0 pointer-events-none scale-95 translate-y-6 transition-all duration-300 ease-out hover:scale-110 hover:shadow-2xl focus:outline-none focus-visible:ring-4 focus-visible:ring-amber-300"
>
  <img
    src="{{ url_for('static', filename='images/ball.png') }}"
    alt=""
    aria-hidden="true"
    class="w-9 h-9 mx-auto pointer-events-none select-none"
    loading="lazy"
  />
  <span class="sr-only">Back to top</span>
</button>

<section
  id="faq"
  class="bg-black py-12 text-white"
  aria-labelledby="faq-heading"
  data-aos="fade-up"
  data-aos-delay="100"
>
  <div class="max-w-2xl mx-auto px-4">
    <h2 id="faq-heading" class="text-2xl font-bold text-amber-400 mb-6 text-center">
      Frequently Asked Questions
    </h2>

    <!-- 1. Search filter -->
    <div class="mb-6">
      <label for="faq-search" class="sr-only">Search FAQs</label>
      <input
        id="faq-search"
        type="search"
        placeholder="Search questions…"
        aria-label="Search FAQs"
        class="w-full bg-zinc-800 rounded-full px-4 py-2 placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-amber-400"
      />
    </div>

    <ul class="divide-y divide-zinc-700" id="faq-list">
      {% set faqs = [
        {"q":"Can I sponsor anonymously?","a":"Absolutely — just let us know in your message or donation form."},
        {"q":"How are donations used?","a":"100% supports gym rental, tournament fees, travel costs, academic programs, and gear for our student-athletes."},
        {"q":"How do I become a sponsor?","a":"Use the “Become a Sponsor” button or email us — we’ll reach out to personalize your sponsorship!"}
      ] %}
      {% for faq in faqs %}
      <li class="py-4">
        <button
          type="button"
          class="faq-toggle flex w-full justify-between items-center text-left font-medium focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-400"
          aria-expanded="false"
          aria-controls="panel-{{ loop.index }}"
          id="panel-{{ loop.index }}-label"
          data-target="panel-{{ loop.index }}"
        >
          <span>{{ faq.q }}</span>
          <svg
            class="w-5 h-5 transform transition-transform"
            aria-hidden="true"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"
            />
          </svg>
        </button>
        <div
          id="panel-{{ loop.index }}"
          class="mt-2 pr-8 text-zinc-300 hidden"
          role="region"
          aria-labelledby="panel-{{ loop.index }}-label"
        >
          <p>{{ faq.a }}</p>
        </div>
      </li>
      {% endfor %}
    </ul>

    <!-- 5. Quick-help chat -->
    <div class="mt-8 text-center">
      <a
        href="https://wa.me/15128200475?text=Hi%20Connect%20ATX%20Elite!"
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center gap-2 bg-green-500 hover:bg-green-600 text-white font-semibold px-5 py-3 rounded-full shadow-md transition"
        aria-label="Chat with us on WhatsApp"
      >
        💬 Live Chat Help
      </a>
    </div>
  </div>
</section>

<script>
  // Accordion toggle behavior with aria updates
  document.querySelectorAll('.faq-toggle').forEach((btn) => {
    btn.addEventListener('click', () => {
      const expanded = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!expanded));
      btn.querySelector('svg').classList.toggle('rotate-180', !expanded);
      const panel = document.getElementById(btn.dataset.target);
      if (expanded) {
        panel.classList.add('hidden');
        panel.setAttribute('hidden', '');
      } else {
        panel.classList.remove('hidden');
        panel.removeAttribute('hidden');
      }
    });
  });

  // Live search filter for FAQ questions
  document.getElementById('faq-search').addEventListener('input', (e) => {
    const term = e.target.value.toLowerCase();
    document.querySelectorAll('#faq-list li').forEach((li) => {
      const question = li.querySelector('.faq-toggle span').textContent.toLowerCase();
      li.style.display = question.includes(term) ? '' : 'none';
    });
  });
</script>

{# templates/partials/donation_modal.html — Enhanced Donation Modal #}
<dialog
  id="donateDialog"
  aria-modal="true"
  aria-labelledby="donateDialogTitle"
  class="w-full max-w-md p-0 rounded-2xl overflow-hidden shadow-xl backdrop:bg-black/60 z-[45]"
>
  <form id="donateForm" method="dialog" class="bg-zinc-900 text-white">
    <header class="flex justify-between items-center px-6 py-4 bg-amber-400 text-black">
      <h3 id="donateDialogTitle" class="text-lg font-bold">Support the Team 🏀</h3>
      <button
        type="button"
        class="text-2xl leading-none focus:outline-none focus:ring-2 focus:ring-amber-500 rounded"
        aria-label="Close"
        tabindex="0"
      >
        &times;
      </button>
    </header>
    <div class="px-6 py-4 space-y-4">
      <p class="text-sm text-white/75">100% of proceeds cover gym time & travel.</p>

      <label class="block">
        <span class="text-sm">Your Email (receipt)</span>
        <input
          name="email"
          type="email"
          required
          class="mt-1 w-full px-3 py-2 bg-zinc-800 rounded focus:ring-2 focus:ring-amber-400"
          autocomplete="email"
        />
      </label>

      <label class="block">
        <span class="text-sm">Amount (USD)</span>
        <input
          name="amount"
          type="number"
          min="1"
          max="999"
          value="25"
          required
          class="mt-1 w-full px-3 py-2 bg-zinc-800 rounded focus:ring-2 focus:ring-amber-400"
          autocomplete="off"
          inputmode="numeric"
        />
      </label>

      <button
        id="stripeBtn"
        type="submit"
        class="w-full inline-block text-center bg-amber-400 text-black font-semibold py-2 rounded-lg shadow transition hover:bg-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-500"
        data-stripe
      >
        Donate with Card
      </button>

      <hr class="border-zinc-700" />

      <a
        href="{{ paypal_link or '#' }}"
        class="w-full block text-center bg-blue-600 text-white font-semibold py-2 rounded-lg shadow transition hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-400"
        target="_blank"
        rel="noopener noreferrer"
      >
        Donate with PayPal
      </a>
    </div>
  </form>
</dialog>

<style>
  /* Dialog z-index layering */
  #donateDialog {
    z-index: 100000 !important;
  }
  /* Native dialog backdrop styling */
  #donateDialog::backdrop {
    background: rgba(0, 0, 0, 0.55);
    z-index: 44 !important;
  }
  /* Responsive full width on small screens */
  @media (max-width: 500px) {
    #donateDialog {
      max-width: 98vw;
      border-radius: 1rem;
    }
  }
</style>

<script defer type="module">
  import confetti from 'https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/+esm';
  import { loadStripe } from 'https://js.stripe.com/v3/';

  (async () => {
    const stripe = await loadStripe('{{ stripe_publishable }}');
    const dialog = document.getElementById('donateDialog');
    const form = document.getElementById('donateForm');

    // Open dialog on any element with [data-open-donate] attribute
    document.querySelectorAll('[data-open-donate]').forEach(btn => {
      btn.addEventListener('click', () => {
        const amount = btn.dataset.amount || '25';
        dialog.querySelector('input[name=amount]').value = amount;
        dialog.showModal();
        confetti({ particleCount: 80, spread: 60, origin: { y: 0.6 } });
      });
    });

    // Close dialog on close button click
    dialog.querySelector('button[aria-label="Close"]').onclick = () => dialog.close();

    // Close dialog on outside click
    dialog.addEventListener('click', e => {
      if (e.target === dialog) dialog.close();
    });

    // Prevent dialog from closing on ESC (optional, can be removed if you want ESC to close)
    dialog.addEventListener('cancel', e => e.preventDefault());

    // Handle form submission and trigger Stripe Checkout
    form.addEventListener('submit', async e => {
      e.preventDefault();
      const email = form.email.value;
      const amount = parseInt(form.amount.value, 10);
      if (!amount || amount < 1 || amount > 999) {
        alert('Please enter a valid donation amount between $1 and $999.');
        return;
      }
      const res = await fetch('/api/create-checkout', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ amount, email }),
      });
      const { session_id } = await res.json();
      await stripe.redirectToCheckout({ sessionId: session_id });
    });

    // Trap focus within dialog for accessibility
    dialog.addEventListener('keydown', e => {
      if (e.key === 'Tab') {
        const focusable = Array.from(dialog.querySelectorAll('input, button, a'));
        const idx = focusable.indexOf(document.activeElement);
        let next = idx + (e.shiftKey ? -1 : 1);
        if (next < 0) next = focusable.length - 1;
        if (next >= focusable.length) next = 0;
        focusable[next].focus();
        e.preventDefault();
      }
    });
  })();
</script>

<section
  id="about"
  class="py-24 px-6 bg-zinc-950 text-white space-y-20"
  role="region"
  aria-labelledby="about-heading"
  tabindex="-1"
>
  <!-- 🎯 Our Mission -->
  <div class="max-w-5xl mx-auto space-y-6" data-aos="fade-up" data-aos-delay="100">
    <h2 id="about-heading" class="text-3xl sm:text-4xl font-bold text-amber-400">
      Our Mission
    </h2>
    <p class="text-lg sm:text-xl leading-relaxed text-white/90">
      Connect ATX Elite is a community‑powered, non‑profit <strong>12U AAU</strong> basketball program based
      in Austin, TX. We develop not only skilled athletes, but confident, disciplined, and
      academically driven young leaders.
    </p>
    <p class="text-lg sm:text-xl leading-relaxed text-white/70">
      Many of our boys are honor‑roll students thriving in a positive environment of teamwork,
      mentorship, and integrity. Through basketball we teach life lessons that extend far beyond the
      court.
    </p>
  </div>

  <!-- ⭐️ Impact Stats -->
  <div
    class="max-w-5xl mx-auto"
    data-aos="fade-up"
    data-aos-delay="300"
    aria-label="Program Impact Stats"
    role="list"
  >
    <div class="flex flex-wrap justify-center gap-8 md:gap-14 py-8">
      {% set impact = [
        {"label": "Players Enrolled", "value": 16},
        {"label": "Honor Roll Scholars", "value": 11},
        {"label": "Tournaments Played", "value": 12},
        {"label": "Years Running", "value": 3}
      ] %}
      {% for stat in impact %}
      <div
        class="bg-zinc-900/80 border border-amber-400/20 shadow-gold rounded-xl px-8 py-6 min-w-[150px] text-center focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-400"
        tabindex="0"
        role="listitem"
        aria-label="{{ stat.value }} {{ stat.label }}"
      >
        <div
          class="text-3xl font-extrabold text-amber-400"
          data-count="{{ stat.value }}"
          id="countup-{{ loop.index0 }}"
          >0</div>
        <div class="text-white/80 text-base font-medium">{{ stat.label }}</div>
      </div>
      {% endfor %}
    </div>
  </div>

  <!-- 🟧 Divider -->
  <div
    class="w-16 h-1 mx-auto rounded-full bg-gradient-to-r from-amber-400/60 to-amber-300/60"
    data-aos="fade-up"
    data-aos-delay="450"
    aria-hidden="true"
  ></div>

  <!-- ⚠️ Challenge with Tooltip Enhancement -->
  <div class="max-w-5xl mx-auto" data-aos="fade-up" data-aos-delay="550">
    <div
      class="group relative rounded-2xl shadow-lg bg-gradient-to-br from-zinc-900 via-black to-zinc-950 border-l-4 border-red-400/80 px-7 py-8 space-y-6 cursor-help focus:outline-none focus-visible:ring-2 focus-visible:ring-red-400"
      role="region"
      aria-labelledby="challenge-heading"
      tabindex="0"
      aria-describedby="challenge-tooltip"
    >
      <h3 id="challenge-heading" class="text-2xl sm:text-3xl font-semibold text-red-400">
        The Challenge We Face
      </h3>
      <p class="text-lg sm:text-xl leading-relaxed text-white/80">
        We struggle with consistent gym space and the high cost of tournament travel. These barriers
        strain our volunteer coaches and parents — limiting our kids’ ability to grow, bond, and
        succeed together.
      </p>

      <!-- Tooltip -->
      <div
        id="challenge-tooltip"
        role="tooltip"
        class="absolute left-1/2 bottom-full mb-3 w-72 rounded-md bg-black/90 px-4 py-3 text-sm text-amber-200 shadow-lg opacity-0 pointer-events-none transition-opacity duration-300 group-hover:opacity-100 group-focus:opacity-100 -translate-x-1/2"
      >
        Help us secure resources to expand gym access, reduce travel costs, and invest in our coaches.
      </div>
    </div>
  </div>

  <!-- 💡 Impact supporters can make -->
  <div class="max-w-5xl mx-auto space-y-6" data-aos="fade-up" data-aos-delay="700">
    <h3 class="text-2xl sm:text-3xl font-semibold text-green-400">The Impact You Can Make</h3>
    <ul class="list-disc list-inside space-y-2 text-lg sm:text-xl text-white/85 pl-4 md:pl-8" role="list">
      <li>Secure a consistent gym space for practices</li>
      <li>Support travel & lodging costs for tournaments</li>
      <li>Provide uniforms, gear, meals, and hydration</li>
      <li>Fund academic support and mentorship programs</li>
    </ul>
    <p class="pt-4 text-lg sm:text-xl font-semibold text-white">
      With your help, we can give these young athletes the foundation to become confident,
      accomplished leaders.
    </p>
  </div>

  <!-- ✨ Call to Action Button -->
  <div class="max-w-5xl mx-auto text-center" data-aos="fade-up" data-aos-delay="850">
    <a
      href="#tiers"
      class="inline-block bg-amber-400 hover:bg-amber-300 text-black font-extrabold px-12 py-4 rounded-3xl shadow-[0_0_25px_#facc15] focus-visible:ring-4 ring-amber-300 transition-transform transform-gpu hover:scale-105 animate-pulse-slow"
      aria-label="Become a Sponsor"
    >
      Become a Sponsor & Support Our Mission
    </a>
  </div>
</section>

<script>
  // Animated count-up for stats
  document.addEventListener('DOMContentLoaded', () => {
    const counters = document.querySelectorAll('[data-count]');
    counters.forEach((el) => {
      const target = +el.getAttribute('data-count');
      let count = 0;
      const step = Math.max(1, Math.floor(target / 50));
      const interval = setInterval(() => {
        count += step;
        if (count >= target) {
          el.textContent = target;
          clearInterval(interval);
        } else {
          el.textContent = count;
        }
      }, 30);
    });
  });
</script>

<section
  id="goal"
  class="relative isolate overflow-hidden rounded-3xl bg-luxe-night/90 p-6 text-center text-white shadow-2xl"
  data-aos="fade-up"
  data-aos-delay="300"
>
  <!-- 1. Radial gauge background -->
  <svg class="absolute inset-0 w-full h-full -z-10" viewBox="0 0 200 200" aria-hidden="true" focusable="false">
    <defs>
      <linearGradient id="gauge-gradient" x1="1" y1="0" x2="0" y2="1">
        <stop offset="0%" stop-color="#facc15" />
        <stop offset="100%" stop-color="#4ade80" />
      </linearGradient>
    </defs>
    <circle cx="100" cy="100" r="90" stroke="rgba(255,255,255,0.05)" stroke-width="20" fill="none" />
    <circle
      id="gauge-arc"
      cx="100"
      cy="100"
      r="90"
      stroke="url(#gauge-gradient)"
      stroke-width="20"
      stroke-dasharray="565.48"
      stroke-dashoffset="565.48"
      fill="none"
      transform="rotate(-90 100 100)"
    />
  </svg>

  <h2 class="text-xl font-bold mb-2">Season Goal</h2>

  <!-- 2. Dynamic percentage label -->
  <p class="text-3xl font-mono" id="goal-amount" aria-live="polite" aria-atomic="true">$7,900 / $10,000</p>

  <!-- 3. Animated progress bar -->
  <progress
    id="goal-bar"
    value="0"
    max="10000"
    class="w-full h-4 mt-4 rounded-full bg-zinc-800"
    aria-valuemin="0"
    aria-valuemax="10000"
    aria-valuenow="0"
    role="progressbar"
    aria-label="Progress towards season goal"
  ></progress>

  <!-- 4. Live donor ticker -->
  <div
    id="donor-ticker"
    class="mt-4 text-sm italic text-white/70 overflow-hidden whitespace-nowrap"
    style="mask-image: linear-gradient(to right, transparent, white 20%, white 80%, transparent)"
    aria-label="Latest donors ticker"
  >
    🚨 Latest donors: Alex M., Jamie R., Taylor S., Morgan L., …
  </div>
</section>

<script>
(() => {
  const totalGoal = 10000;
  let current = 7900; // initial funding amount

  // Animate numeric count in label
  function animateValue(el, start, end, duration) {
    const range = end - start;
    let startTime = null;
    function step(timestamp) {
      if (!startTime) startTime = timestamp;
      const progress = Math.min((timestamp - startTime) / duration, 1);
      el.textContent = `$${Math.floor(start + progress * range).toLocaleString()} / $${totalGoal.toLocaleString()}`;
      if (progress < 1) {
        requestAnimationFrame(step);
      }
    }
    requestAnimationFrame(step);
  }

  // Elements
  const section = document.getElementById('goal');
  const gaugeArc = document.getElementById('gauge-arc');
  const progressBar = document.getElementById('goal-bar');
  const label = document.getElementById('goal-amount');

  // IntersectionObserver to animate when in viewport
  const observer = new IntersectionObserver((entries, obs) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        // Animate radial gauge arc stroke
        const dashOffset = 565.48 * (1 - current / totalGoal);
        gaugeArc.style.transition = 'stroke-dashoffset 1.5s ease-out';
        gaugeArc.style.strokeDashoffset = dashOffset;

        // Animate progress bar
        progressBar.max = totalGoal;
        progressBar.value = 0;
        progressBar.style.transition = 'value 1.5s ease-out';
        setTimeout(() => (progressBar.value = current), 50);

        // Animate numeric label count up
        animateValue(label, 0, current, 1500);

        // Confetti celebration milestones
        [0.5, 0.75, 1].forEach(ratio => {
          if (current / totalGoal >= ratio) {
            import('https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/+esm').then(({ default: confetti }) => {
              confetti({
                particleCount: 50,
                spread: 40,
                origin: { y: 0.6 },
                colors: ['#facc15', '#4ade80', '#0a0a0a']
              });
            });
          }
        });

        obs.disconnect(); // animate only once
      }
    });
  }, { threshold: 0.4 });
  observer.observe(section);

  // Optional: Socket.IO live update listener for donations
  if (window.io) {
    const socket = window.io();
    socket.on('donation_update', ({ total }) => {
      current = total;
      progressBar.value = total;
      label.textContent = `$${total.toLocaleString()} / $${totalGoal.toLocaleString()}`;
      gaugeArc.style.strokeDashoffset = 565.48 * (1 - total / totalGoal);
    });
  }

  // Donor ticker scroll effect
  const ticker = document.getElementById('donor-ticker');
  let offset = 0;
  setInterval(() => {
    offset = (offset + 1) % ticker.scrollWidth;
    ticker.scrollLeft = offset;
  }, 50);
})();
</script>

{# templates/partials/testimonials.html #}
<section
  id="testimonials"
  class="relative isolate bg-gradient-to-br from-zinc-800 to-black py-24 px-6 text-white"
  role="region"
  aria-labelledby="testimonials-heading"
  tabindex="-1"
>
  <div class="max-w-5xl mx-auto text-center space-y-12">
    {# ⭐️ Social-proof badge #}
    <div
      class="flex justify-center items-center gap-1 text-2xl text-amber-400 animate-sparkle select-none"
      aria-hidden="true"
    >
      {% for _ in range(5) %}<span>★</span>{% endfor %}
      <span class="ml-2 text-base font-semibold text-amber-200">(5.0)</span>
    </div>

    <h2 id="testimonials-heading" class="text-3xl sm:text-4xl font-bold text-amber-400">
      What They’re Saying
    </h2>

    {# ── Carousel ──────────────────────────────── #}
    <div class="relative max-w-3xl mx-auto">
      <figure
        id="quoteBox"
        class="relative italic text-lg sm:text-xl text-white/90 rounded-xl p-8 bg-zinc-900/70 shadow-lg outline-none select-text transition-opacity duration-500"
        aria-live="polite"
        aria-atomic="true"
        tabindex="0"
      >
        <span
          id="confettiEmoji"
          class="absolute -top-4 left-1/2 -translate-x-1/2 opacity-0 transition-opacity duration-700 pointer-events-none"
          aria-hidden="true"
        >🎉🎊✨</span>

        <blockquote id="quoteText">Loading…</blockquote>
        <figcaption id="quoteAuthor" class="mt-4 text-sm font-medium text-amber-300"></figcaption>

        <button
          id="copyQuoteBtn"
          class="mt-4 text-xs text-amber-400 underline hover:text-amber-200 focus:outline-offset-4"
          aria-label="Copy testimonial to clipboard"
        >
          Copy Quote
        </button>
      </figure>

      <div class="flex justify-center mt-6 gap-2">
        {% for i in range(3) %}
        <button
          class="carousel-dot w-3 h-3 rounded-full border-2 border-amber-400 transition-transform duration-200 {% if i == 0 %}bg-amber-400 scale-110{% else %}bg-zinc-700{% endif %}"
          data-idx="{{ i }}"
          aria-label="Show testimonial {{ i + 1 }}"
        ></button>
        {% endfor %}
      </div>
    </div>

    <img
      src="https://static.wixstatic.com/media/2f0953_5d94082989fb4c4eb31f7f440de183c2~mv2.jpg/v1/fill/w_1100,h_1034,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/IMG_2031.jpg"
      alt="Team showing off championship rings"
      width="480"
      height="320"
      loading="lazy"
      class="rounded-2xl shadow-2xl ring-4 ring-amber-300/50 object-cover mx-auto"
    />
  </div>
</section>

<script defer type="module">
  import confetti from 'https://cdn.skypack.dev/canvas-confetti@1.6.0';

  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const testimonials = [
    {
      q: 'Winning felt amazing — but it’s being part of a team that believes in you that means the most.',
      a: 'Connect ATX Elite Player, Class of 2030'
    },
    {
      q: 'Being part of Connect ATX Elite helps me stay focused in school and basketball. I want to make my family proud.',
      a: 'Honor-Roll Scholar-Athlete'
    },
    {
      q: 'I’ve seen real changes in my son — he’s more disciplined, focused, and confident in class and in life.',
      a: 'Team Parent'
    }
  ];

  let idx = 0, autoTimer;
  const quoteEl = document.getElementById('quoteText');
  const authorEl = document.getElementById('quoteAuthor');
  const dots = Array.from(document.querySelectorAll('.carousel-dot'));
  const emoji = document.getElementById('confettiEmoji');
  const box = document.getElementById('quoteBox');

  function show(i, animate = true) {
    idx = (i + testimonials.length) % testimonials.length;
    quoteEl.textContent = `“${testimonials[idx].q}”`;
    authorEl.textContent = `— ${testimonials[idx].a}`;
    dots.forEach((d, j) => {
      d.classList.toggle('bg-amber-400', j === idx);
      d.classList.toggle('scale-110', j === idx);
      d.classList.toggle('bg-zinc-700', j !== idx);
    });
    if (animate && !prefersReduced) {
      box.style.opacity = 0;
      setTimeout(() => (box.style.opacity = 1), 50);
    }
  }

  dots.forEach((d) =>
    d.addEventListener('click', () => {
      clearInterval(autoTimer);
      show(+d.dataset.idx);
      startAuto();
    })
  );

  box.addEventListener('keydown', (e) => {
    if (['ArrowRight', 'ArrowDown'].includes(e.key)) show(idx + 1);
    if (['ArrowLeft', 'ArrowUp'].includes(e.key)) show(idx - 1);
  });

  let startX = null;
  box.addEventListener('touchstart', (e) => (startX = e.touches[0].clientX), { passive: true });
  box.addEventListener(
    'touchend',
    (e) => {
      if (startX === null) return;
      const delta = e.changedTouches[0].clientX - startX;
      if (Math.abs(delta) > 50) show(delta < 0 ? idx + 1 : idx - 1);
      startX = null;
    },
    { passive: true }
  );

  document.getElementById('copyQuoteBtn').addEventListener('click', async () => {
    await navigator.clipboard.writeText(`${testimonials[idx].q} — ${testimonials[idx].a}`);
    if (prefersReduced) return;
    emoji.style.opacity = 1;
    confetti({
      particleCount: 140,
      spread: 60,
      origin: { y: 0.7 },
      colors: ['#facc15', '#fde68a', '#0a0a0a'],
      disableForReducedMotion: true
    });
    setTimeout(() => (emoji.style.opacity = 0), 1200);
  });

  function startAuto() {
    if (prefersReduced) return;
    autoTimer = setInterval(() => show(idx + 1, false), 8000);
  }
  box.addEventListener('mouseenter', () => clearInterval(autoTimer));
  box.addEventListener('mouseleave', startAuto);
  box.addEventListener('focusin', () => clearInterval(autoTimer));
  box.addEventListener('focusout', startAuto);

  show(0, false);
  startAuto();
</script>

{# templates/partials/stat.html #}
<section
  id="testimonials"
  class="relative isolate bg-gradient-to-br from-zinc-800 to-black py-24 px-6 text-white"
  role="region"
  aria-labelledby="testimonials-heading"
  tabindex="-1"
>
  <div class="max-w-5xl mx-auto text-center space-y-12">
    {# ⭐️ Social-proof badge #}
    <div
      class="flex justify-center items-center gap-1 text-2xl text-amber-400 animate-sparkle select-none"
      aria-hidden="true"
    >
      {% for _ in range(5) %}<span>★</span>{% endfor %}
      <span class="ml-2 text-base font-semibold text-amber-200">(5.0)</span>
    </div>

    <h2 id="testimonials-heading" class="text-3xl sm:text-4xl font-bold text-amber-400">
      What They’re Saying
    </h2>

    {# ── Carousel ──────────────────────────────── #}
    <div class="relative max-w-3xl mx-auto">
      <figure
        id="quoteBox"
        class="relative italic text-lg sm:text-xl text-white/90 rounded-xl p-8 bg-zinc-900/70 shadow-lg outline-none select-text transition-opacity duration-500"
        aria-live="polite"
        aria-atomic="true"
        tabindex="0"
      >
        <span
          id="confettiEmoji"
          class="absolute -top-4 left-1/2 -translate-x-1/2 opacity-0 transition-opacity duration-700 pointer-events-none"
          aria-hidden="true"
        >🎉🎊✨</span>

        <blockquote id="quoteText">Loading…</blockquote>
        <figcaption id="quoteAuthor" class="mt-4 text-sm font-medium text-amber-300"></figcaption>

        <button
          id="copyQuoteBtn"
          class="mt-4 text-xs text-amber-400 underline hover:text-amber-200 focus:outline-offset-4"
          aria-label="Copy testimonial to clipboard"
        >
          Copy Quote
        </button>
      </figure>

      <div class="flex justify-center mt-6 gap-2">
        {% for i in range(3) %}
        <button
          class="carousel-dot w-3 h-3 rounded-full border-2 border-amber-400 transition-transform duration-200 {% if i == 0 %}bg-amber-400 scale-110{% else %}bg-zinc-700{% endif %}"
          data-idx="{{ i }}"
          aria-label="Show testimonial {{ i + 1 }}"
        ></button>
        {% endfor %}
      </div>
    </div>

    <img
      src="https://static.wixstatic.com/media/2f0953_5d94082989fb4c4eb31f7f440de183c2~mv2.jpg/v1/fill/w_1100,h_1034,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/IMG_2031.jpg"
      alt="Team showing off championship rings"
      width="480"
      height="320"
      loading="lazy"
      class="rounded-2xl shadow-2xl ring-4 ring-amber-300/50 object-cover mx-auto"
    />
  </div>
</section>

<section id="stats" class="py-24 px-6 bg-black text-white" role="region" aria-label="Team statistics">
  <div class="max-w-4xl mx-auto flex flex-wrap justify-center gap-10 text-center">
    {% set stats = [
      ('16', 'Players Enrolled'),
      ('11', 'Honor Roll Scholars'),
      ('12', 'Tournaments Played'),
      ('3', 'Years Running')
    ] %}
    {% for number, label in stats %}
    <div
      class="stat-card transform transition duration-300 hover:scale-105"
      data-aos="zoom-in"
      data-aos-delay="{{ loop.index0 * 100 }}"
      tabindex="0"
      role="group"
      aria-label="{{ number }} {{ label }}"
    >
      <div class="text-4xl font-extrabold text-amber-400 drop-shadow">{{ number }}</div>
      <div class="mt-1 text-base text-white/80 font-medium">{{ label }}</div>
    </div>
    {% endfor %}
  </div>
</section>

<script defer type="module">
  import confetti from 'https://cdn.skypack.dev/canvas-confetti@1.6.0';

  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const testimonials = [
    {
      q: 'Winning felt amazing — but it’s being part of a team that believes in you that means the most.',
      a: 'Connect ATX Elite Player, Class of 2030'
    },
    {
      q: 'Being part of Connect ATX Elite helps me stay focused in school and basketball. I want to make my family proud.',
      a: 'Honor-Roll Scholar-Athlete'
    },
    {
      q: 'I’ve seen real changes in my son — he’s more disciplined, focused, and confident in class and in life.',
      a: 'Team Parent'
    }
  ];

  let idx = 0,
    autoTimer;
  const quoteEl = document.getElementById('quoteText');
  const authorEl = document.getElementById('quoteAuthor');
  const dots = Array.from(document.querySelectorAll('.carousel-dot'));
  const emoji = document.getElementById('confettiEmoji');
  const box = document.getElementById('quoteBox');

  function show(i, animate = true) {
    idx = (i + testimonials.length) % testimonials.length;
    quoteEl.textContent = `“${testimonials[idx].q}”`;
    authorEl.textContent = `— ${testimonials[idx].a}`;
    dots.forEach((d, j) => {
      d.classList.toggle('bg-amber-400', j === idx);
      d.classList.toggle('scale-110', j === idx);
      d.classList.toggle('bg-zinc-700', j !== idx);
    });
    if (animate && !prefersReduced) {
      box.style.opacity = 0;
      setTimeout(() => (box.style.opacity = 1), 50);
    }
  }

  dots.forEach((d) =>
    d.addEventListener('click', () => {
      clearInterval(autoTimer);
      show(+d.dataset.idx);
      startAuto();
    })
  );

  box.addEventListener('keydown', (e) => {
    if (['ArrowRight', 'ArrowDown'].includes(e.key)) show(idx + 1);
    if (['ArrowLeft', 'ArrowUp'].includes(e.key)) show(idx - 1);
  });

  let startX = null;
  box.addEventListener('touchstart', (e) => (startX = e.touches[0].clientX), { passive: true });
  box.addEventListener(
    'touchend',
    (e) => {
      if (startX === null) return;
      const delta = e.changedTouches[0].clientX - startX;
      if (Math.abs(delta) > 50) show(delta < 0 ? idx + 1 : idx - 1);
      startX = null;
    },
    { passive: true }
  );

  document.getElementById('copyQuoteBtn').addEventListener('click', async () => {
    await navigator.clipboard.writeText(`${testimonials[idx].q} — ${testimonials[idx].a}`);
    if (prefersReduced) return;
    emoji.style.opacity = 1;
    confetti({
      particleCount: 140,
      spread: 60,
      origin: { y: 0.7 },
      colors: ['#facc15', '#fde68a', '#0a0a0a'],
      disableForReducedMotion: true
    });
    setTimeout(() => (emoji.style.opacity = 0), 1200);
  });

  function startAuto() {
    if (prefersReduced) return;
    autoTimer = setInterval(() => show(idx + 1, false), 8000);
  }
  box.addEventListener('mouseenter', () => clearInterval(autoTimer));
  box.addEventListener('mouseleave', startAuto);
  box.addEventListener('focusin', () => clearInterval(autoTimer));
  box.addEventListener('focusout', startAuto);

  show(0, false);
  startAuto();
</script>

<section
  id="testimonials"
  class="relative isolate bg-gradient-to-br from-zinc-800 to-black py-24 px-6 text-white"
  role="region"
  aria-labelledby="testimonials-heading"
  tabindex="-1"
>
  <div class="max-w-5xl mx-auto text-center space-y-12">
    {# ⭐️ Social-proof badge #}
    <div
      class="flex justify-center items-center gap-1 text-2xl text-amber-400 animate-sparkle select-none"
      aria-hidden="true"
    >
      {% for _ in range(5) %}<span>★</span>{% endfor %}
      <span class="ml-2 text-base font-semibold text-amber-200">(5.0)</span>
    </div>

    <h2 id="testimonials-heading" class="text-3xl sm:text-4xl font-bold text-amber-400">
      What They’re Saying
    </h2>

    {# ── Carousel ──────────────────────────────── #}
    <div class="relative max-w-3xl mx-auto">
      <figure
        id="quoteBox"
        class="relative italic text-lg sm:text-xl text-white/90 rounded-xl p-8 bg-zinc-900/70 shadow-lg outline-none select-text transition-opacity duration-500"
        aria-live="polite"
        aria-atomic="true"
        tabindex="0"
      >
        <span
          id="confettiEmoji"
          class="absolute -top-4 left-1/2 -translate-x-1/2 opacity-0 transition-opacity duration-700 pointer-events-none"
          aria-hidden="true"
        >🎉🎊✨</span>

        <blockquote id="quoteText">Loading…</blockquote>
        <figcaption id="quoteAuthor" class="mt-4 text-sm font-medium text-amber-300"></figcaption>

        <button
          id="copyQuoteBtn"
          class="mt-4 text-xs text-amber-400 underline hover:text-amber-200 focus:outline-offset-4"
          aria-label="Copy testimonial to clipboard"
        >
          Copy Quote
        </button>
      </figure>

      <div class="flex justify-center mt-6 gap-2">
        {% for i in range(3) %}
        <button
          class="carousel-dot w-3 h-3 rounded-full border-2 border-amber-400 transition-transform duration-200 {% if i == 0 %}bg-amber-400 scale-110{% else %}bg-zinc-700{% endif %}"
          data-idx="{{ i }}"
          aria-label="Show testimonial {{ i + 1 }}"
        ></button>
        {% endfor %}
      </div>
    </div>

    <img
      src="https://static.wixstatic.com/media/2f0953_5d94082989fb4c4eb31f7f440de183c2~mv2.jpg/v1/fill/w_1100,h_1034,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/IMG_2031.jpg"
      alt="Team showing off championship rings"
      width="480"
      height="320"
      loading="lazy"
      class="rounded-2xl shadow-2xl ring-4 ring-amber-300/50 object-cover mx-auto"
    />
  </div>
</section>

<script defer type="module">
  import confetti from 'https://cdn.skypack.dev/canvas-confetti@1.6.0';

  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const testimonials = [
    {
      q: 'Winning felt amazing — but it’s being part of a team that believes in you that means the most.',
      a: 'Connect ATX Elite Player, Class of 2030'
    },
    {
      q: 'Being part of Connect ATX Elite helps me stay focused in school and basketball. I want to make my family proud.',
      a: 'Honor-Roll Scholar-Athlete'
    },
    {
      q: 'I’ve seen real changes in my son — he’s more disciplined, focused, and confident in class and in life.',
      a: 'Team Parent'
    }
  ];

  let idx = 0, autoTimer;
  const quoteEl = document.getElementById('quoteText');
  const authorEl = document.getElementById('quoteAuthor');
  const dots = Array.from(document.querySelectorAll('.carousel-dot'));
  const emoji = document.getElementById('confettiEmoji');
  const box = document.getElementById('quoteBox');

  function show(i, animate = true) {
    idx = (i + testimonials.length) % testimonials.length;
    quoteEl.textContent = `“${testimonials[idx].q}”`;
    authorEl.textContent = `— ${testimonials[idx].a}`;
    dots.forEach((d, j) => {
      d.classList.toggle('bg-amber-400', j === idx);
      d.classList.toggle('scale-110', j === idx);
      d.classList.toggle('bg-zinc-700', j !== idx);
    });
    if (animate && !prefersReduced) {
      box.style.opacity = 0;
      setTimeout(() => (box.style.opacity = 1), 50);
    }
  }

  dots.forEach((d) =>
    d.addEventListener('click', () => {
      clearInterval(autoTimer);
      show(+d.dataset.idx);
      startAuto();
    })
  );

  box.addEventListener('keydown', (e) => {
    if (['ArrowRight', 'ArrowDown'].includes(e.key)) show(idx + 1);
    if (['ArrowLeft', 'ArrowUp'].includes(e.key)) show(idx - 1);
  });

  let startX = null;
  box.addEventListener('touchstart', (e) => (startX = e.touches[0].clientX), { passive: true });
  box.addEventListener(
    'touchend',
    (e) => {
      if (startX === null) return;
      const delta = e.changedTouches[0].clientX - startX;
      if (Math.abs(delta) > 50) show(delta < 0 ? idx + 1 : idx - 1);
      startX = null;
    },
    { passive: true }
  );

  document.getElementById('copyQuoteBtn').addEventListener('click', async () => {
    await navigator.clipboard.writeText(`${testimonials[idx].q} — ${testimonials[idx].a}`);
    if (prefersReduced) return;
    emoji.style.opacity = 1;
    confetti({
      particleCount: 140,
      spread: 60,
      origin: { y: 0.7 },
      colors: ['#facc15', '#fde68a', '#0a0a0a'],
      disableForReducedMotion: true
    });
    setTimeout(() => (emoji.style.opacity = 0), 1200);
  });

  function startAuto() {
    if (prefersReduced) return;
    autoTimer = setInterval(() => show(idx + 1, false), 8000);
  }
  box.addEventListener('mouseenter', () => clearInterval(autoTimer));
  box.addEventListener('mouseleave', startAuto);
  box.addEventListener('focusin', () => clearInterval(autoTimer));
  box.addEventListener('focusout', startAuto);

  show(0, false);
  startAuto();
</script>

{# templates/partials/hero_overlay_quote.html #}
<div
  class="absolute bottom-8 left-1/2 -translate-x-1/2 max-w-xl px-6 py-4 bg-black/60 backdrop-blur-md rounded-xl text-center text-amber-300 text-lg sm:text-xl font-semibold tracking-wide shadow-glow select-none pointer-events-none"
  aria-hidden="true"
  data-aos="fade-up"
  data-aos-delay="350"
>
  “Building champions on and off the court — together, we rise.”
</div>

<section
  id="hero"
  class="relative isolate w-full min-h-[90vh] md:min-h-screen overflow-hidden bg-gradient-to-br from-cyber-night to-prestige-black rounded-3xl shadow-gold"
  aria-labelledby="hero-heading"
  tabindex="-1"
  data-aos="fade-in"
>
  <!-- 🔥 Ken Burns Background Image -->
  <div class="absolute inset-0 -z-10 overflow-hidden">
    <img
      src="{{ url_for('static', filename='connect-atx-team.jpg') }}"
      alt="Connect ATX Elite team after a great Championship Tournament"
      class="h-full w-full object-cover brightness-95 saturate-110 motion-safe:animate-kenburns"
      loading="eager"
      decoding="async"
      fetchpriority="high"
    />
  </div>

  <!-- ✨ Luxe animated overlay -->
  <div class="absolute inset-0 bg-gradient-to-b from-black/30 to-black/90 -z-10 animate-gradient-xy"></div>

  <!-- 🟨 Scrollbar Progress HUD -->
  <div
    id="scrollbar"
    class="fixed left-0 top-0 z-[999] h-1 w-0 bg-amber-400 origin-left transition-[width] duration-150 ease-out"
  ></div>

  <!-- 💎 Hero Core Content -->
  <div
    class="relative z-20 flex flex-col items-center justify-center h-full text-center px-6 py-32 md:py-40 max-w-7xl mx-auto"
  >
    <!-- Logo larger + hover scale + glow -->
    <img
      src="{{ url_for('static', filename='images/logo-hero.png') }}"
      alt="Connect ATX Elite Logo"
      class="w-40 md:w-48 drop-shadow-gold animate-glow gsap-logo cursor-pointer transition-transform duration-500 hover:scale-105"
      style="filter: drop-shadow(0 0 1rem #facc15);"
      loading="lazy"
      decoding="async"
      data-aos="zoom-in"
      data-aos-delay="50"
    />

    <!-- Amplified Tagline -->
    <p
      id="hero-heading"
      class="mt-6 text-2xl md:text-4xl font-extrabold text-amber-400 max-w-3xl leading-snug drop-shadow-lg animate-fade-up delay-150"
      data-aos="fade-up"
      data-aos-delay="150"
    >
      Empowering Youth Through Basketball, Brotherhood &amp; Academics
    </p>

    <!-- Upgraded CTAs -->
    <div class="mt-10 flex flex-col sm:flex-row gap-6 justify-center" data-aos="fade-up" data-aos-delay="200">
      <a
        href="#tiers"
        class="inline-block bg-amber-400 hover:bg-amber-300 text-black font-extrabold px-12 py-4 rounded-2xl shadow-[0_0_20px_#facc15] focus-visible:ring-6 ring-amber-300 transition-transform transform-gpu hover:scale-105 animate-pulse-slow"
      >
        Become a Sponsor
      </a>
      <a
        href="#about"
        class="inline-block border-2 border-amber-400 text-amber-400 font-bold px-12 py-4 rounded-2xl shadow-inner hover:bg-amber-400 hover:text-black transition"
      >
        Learn More
      </a>
    </div>

    <!-- Elevated Fundraising HUD -->
    <div
      class="mt-8 font-mono text-lg md:text-xl text-white/90 bg-black/40 backdrop-blur-sm px-6 py-2 rounded-full inline-flex items-center space-x-3 shadow-glow animate-fade-up delay-250"
      aria-live="polite"
      data-aos="fade-up"
      data-aos-delay="250"
    >
      <span>💰</span>
      <span class="font-semibold text-amber-400 tracking-wider">${{ config.get('RAISED_AMOUNT', 7900) }}</span>
      <span>raised of</span>
      <span class="font-semibold text-amber-400 tracking-wider">${{ config.get('GOAL_AMOUNT', 10000) }}</span>
      <span>goal</span>
    </div>
  </div>

  <!-- ⬇️ Larger Chevron Scroll Hint with pulse -->
  <button
    id="scroll-hint"
    class="absolute bottom-12 left-1/2 -translate-x-1/2 text-amber-300 animate-bounce-slow hover:text-amber-200 focus:outline-none scale-110"
    aria-label="Scroll down"
    data-aos="fade-up"
    data-aos-delay="300"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="w-10 h-10"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
      stroke-width="2"
    >
      <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
    </svg>
  </button>

  {% include "partials/hero_overlay_quote.html" ignore missing %}
</section>

<section
  id="cta"
  role="region"
  aria-labelledby="cta-heading"
  class="relative py-28 bg-gradient-to-b from-black via-zinc-900 to-black text-white text-center px-6"
  tabindex="-1"
>
  <div class="max-w-3xl mx-auto space-y-10">

    <!-- 1. Headline & Sub-Headline -->
    <h2
      id="cta-heading"
      class="text-4xl sm:text-5xl font-extrabold text-amber-400 drop-shadow-xl tracking-tight"
      data-aos="zoom-in"
    >
      Ready to Join Our Mission?
    </h2>
    <p
      class="text-white/85 text-lg sm:text-xl leading-relaxed"
      data-aos="fade-up" data-aos-delay="100"
    >
      Help us secure gym time, fund travel, and empower our student-athletes for life beyond the court.
    </p>

    <!-- 2. Live Progress Bar -->
    {% set raised = config.RAISED_AMOUNT %}
    {% set goal   = config.GOAL_AMOUNT %}
    <div class="w-full bg-zinc-800 rounded-full h-4 overflow-hidden" data-aos="fade-up" data-aos-delay="200" aria-hidden="true">
      <div
        class="h-4 bg-gradient-to-r from-amber-400 to-yellow-300 shadow-gold animate-pulse"
        style="width: {{ (raised/goal*100)|round(0) }}%"
        aria-valuemin="0"
        aria-valuemax="100"
        role="progressbar"
        aria-valuenow="{{ (raised/goal*100)|round(0) }}"
      ></div>
    </div>
    <div
      class="flex justify-center items-center gap-2 font-mono text-sm text-white/80"
      aria-live="polite"
      data-aos="fade-up" data-aos-delay="300"
    >
      <span role="img" aria-label="Fundraiser">💰</span>
      <span>
        <span class="font-bold text-amber-400">${{ "{:,}".format(raised) }}</span> of
        <span class="font-bold text-amber-400">${{ "{:,}".format(goal) }}</span> goal
      </span>
    </div>

    <!-- 3. Urgency Countdown -->
    <div
      id="countdown"
      class="text-amber-300 font-semibold tracking-wide text-sm sm:text-base"
      data-aos="fade-up" data-aos-delay="400"
      aria-live="polite"
    >
      <span id="cd-days">--</span>d
      <span id="cd-hours">--</span>h
      <span id="cd-mins">--</span>m left to hit our goal!
    </div>

    <!-- 4. Preset Gift Buttons + Custom Amount -->
    <div class="flex flex-wrap justify-center gap-3" data-aos="fade-up" data-aos-delay="500">
      {% for amt in [25,50,100,250] %}
      <button
        type="button"
        class="preset-amt bg-zinc-700 hover:bg-zinc-600 px-4 py-2 rounded-full font-semibold text-white transition-shadow shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-amber-400"
        data-amt="{{ amt }}"
        aria-label="Select ${{ amt }} donation amount"
      >
        ${{ amt }}
      </button>
      {% endfor %}
      <input
        id="customAmt"
        type="number" min="1" max="999"
        placeholder="Custom"
        aria-label="Custom donation amount"
        class="w-20 bg-zinc-800 text-white text-center rounded-full px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-400 border border-zinc-600"
      />
    </div>

    <!-- 5. Donate Button → Modal + Confetti -->
    <button
      id="donateBtn"
      class="mt-4 inline-block bg-amber-400 text-black font-semibold text-lg px-8 py-3 rounded-full shadow-gold hover:scale-105 hover:bg-amber-300 focus-visible:ring-4 focus-visible:ring-amber-300 transition-transform duration-300 animate-glow"
      data-aos="zoom-in" data-aos-delay="600"
      aria-haspopup="dialog"
      aria-controls="donateDialog"
    >
      Donate Now
    </button>

    <!-- QR code fallback -->
    <div class="pt-6 flex flex-col items-center gap-1" data-aos="fade-up" data-aos-delay="700">
      <img
        src="{{ url_for('static', filename='qr-website.png') }}"
        alt="Donate via QR Code"
        width="128" height="128"
        class="rounded-lg shadow-lg opacity-75 hover:opacity-100 transition"
        loading="lazy"
      >
      <p class="text-xs text-white/60">Scan: CashApp / PayPal / Venmo</p>
    </div>

    <p class="pt-6 text-sm text-white/60" data-aos="fade-up" data-aos-delay="800">
      Or contact <a href="mailto:arodgps@gmail.com" class="underline hover:text-amber-300">arodgps@gmail.com</a>
      &nbsp;| 📞 (512) 820-0475
    </p>
  </div>

  {# ——— Modal (using native <dialog>) ——— #}
  <dialog id="donateDialog" class="w-full max-w-md p-0 rounded-2xl overflow-hidden" role="dialog" aria-modal="true" aria-labelledby="donateDialogTitle">
    <form id="donateForm" method="dialog" class="bg-zinc-950 text-white p-6 space-y-4" aria-describedby="donateDialogDesc">
      <h3 id="donateDialogTitle" class="text-2xl font-bold text-amber-400">Enter Donation Amount</h3>
      <input name="amount" id="formAmt" type="number" min="1" max="999" required
             class="w-full bg-zinc-800 rounded-full px-4 py-2 text-center focus:outline-none border border-zinc-700"
             aria-label="Donation amount input" />
      <div class="flex justify-end gap-2">
        <button type="reset" class="px-4 py-2 rounded-full bg-zinc-700 hover:bg-zinc-600">Cancel</button>
        <button type="submit"
                class="px-6 py-2 rounded-full bg-amber-400 text-black font-bold hover:bg-amber-300">
          Donate
        </button>
      </div>
    </form>
  </dialog>
</section>

<script defer type="module">
import confetti from "https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/+esm";
import { loadStripe } from "https://js.stripe.com/v3";
const stripe = await loadStripe("{{ stripe_publishable }}");

// Countdown Timer
(function() {
  const target = new Date("{{ config.CAMPAIGN_END_ISO }}");
  const days = document.getElementById("cd-days"),
        hours = document.getElementById("cd-hours"),
        mins = document.getElementById("cd-mins");

  function tick() {
    const diff = target - new Date();
    if (diff <= 0) { clearInterval(timer); return; }
    const d = Math.floor(diff/86400000),
          h = Math.floor((diff%86400000)/3600000),
          m = Math.floor((diff%3600000)/60000);
    days.textContent = d; hours.textContent = h; mins.textContent = m;
  }
  const timer = setInterval(tick, 1000);
  tick();
})();

// Preset amount buttons click handler
document.querySelectorAll(".preset-amt").forEach(btn => {
  btn.addEventListener("click", () => {
    document.getElementById("formAmt").value = btn.dataset.amt;
  });
});

// Open dialog and confetti animation
const opener = document.getElementById("donateBtn");
const dialog = document.getElementById("donateDialog");
opener.addEventListener("click", () => {
  dialog.showModal();
  confetti({ particleCount: 120, spread: 70, origin: { y: 0.6 }, colors: ["#facc15", "#fef3c7"] });
});

// Handle form submission → Stripe checkout
document.getElementById("donateForm").addEventListener("submit", async e => {
  e.preventDefault();
  const amount = parseInt(document.getElementById("formAmt").value, 10);
  if (!amount || amount < 1 || amount > 999) {
    alert("Please enter a donation amount between $1 and $999.");
    return;
  }
  const res = await fetch("/api/create-checkout", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ amount }),
  });
  const { session_id } = await res.json();
  await stripe.redirectToCheckout({ sessionId: session_id });
});
</script>

{# templates/index.html — Elite-Grade Homepage (Prestige Theme) #}
{% extends "base.html" %}

{% block title %}
  Home · Connect ATX Elite
{% endblock %}

{% block extra_styles %}
  <style>
    /* ✅ Scroll-Reveal Animation */
    [data-reveal] {
      opacity: 0;
      transform: translateY(32px);
      transition:
        opacity 0.7s cubic-bezier(.22,.61,.36,1),
        transform 0.7s cubic-bezier(.22,.61,.36,1);
      will-change: opacity, transform;
    }
    [data-reveal].in-view {
      opacity: 1;
      transform: translateY(0);
    }

    /* ✨ Focus ring for accessibility */
    :focus-visible {
      outline: 3px solid #facc15;
      outline-offset: 3px;
      border-radius: 0.375rem;
    }

    /* Footer breathing room */
    section.mb-16:last-of-type {
      margin-bottom: 5rem;
    }
  </style>
{% endblock %}

{% block content %}
  <h1 id="page-title" class="sr-only">Home · Connect ATX Elite</h1>

  <main role="main" id="main-content" tabindex="-1" aria-label="Main content" class="overflow-x-hidden">

    <!-- 🏀 Hero Section -->
    <section
      id="hero"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-label="Hero Section"
      tabindex="0"
      aria-describedby="hero-desc"
    >
      {% include "partials/hero.html" %}
      <p id="hero-desc" class="sr-only">
        Empowering youth through basketball, mentorship, and academic excellence.
      </p>
    </section>

    <!-- 🥇 Sponsorship Tiers -->
    <section
      id="tiers"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-labelledby="tiers-title"
      tabindex="0"
    >
      <h2 id="tiers-title" class="sr-only">Sponsorship Tiers</h2>
      {% include "partials/tiers.html" %}
    </section>

    <!-- 💬 Testimonials -->
    <section
      id="testimonials"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-labelledby="testimonials-title"
      tabindex="0"
    >
      <h2 id="testimonials-title" class="sr-only">Testimonials</h2>
      {% include "partials/testimonials.html" %}
    </section>

    <!-- 📣 Call to Action -->
    <section
      id="ctaSection"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-labelledby="cta-title"
      tabindex="0"
    >
      <h2 id="cta-title" class="sr-only">Call To Action</h2>
      {% include "partials/cta.html" %}
    </section>

    <!-- 🌟 Sponsor Wall -->
    <section
      id="sponsor-wall"
      class="mb-16 scroll-mt-20"
      data-reveal data-aos="fade-up"
      aria-labelledby="sponsor-wall-title"
      tabindex="0"
    >
      <h2 id="sponsor-wall-title" class="sr-only">Sponsor Wall</h2>
      {% include "partials/sponsor_wall.html" %}
    </section>

  </main>

  <!-- 🌐 Modals and UI Widgets -->
  {% include "partials/donation_modal.html" %}
  {% include "partials/newsletter_popup.html" %}
  {% include "partials/back_to_top_ball.html" %}
  {% include "partials/toast_notifications.html" %}
  {% include "partials/vip_leaderboard.html" %}
  {% include "partials/chat_widget.html" %}
  {% include "partials/accessibility_toolbar.html" %}
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script>
    // 🚀 Scroll-Reveal Intersection Observer
    (() => {
      const elements = document.querySelectorAll('[data-reveal]');
      if (!('IntersectionObserver' in window)) return;

      const observer = new IntersectionObserver((entries, obs) => {
        for (const { isIntersecting, target } of entries) {
          if (isIntersecting) {
            target.classList.add('in-view');
            obs.unobserve(target);
          }
        }
      }, { threshold: 0.35 });

      elements.forEach(el => observer.observe(el));
    })();
  </script>
{% endblock %}

  </main>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      AOS.init({ once: true, duration: 700, easing: "ease-out-quart" });
    });
  </script>
</body>
</html>

